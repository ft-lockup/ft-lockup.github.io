(this["webpackJsonpft-lockup-contract-frontend"]=this["webpackJsonpft-lockup-contract-frontend"]||[]).push([[0],{230:function(e,t){},240:function(e,t){},291:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){},296:function(e,t,n){"use strict";n.r(t);var a=n(55),r=n(29),c=n(16),o=n(6),s=n(9),i=n.n(s),l=n(2),u=n(49),d=n(379),b=n(184),p=n.n(b),j=n(22),h=n(25),f=n(19),m=n.n(f),x=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).DEFAULT_CONTRACT_NAME||"ft-lockup.demo008.ft-lockup.testnet",v=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).FACTORY_CONTRACT_NAME||"factory008.ft-lockup.testnet",O=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).FACTORY_CONTRACT_HASH||"DPDYZYHjRqLKZLGpvZYTLKudRrKWmN6a43Pc4MD2t9dg",g=function(){var e=window.location.hash.split("/")[1];return"new_lockup_contract"===e?v:e}();console.log(g);var k=function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ENVIRONMENT||"development";switch(e){case"production":case"mainnet":return{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",contractName:g,walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org",explorerUrl:"https://explorer.mainnet.near.org",factoryContractName:v,factoryContractHash:O};case"development":case"testnet":return{networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",contractName:g,walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org",explorerUrl:"https://explorer.testnet.near.org",factoryContractName:v,factoryContractHash:O};case"betanet":return{networkId:"betanet",nodeUrl:"https://rpc.betanet.near.org",contractName:g,walletUrl:"https://wallet.betanet.near.org",helperUrl:"https://helper.betanet.near.org",explorerUrl:"https://explorer.betanet.near.org",factoryContractName:v,factoryContractHash:O};case"local":return{explorerUrl:"",helperUrl:"",networkId:"local",nodeUrl:"http://localhost:3030",walletUrl:"http://localhost:4000/wallet",contractName:g,factoryContractName:v,factoryContractHash:O};case"test":case"ci":return{explorerUrl:"",helperUrl:"",walletUrl:"",networkId:"shared-test",nodeUrl:"https://rpc.ci-testnet.near.org",contractName:g,factoryContractName:v,factoryContractHash:O};case"ci-betanet":return{explorerUrl:"",helperUrl:"",walletUrl:"",networkId:"shared-test-staging",nodeUrl:"https://rpc.ci-betanet.near.org",contractName:g,factoryContractName:v,factoryContractHash:O};default:throw Error("Unconfigured environment '".concat(e,"'. Can be configured in src/config.js."))}}(),w=3e14;m.a.DP=40,m.a.PE=40;var _=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2?arguments[2]:void 0;return m.a.DP=40,m()(e||"0").div(Math.pow(10,24)).toFixed(0===t?void 0:t,n)},y=function(e){return new Date(1e3*e).toLocaleDateString("en-US")},C=function(e,t){return m()(e||"0").div(Math.pow(10,t)).toFixed(2)},S=function(e,t){return new Date(new Date(e).setFullYear(e.getFullYear()+t)).getTime()/1e3},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dump",t=Object.keys(localStorage).map((function(e){return[e,localStorage.getItem(e)]}));localStorage.setItem(e,JSON.stringify(t))},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dump",t=localStorage.getItem(e);if(t){var n=JSON.parse(t);localStorage.clear(),n.forEach((function(e){return localStorage.setItem(e[0],e[1])}))}},I=function(e){return"".concat(k.explorerUrl,"/transactions/").concat(e)},T=n(28),E=n(36),D=n(37),U=["get_draft_group","get_draft_groups_paged","get_drafts","get_lockups_paged","get_token_account_id","get_deposit_whitelist"],P=["create_draft","create_drafts","create_draft_group","convert_draft","convert_drafts","terminate"],F=function(){function e(t){Object(E.a)(this,e),this.near=void 0,this.contract=void 0,this.walletConnection=void 0,this.near=t,this.walletConnection=new T.WalletConnection(t,t.config.contractName),this.contract=new T.Contract(this.walletConnection.account(),this.near.config.contractName,{viewMethods:U,changeMethods:P})}return Object(D.a)(e,[{key:"getDraftGroupsAll",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.get_draft_groups_paged();case 2:return t=e.sent,e.abrupt("return",t.map((function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1];return Object.assign(a,{id:n})})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getDraftGroup",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.get_draft_group({index:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDrafts",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.get_drafts({indices:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDraftGroup",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.create_draft_group();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDraft",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.create_draft({draft:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDrafts",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.create_drafts({args:{drafts:t},gas:"200000000000000"});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"convertDraft",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.convert_draft({draft_id:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"convertDrafts",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.convert_drafts({args:{draft_ids:t},gas:"200000000000000"});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"terminate",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.contract.terminate({args:{lockup_index:t,termination_timestamp:n},gas:w,amount:1});case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),Error("Cannot terminate lockup");case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNear",value:function(){return this.near}},{key:"getWalletConnection",value:function(){return this.walletConnection}},{key:"getContract",value:function(){return this.contract}},{key:"getTokenAccountId",value:function(){return this.contract.get_token_account_id()}},{key:"getDepositWhitelist",value:function(){return this.contract.get_deposit_whitelist()}},{key:"loadAllLockups",value:function(){return this.contract.get_lockups_paged().then((function(e){return e.map((function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1];return Object.assign(a,{id:n})}))}))}},{key:"signIn",value:function(){var e="".concat(window.location.href);this.walletConnection.requestSignIn(this.near.config.contractName,void 0,e)}},{key:"signOut",value:function(){this.walletConnection.signOut(),this.near.config.keyStore.clear()}},{key:"get_account_id",value:function(){return this.walletConnection.getAccountId()}},{key:"account",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.near.account(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get_balance",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.account(t);case 2:return n=e.sent,a=null,e.prev=4,e.next=7,n.getAccountBalance();case 7:r=e.sent,c=r.total,a=parseFloat(T.utils.format.formatNearAmount(c||"0")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.error("Account not exist");case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}var c}),e,this,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),W=F,M=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.query({request_type:"view_access_key_list",account_id:n,finality:"optimistic"});case 2:if(r=e.sent,null!==(a=r.keys)&&void 0!==a&&a.length){e.next=5;break}throw Error("None of access keys was founded");case 5:if(null!==(c=r.keys.filter((function(e){var t,n;return"string"===typeof(null===e||void 0===e||null===(t=e.access_key)||void 0===t?void 0:t.permission)&&"FullAccess"===(null===e||void 0===e||null===(n=e.access_key)||void 0===n?void 0:n.permission)})))&&void 0!==c&&c.length){e.next=8;break}throw Error("None of full access keys was founded");case 8:return e.abrupt("return",c[0]);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),L=M,R=[""],H=["claim"],G=function(){function e(t){Object(E.a)(this,e),this.near=void 0,this.near=t}return Object(D.a)(e,[{key:"claim",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(),e.next=3,this.setWalletAndContractWithAuth(t);case 3:return e.next=5,this.buildContract().claim({},w);case 5:this.near.config.keyStore.clean();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setWalletAndContractWithAuth",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a,r=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:this.near.config.contractName,e.next=3,L(this.near.connection.provider,t);case 3:a=e.sent,localStorage.setItem("".concat(n,"_wallet_auth_key"),JSON.stringify({accountId:t,allKeys:[a.public_key]}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"buildContract",value:function(){return new T.Contract(new T.WalletConnection(this.near,this.near.config.contractName).account(),this.near.config.contractName,{viewMethods:R,changeMethods:H})}}]),e}(),K=G,B=[""],V=["storage_deposit"],J=function(){function e(t){Object(E.a)(this,e),this.near=void 0,this.near=t}return Object(D.a)(e,[{key:"storageDeposit",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(),e.next=3,this.setWalletAndContractWithAuth(n);case 3:return e.next=5,this.buildContract(t).storage_deposit({args:{account_id:n},gas:w,amount:a});case 5:this.near.config.keyStore.clean();case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"setWalletAndContractWithAuth",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a,r=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:this.near.config.contractName,e.next=3,L(this.near.connection.provider,t);case 3:a=e.sent,localStorage.setItem("".concat(n,"_wallet_auth_key"),JSON.stringify({accountId:t,allKeys:[a.public_key]}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"buildContract",value:function(e){return new T.Contract(new T.WalletConnection(this.near,this.near.config.contractName).account(),e,{viewMethods:B,changeMethods:V})}}]),e}(),Y=J,q=n(188),z=["msg"],$=3e14,Z=["ft_metadata","storage_balance_of","storage_balance_bounds"],Q=["ft_transfer_call","storage_deposit"],X=function(){function e(t,n){Object(E.a)(this,e),this.contract=void 0,this.contract=new T.Contract(t.account(),n,{viewMethods:Z,changeMethods:Q})}return Object(D.a)(e,[{key:"getContract",value:function(){return this.contract}},{key:"createLockup",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,a,r,c){var o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ftTransferCall({receiver_id:t,amount:n.toString(),msg:{account_id:a,schedule:r,vesting_schedule:c?{Schedule:c}:null}});case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r,c){return e.apply(this,arguments)}}()},{key:"fundDraftGroup",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ftTransferCall({receiver_id:t,amount:a,msg:{draft_group_id:n}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"ftTransferCall",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a,c,o,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:$,a=s.length>2&&void 0!==s[2]?s[2]:1,c=t.msg,o=Object(q.a)(t,z),e.next=5,this.contract.ft_transfer_call(Object(r.a)({msg:JSON.stringify(c)},o),n,a);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"storageDeposit",value:function(e,t){return this.contract.storage_deposit({args:{account_id:e},gas:$,amount:t})}},{key:"ftMetadata",value:function(){return this.contract.ft_metadata({})}},{key:"storageBalanceOf",value:function(e){return this.contract.storage_balance_of({account_id:e})}},{key:"storageBalanceBounds",value:function(){return this.contract.storage_balance_bounds()}}]),e}(),ee=X,te=new m.a(4).mul(new m.a(10).pow(24)).toString(),ne=["create"],ae=function(){function e(t,n,a){Object(E.a)(this,e),this.contract=void 0,this.hash=void 0,this.contract=new T.Contract(t.account(),n,{viewMethods:[],changeMethods:ne}),this.hash=a}return Object(D.a)(e,[{key:"getContract",value:function(){return this.contract}},{key:"create",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,a,r){var c,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={token_account_id:n,deposit_whitelist:a},o=btoa(JSON.stringify(c)),e.next=4,this.contract.create({args:{name:t,hash:this.hash,access_keys:[],method_name:"new",args:o},callbackUrl:r,gas:3e14,amount:te});case 4:return s=e.sent,console.log(s),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()}]),e}(),re=ae,ce=n(5),oe=["call:AddProposal","*:AddProposal"],se=["get_policy"],ie=function(){function e(t,n){Object(E.a)(this,e),this.near=void 0,this.contract=void 0,this.near=t,this.contract=new T.Contract(new T.WalletConnection(this.near,n).account(),n,{viewMethods:se,changeMethods:[]})}return Object(D.a)(e,[{key:"getContract",value:function(){return this.contract}},{key:"getCouncilMembers",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.get_policy();case 2:if(t=e.sent,0!==(n=t.roles.filter((function(e){var t,n;return(null===e||void 0===e||null===(t=e.permissions)||void 0===t?void 0:t.includes(oe[0]))||(null===e||void 0===e||null===(n=e.permissions)||void 0===n?void 0:n.includes(oe[1]))}))).length){e.next=6;break}return e.abrupt("return",[]);case 6:return a=n.map((function(e){var t;return null===e||void 0===e||null===(t=e.kind)||void 0===t?void 0:t.Group})),e.abrupt("return",a.flat().filter((function(e){return e})));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),le=ie,ue=function(e,t,n,a,r,c,o,s,i,l){var u={details:a,smartContractAddress:r,methodName:c,json:o,actionsGas:s,gas:l,deposit:i};return"".concat("https://dev.app.astrodao.com","/dao/").concat(e,"/proposals?action=").concat(t,"&variant=").concat(n,"&params=").concat(JSON.stringify(u))},de=function(e,t,n,a,r,c,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"300";return ue(e,"create_proposal","ProposeCustomFunctionCall",t,n,a,r,c,o,s)},be=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=new le(t,n),e.next=4,a.getCouncilMembers();case 4:return r=e.sent,e.abrupt("return",Object(ce.a)({},n,r));case 8:return e.prev=8,e.t0=e.catch(0),console.log("isDAO ERROR:",e.t0),e.abrupt("return",void 0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),pe=function(e,t,n,a,r,c){var o=encodeURIComponent(e),s={receiver_id:t,amount:a,msg:JSON.stringify({draft_group_id:r})};return de(c,o,n,"ft_transfer_call",s,"100","0.000000000000000000000001")},je=function(e,t,n,a,r){var c=encodeURIComponent(e);return de(r,c,t,"terminate",{lockup_index:n,termination_timestamp:a},"100","0.000000000000000000000001")},he=Object(l.createContext)(null),fe=function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,a,c,o,s,l,u,d,b,p,j,h,f,m,x,v,O,g,w,_;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.getItem("dump")&&A(),t=new T.keyStores.BrowserLocalStorageKeyStore,e.next=4,T.connect(Object(r.a)({headers:{},keyStore:t},k));case 4:return n=e.sent,a=new W(n),c=new T.keyStores.InMemoryKeyStore,e.next=9,T.connect(Object(r.a)({headers:{},keyStore:c},k));case 9:return o=e.sent,s=new K(o),l=new Y(o),u=new T.WalletConnection(n,k.contractName),d=u.getAccountId(),b="",p=!1,j=[],h=[],e.prev=18,e.next=21,a.getTokenAccountId();case 21:return b=e.sent,e.next=24,a.getDepositWhitelist();case 24:return j=e.sent,console.log("depositWhitelist",j),p=j.includes(d),console.log("isAdmin",p),e.next=30,Promise.all(j.map((function(e){return be(n,e)})));case 30:f=e.sent.filter((function(e){return!!e})),(null===(m=f.filter((function(e){return Object.values(e).pop().includes(d)})))||void 0===m?void 0:m.length)>0&&(h=m.map((function(e){return Object.keys(e).pop()||""}))),console.log("userDaosCouncils",m),console.log("councilMembers",f),console.log("daos",h),e.next=41;break;case 38:e.prev=38,e.t0=e.catch(18),console.log(e.t0);case 41:return x=new ee(u,b),v=!1,O=window.location.hash.split("/")[1],e.prev=44,e.next=47,x.storageBalanceOf(O);case 47:g=e.sent,v=null!==g&&!0,console.log(v),e.next=55;break;case 52:e.prev=52,e.t1=e.catch(44),console.log(e.t1);case 55:return w=new re(u,k.factoryContractName,k.factoryContractHash),_=new T.providers.JsonRpcProvider(k.nodeUrl),e.abrupt("return",{config:k,api:a,tokenContractId:b,noLoginApi:s,tokenApi:x,factoryApi:w,currentUser:{signedIn:!!d,isAdmin:p,isCouncilMember:h.length>0,signedAccountId:d,daos:h},noLoginTokenApi:l,rpcProvider:_,isContractFtStoragePaid:v,lockupContractId:O});case 58:case"end":return e.stop()}}),e,null,[[18,38],[44,52]])})));return function(){return e.apply(this,arguments)}}(),me=n(1);function xe(e){var t=e.lockups,n=e.token_account_id;return Object(me.jsxs)("div",{className:"container",children:[Object(me.jsx)("h1",{children:"About Page"}),Object(me.jsx)("pre",{children:"\n          This page should render all useful info about contract,\n          at least ft-lockup name, token name, contract ft balance,\n\n          ft-lockup account id: ".concat(k.contractName,"\n          token account id: ").concat(n,"\n\n          Total number of lockups: ").concat(t.length,"\n        ")})]})}var ve=n(352),Oe=n(374),ge=n(375),ke=n(376),we=n(377),_e=n(378),ye=n(369),Ce=n(373),Se=n(116),Ne=n.n(Se),Ae=n(117),Ie=n.n(Ae);function Te(e){var t=e.url,n=e.size;return Object(me.jsx)("img",{style:{height:n,width:n,verticalAlign:"middle"},src:t,alt:"Token Icon"})}function Ee(e){var t=e.schedule,n=e.title,a=e.token;return Object(me.jsxs)("div",{className:"inner-table_wrapper",children:[Object(me.jsx)("h5",{children:n}),Object(me.jsxs)(Oe.a,{className:"inner-table",size:"small","aria-label":"purchases",children:[Object(me.jsx)(ge.a,{children:Object(me.jsxs)(ke.a,{children:[Object(me.jsx)(we.a,{children:"DATE"}),Object(me.jsx)(we.a,{align:"right",children:"AMOUNT"})]})}),Object(me.jsx)(_e.a,{children:t.map((function(e){return Object(me.jsxs)(ke.a,{children:[Object(me.jsx)(we.a,{component:"th",scope:"row",children:y(e.timestamp)}),Object(me.jsxs)(we.a,{align:"right",children:[C(e.balance,a.decimals),"\xa0",a.symbol,"\xa0",Object(me.jsx)(Te,{url:a.icon||"",size:32})]})]},e.timestamp)}))})]})]})}function De(e){var t,n=Object(j.f)(),a=Object(l.useState)(!1),r=Object(o.a)(a,2),c=r[0],s=r[1],i=e.row,u=e.token,b=e.adminControls,p=e.progressShow;if(!Object(l.useContext)(he).near)return null;var f=null===i||void 0===i||null===(t=i.vesting_schedule)||void 0===t?void 0:t.Schedule,m=n.pathname.split("/")[1],x="".concat(C(i.claimed_balance,u.decimals)),v="".concat(C(i.unclaimed_balance,u.decimals)),O="".concat(C(i.total_balance-i.claimed_balance-i.unclaimed_balance,u.decimals)),g="".concat(C(i.total_balance-i.total_balance,u.decimals));return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(ke.a,{className:c?"expanded exp-row":"exp-row",sx:{"& > *":{borderBottom:"unset"}},children:[Object(me.jsx)(we.a,{children:Object(me.jsx)(d.a,{"aria-label":"expand row",size:"small",onClick:function(){return s(!c)},children:c?Object(me.jsx)(Ne.a,{}):Object(me.jsx)(Ie.a,{})})}),Object(me.jsx)(we.a,{align:"left",children:i.id}),Object(me.jsx)(we.a,{align:"left",children:Object(me.jsx)(h.b,{to:b?"".concat(m,"/admin/lockups/").concat(i.account_id):"".concat(m,"/lockups/").concat(i.account_id),children:i.account_id})}),Object(me.jsx)(we.a,{align:"right",children:y(i.schedule[0].timestamp)}),Object(me.jsx)(we.a,{align:"right",children:y(i.schedule[i.schedule.length-1].timestamp)}),Object(me.jsxs)(we.a,{align:"right",children:[C(i.total_balance,u.decimals),"\xa0",u.symbol,"\xa0",Object(me.jsx)(Te,{url:u.icon||"",size:32})]}),p&&Object(me.jsx)(we.a,{align:"center",children:Object(me.jsx)(ye.a,{title:Object(me.jsxs)("div",{className:"progress-bar__tooltip",children:[Object(me.jsxs)("span",{children:[Object(me.jsx)("i",{className:"claimed",children:"\xa0"}),Object(me.jsx)("b",{children:x})," ","Claimed"]}),Object(me.jsxs)("span",{children:[Object(me.jsx)("i",{className:"available",children:"\xa0"}),Object(me.jsx)("b",{children:v})," ","Available"]}),Object(me.jsxs)("span",{children:[Object(me.jsx)("i",{className:"vested",children:"\xa0"}),Object(me.jsx)("b",{children:O})," ","Vested"]}),Object(me.jsxs)("span",{children:[Object(me.jsx)("i",{className:"unvested",children:"\xa0"}),Object(me.jsx)("b",{children:g})," ","Unvested"]})]}),placement:"top",arrow:!0,children:Object(me.jsxs)("div",{className:"progress-bar",children:[Object(me.jsx)("div",{style:{width:"".concat(i.claimed_balance/i.total_balance*100,"%")},className:"claimed",children:"\xa0"}),Object(me.jsx)("div",{style:{width:"".concat(i.unclaimed_balance/i.total_balance*100,"%")},className:"available",children:"\xa0"}),Object(me.jsx)("div",{style:{width:"".concat((i.total_balance-i.claimed_balance-i.unclaimed_balance)/i.total_balance*100,"%")},className:"vested",children:"\xa0"}),Object(me.jsx)("div",{style:{width:"".concat(100*(i.total_balance-i.total_balance),"%")},className:"unvested",children:"\xa0"})]})})})]}),Object(me.jsx)(ke.a,{sx:{background:"#F4F7FC"},children:Object(me.jsx)(we.a,{style:{padding:0},colSpan:8,children:Object(me.jsx)(Ce.a,{in:c,timeout:"auto",unmountOnExit:!0,children:Object(me.jsx)("div",{className:"lockup-row",children:Object(me.jsxs)("div",{style:{display:"flex",gap:20},children:[Object(me.jsx)(Ee,{schedule:i.schedule,title:"Lockup schedule",token:u}),f&&Object(me.jsx)(Ee,{schedule:f,title:"Vesting schedule",token:u})]})})})})})]})}function Ue(e){var t=e.lockups,n=e.token,a=e.adminControls,r=e.progressShow;return Object(me.jsxs)(Oe.a,{className:"main-table","aria-label":"collapsible table",children:[Object(me.jsx)(ge.a,{className:"table-head",children:t.length>0&&Object(me.jsxs)(ke.a,{children:[Object(me.jsx)(we.a,{}),Object(me.jsx)(we.a,{align:"left",children:"ID"}),Object(me.jsx)(we.a,{align:"left",children:"Account ID"}),Object(me.jsx)(we.a,{align:"right",children:"Start\xa0date"}),Object(me.jsx)(we.a,{align:"right",children:"End\xa0date"}),Object(me.jsx)(we.a,{align:"right",children:"Total\xa0amount"}),r&&Object(me.jsx)(we.a,{align:"center",children:"Progress"})]})}),Object(me.jsx)(_e.a,{children:t.map((function(e){return Object(me.jsx)(De,{row:e,token:n,adminControls:a,progressShow:r},e.id)}))})]})}var Pe=n(179),Fe=n(180),We=n(33),Me=n.n(We);Me.a.prototype.toJSON=function(){return this.toString()};var Le=function(e){var t=e.trim().split("\n");if(t.length<=1)return[];var n=t.map((function(e){return e.split("\t").map((function(e){return e.trim()}))})),a=Object(Fe.a)(n),r=a[0];return a.slice(1).map((function(e){return Object.fromEntries(r.map((function(t,n){return[t,e[n]||""]})))}))},Re=function(e){var t=Object(Pe.a)(/^P(((((\d+)Y)?((\d+)M)?((\d+)D)?)(T((\d+)H)?((\d+)M)?((\d+)S)?)?)|((\d+)W)?)$/,{year:5,month:7,day:9,hour:12,minute:14,second:16,week:18}),n=e.match(t);if(!n)throw new Error("invalid duration");var a=n&&n.groups||{};return{year:parseInt(a.year,10)||0,month:parseInt(a.month,10)||0,week:parseInt(a.week,10)||0,day:parseInt(a.day,10)||0,hour:parseInt(a.hour,10)||0,minute:parseInt(a.minute,10)||0,second:parseInt(a.second,10)||0}},He=function(e){var t=e.split("|");if(4!==t.length)throw new Error("invalid human friendly schedule, expected 4 parts");var n=Object(o.a)(t,4),a=n[0],r=n[1],c=n[2],s=n[3],i=function(e){if(!e.match(/\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\dZ/))throw new Error("invalid timestamp");var t=new Date(e);if(Number.isNaN(t.getTime()))throw new Error("invalid timestamp");return t}(a),l=Re(r),u=function(e){var t=e.split(":");if(2!==t.length)throw new Error("expected 2 parts");var n=Object(o.a)(t,2),a=n[0],r=n[1],c=Re(a),s=parseInt(r,10);if(s<0||s>100)throw new Error("invalid cliff percentage");return{duration:c,percentage:s}}(c),d=Re(s);return{timestampStart:i,durationTotal:l,durationCliff:u.duration,percentageCliff:u.percentage,releaseEvery:d}},Ge=function(e){return{account_id:function(e){var t=!0;if(e.length<2&&(t=!1),e.length>64&&(t=!1),e.match(/^[a-z0-9._-]+$/)||(t=!1),t)return e;throw new Error("invalid near account id")}(e.account_id),amount:function(e){if(e.match(/^[0-9]+(\.[0-9]+)?$/))return e;throw new Error("invalid token amount")}(e.amount),lockup_schedule:He(e.lockup_schedule),vesting_schedule:""===e.vesting_schedule?null:He(e.vesting_schedule)}},Ke=function(e,t,n){var a=Math.floor(n);return new Date(Date.UTC(e.getUTCFullYear()+t.year*a,e.getUTCMonth()+t.month*a,e.getUTCDate()+(7*t.week+t.day)*a,e.getUTCHours()+t.hour*a,e.getUTCMinutes()+t.minute*a,e.getUTCSeconds()+t.second*a))},Be=function(e){return Math.floor(new Date(e).getTime()/1e3)},Ve=function(e,t,n){if(!(n>=0&&n===Math.floor(n)))throw new Error("invalid token decimals");var a=new m.a(10).pow(n),r=e.timestampStart,c=Ke(r,e.durationCliff,1),o=Ke(c,Re("PT1S"),-1),s=Ke(r,e.durationTotal,1),i=new Me.a(new m.a(t).mul(a).round(0,m.a.roundDown).toString()),l=new Me.a(i).muln(e.percentageCliff).divn(100).clone();if(l.gt(i))throw new Error("error: cliffAmount > totalAmount");if(c>s)throw new Error("error: timestampCliff > timestampFinish");if(c<r)throw new Error("error: timestampPreCliff < timestampStart");var u=e.releaseEvery,d=c,b=Ke(c,u,1);if(Be(b)<=Be(d))throw new Error("invalid releaseEvery, zero duration");if(Be(b)-Be(d)===1){var p={timestamp:Be(r),balance:new Me.a("0").toString()},j={timestamp:Be(o),balance:new Me.a("0").toString()},h={timestamp:Be(c),balance:l.toString()},f={timestamp:Be(s),balance:i.toString()},x=[];return x.unshift(f),h.timestamp<f.timestamp&&x.unshift(h),x.unshift(j),p.timestamp<j.timestamp&&x.unshift(p),x}for(var v=[],O=c;;){if(O>=s){O=s,v.push(O);break}if(v.push(O),O=Ke(O,u,1),v.length>=100)throw new Error("too many checkpoints for schedule")}var g=i.sub(l).divn(v.length-1),k=v.flatMap((function(e,t){if(1===v.length)return[{timestamp:Be(s),balance:i.toString()}];if(0===t)return[{timestamp:Be(e),balance:l.toString()}];var n=t===v.length-1?i:l.add(g.muln(t)).toString();return[{timestamp:Be(e)-1,balance:l.add(g.muln(t-1)).toString()},{timestamp:Be(e),balance:n.toString()}]})),w=[],_={timestamp:Be(r),balance:new Me.a("0").toString()},y={timestamp:Be(o),balance:new Me.a("0").toString()};return w.unshift(y),_.timestamp<y.timestamp&&w.unshift(_),w.concat(k)},Je=function(e,t){return Le(e).map((function(e,n){return function(e,t,n){var a=Ge(e),r=null;return a.vesting_schedule&&(r={Schedule:Ve(a.vesting_schedule,a.amount,t)}),{id:n,account_id:a.account_id,schedule:Ve(a.lockup_schedule,a.amount,t),vesting_schedule:r}}(e,t,n)}))};var Ye=function(e){var t=e.token,n=e.adminControls,a=Object(j.f)(),r=Object(l.useContext)(he).near,s=Object(l.useState)([]),d=Object(o.a)(s,2),b=d[0],p=d[1],h=Object(l.useState)(!1),f=Object(o.a)(h,2),m=f[0],x=f[1],v=Object(j.g)(),O=Object(u.b)().enqueueSnackbar,g=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n();case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),O("".concat(t," failed with error: '").concat(e.t0,"'"),{variant:"error"}),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(i.a.mark((function e(){var t,n,o,s,l,u,d,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}throw new Error("near is null");case 2:return x(!0),e.next=5,g("Create draft group",Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.api.createDraftGroup();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))));case 5:t=e.sent,n="Created draft group id: ".concat(t),O(n,{variant:"success"}),o=100,s=i.a.mark((function e(n){var a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.slice(n,n+o),s=a.map((function(e){return{draft_group_id:t,lockup_create:e}})),e.next=4,g("Create drafts",Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.api.createDrafts(s);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e)})),l=0;case 11:if(!(l<b.length)){e.next=16;break}return e.delegateYield(s(l),"t0",13);case 13:l+=o,e.next=11;break;case 16:u="Created ".concat(b.length," draft").concat(b.length>1?"s":"","."),O(u,{variant:"success"}),d=a.pathname.split("/")[1],p="/".concat(d,"/admin/draft_groups/").concat(t),v(p);case 21:case"end":return e.stop()}}),e)}))(),"t0",2);case 2:e.next=7;break;case 4:e.prev=4,e.t1=e.catch(0),x(!1);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(){return e.apply(this,arguments)}}();return Object(me.jsx)("div",{className:"main",children:Object(me.jsxs)("div",{className:"container",children:[Object(me.jsx)("h2",{children:"Import Draft Group"}),Object(me.jsxs)("div",{className:"import-draft-group-wrapper",children:[Object(me.jsxs)("p",{children:["Copy lockups from a spreadsheet editor and paste into the area below. See"," ",Object(me.jsx)("a",{href:"".concat("","/lockup_import_example.xlsx"),children:"example and format specifications"}),"."]}),Object(me.jsx)(ve.a,{className:"import-draft-group-textarea",id:"spreadsheet-input",placeholder:"Excel input",maxRows:5,onChange:function(e){try{var n;if(null===r||void 0===r||null===(n=r.currentUser)||void 0===n||!n.signedAccountId)throw new Error("expected present signedAccountId");console.log(t);var a=e.target.value,c=Je(a,t.decimals);p(c)}catch(o){o instanceof Error&&console.log(o)}}})]}),Object(me.jsx)(Ue,{lockups:b,token:t,adminControls:n,progressShow:!1}),Object(me.jsx)("button",{disabled:!(b.length>=1&&!m),onClick:k,type:"button",className:"button",children:"Import"})]})})},qe=n(364),ze=n(363);function $e(e){var t=e.token,n=e.amount;return Object(me.jsxs)("div",{className:"token-info",children:[Object(me.jsxs)("div",{className:"token-amount",children:[n," ",t.symbol]}),Object(me.jsx)(Te,{url:t.icon||"",size:32})]})}var Ze=function(e){var t=Object(l.useContext)(he).near,n=e.draftGroupIndex,a=e.amount;if(!t)throw Error("Cannot access lockup api");if(void 0===n)throw Error("Cannot fund draft group without index");if(void 0===a)throw Error("Cannot fund draft group without specified amount");return Object(me.jsx)("button",{className:"button",type:"button",onClick:function(){t.tokenApi.fundDraftGroup(t.api.getContract().contractId,n,a)},children:"Fund"})},Qe=n(356),Xe=n(357),et=n(383),tt=n(384),nt=n(66),at=n.n(nt),rt=n(362),ct=n(367),ot=n(366),st=n(368);var it=function(e){var t=e.selectedAddress,n=e.setSelectedAddress,a=Object(l.useContext)(he).near;if(!a)throw Error("Cannot access lockup api");var r=a.currentUser.daos;r.length>0&&(""===t||!r.includes(t))&&n(r[0]);var c=function(e){n(e.target.value)};return r.length>0?Object(me.jsxs)("div",{children:[Object(me.jsx)(ct.a,{children:"Select DAO contract address"}),Object(me.jsx)(rt.a,{required:!0,sx:{marginBottom:3,width:1},value:t,onChange:c,children:r.map((function(e){return Object(me.jsx)(ot.a,{value:e,children:e})}))})]}):Object(me.jsx)(st.a,{required:!0,sx:{marginBottom:3,width:1},id:"outlined-helperText",label:"DAO contract address",onChange:c})};var lt=function(e){var t=e.proposalDescription,n=e.setProposalDescription;return Object(me.jsx)(st.a,{sx:{width:1},id:"outlined-multiline-static",label:"Proposal description",multiline:!0,minRows:5,onChange:function(e){n(e.target.value)},defaultValue:t})};var ut=function(e){var t=Object(l.useContext)(he).near,n=e.draftGroupIndex,a=e.amount,r="Fund draft group ".concat(n," with amount ").concat(null===a||void 0===a?void 0:a.label,". Draft group link: ").concat(window.location.href),c=Object(l.useState)(r),s=Object(o.a)(c,2),i=s[0],u=s[1],b=Object(l.useState)(""),p=Object(o.a)(b,2),j=p[0],h=p[1],f=Object(l.useState)(!1),m=Object(o.a)(f,2),x=m[0],v=m[1],O=function(){return v(!1)};if(!t)throw Error("Cannot access lockup api");if(void 0===n)throw Error("Cannot fund draft group without index");if(void 0===(null===a||void 0===a?void 0:a.value))throw Error("Cannot fund draft group without specified amount");return console.log("AMOUNT",a),Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)("button",{className:"button",type:"button",onClick:function(){return v(!0)},children:"Fund with DAO"}),Object(me.jsx)(Qe.a,{open:x,sx:{padding:1,minWidth:1},onClose:O,children:Object(me.jsxs)("form",{className:"form-submit",onSubmit:function(){var e,r=pe(i,t.api.getContract().contractId,t.tokenApi.getContract().contractId,a.value,n,j);null===(e=window.open(r,"_blank"))||void 0===e||e.focus()},children:[Object(me.jsxs)(Xe.a,{children:["Fund with DAO",Object(me.jsx)(d.a,{"aria-label":"close",onClick:O,sx:{position:"absolute",right:8,top:8},children:Object(me.jsx)(at.a,{})})]}),Object(me.jsxs)(et.a,{style:{minWidth:"320px",paddingTop:"1.25em"},children:[Object(me.jsx)(it,{selectedAddress:j,setSelectedAddress:h}),Object(me.jsx)(lt,{proposalDescription:i,setProposalDescription:u})]}),Object(me.jsx)(tt.a,{sx:{padding:"14px 24px 24px"},children:Object(me.jsx)("button",{className:"button fullWidth noMargin",type:"submit",children:"Fund"})})]})})]})};function dt(e){var t=e.token,n=e.adminControls,a=Object(j.f)(),r=Object(u.b)().enqueueSnackbar,s=parseInt(Object(j.h)().draftGroupId||"",10),d=Object(l.useContext)(he).near,b=Object(l.useState)(null),p=Object(o.a)(b,2),h=p[0],f=p[1],m=Object(l.useState)([]),x=Object(o.a)(m,2),v=x[0],O=x[1],g=Object(l.useState)(!1),k=Object(o.a)(g,2),w=k[0],_=k[1];console.log(t),console.log(h),console.log(f),Object(l.useEffect)((function(){var e=function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f(null),console.log("fetchDraftGroup called"),d){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,d.api.getDraftGroup(s);case 6:t=e.sent,console.log(t),f(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[d,s]),Object(l.useEffect)((function(){var e=function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O([]),console.log("fetchDrafts called"),d){e.next=4;break}return e.abrupt("return");case 4:if(h){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,d.api.getDrafts(h.draft_indices);case 8:t=e.sent,console.log(t),O(t.map((function(e){return Object.assign(e[1].lockup_create,{id:e[0]})})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[d,h]);var y=Object(j.g)(),S=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n();case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),r("".concat(t," failed with error: '").concat(e.t0,"'"),{variant:"error"}),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}();if(!h)return null;var N={value:h.total_amount,label:C(h.total_amount,t.decimals)||""};return Object(me.jsxs)("div",{className:"container",children:[Object(me.jsxs)("div",{className:"draft-group-preview-wrapper",children:[Object(me.jsxs)("div",{className:"draft-group-preview-info",style:{display:"flex"},children:[Object(me.jsx)("h5",{children:"Draft group ".concat(s)}),Object(me.jsx)($e,{token:t,amount:N.label})]}),!h.funded&&Object(me.jsxs)("div",{className:"draft-group-fund-button-wrapper",children:[n&&Object(me.jsx)(Ze,{draftGroupIndex:s,amount:N.value}),Object(me.jsx)(ut,{draftGroupIndex:s,amount:N})]}),h.funded&&h.draft_indices.length>0&&Object(me.jsx)(ze.a,{className:"button fullWidth",type:"button",onClick:function(){var e=function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,o,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}throw new Error("near is null");case 2:e.prev=2,_(!0),t=h.draft_indices,n=100,o=i.a.mark((function e(a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.slice(a,a+n),e.next=3,S("Convert drafts",Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.api.convertDrafts(r);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)})),l=0;case 8:if(!(l<t.length)){e.next=13;break}return e.delegateYield(o(l),"t0",10);case 10:l+=n,e.next=8;break;case 13:r("Converted drafts for draft group ".concat(s),{variant:"success"}),u=a.pathname.split("/")[1],y("/".concat(u,"/admin/lockups")),window.location.reload(),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(2),console.log("ERROR: ".concat(e.t1));case 22:return e.prev=22,_(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[2,19,22,25]])})));return function(){return e.apply(this,arguments)}}();e()},loading:w,variant:"contained",color:"success",children:"Convert"}),h.funded&&0===h.draft_indices.length&&Object(me.jsx)("div",{style:{marginTop:20},children:Object(me.jsx)(qe.a,{severity:"success",children:"Draft Group converted"})})]}),(!h.funded||h.draft_indices.length>0)&&Object(me.jsx)(Ue,{lockups:v,token:t,adminControls:n,progressShow:!0})]})}function bt(e){var t=e.token,n=e.adminControls,a=Object(j.f)();console.log(a);var r=Object(l.useContext)(he).near,s=Object(l.useState)([]),u=Object(o.a)(s,2),d=u[0],b=u[1];Object(l.useEffect)((function(){var e=function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b([]),console.log("fetchDraftGroup called"),r){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,r.api.getDraftGroupsAll();case 6:t=e.sent,console.log(t),b(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[r]);var p=a.pathname.split("/")[1],f="/".concat(p,"/admin/import_draft_group");return Object(me.jsx)("div",{className:"main",children:Object(me.jsxs)("div",{className:"container",children:[Object(me.jsx)("h1",{children:"All draft groups"}),Object(me.jsxs)(Oe.a,{className:"main-table","aria-label":"collapsible table",children:[Object(me.jsx)(ge.a,{className:"table-head",children:Object(me.jsxs)(ke.a,{children:[Object(me.jsx)(we.a,{align:"center",children:"ID"}),Object(me.jsx)(we.a,{align:"center",children:"Funded"}),Object(me.jsx)(we.a,{align:"center",children:"Number\xa0of\xa0lockups"}),Object(me.jsx)(we.a,{align:"right",children:"Total\xa0amount"})]})}),Object(me.jsx)(_e.a,{children:d.map((function(e){return Object(me.jsxs)(ke.a,{children:[Object(me.jsx)(we.a,{align:"center",children:Object(me.jsx)(h.b,{to:"/".concat(p,"/").concat(n?"admin/":"","draft_groups/").concat(e.id),children:e.id})}),Object(me.jsx)(we.a,{align:"center",children:e.funded?"Yes":"No"}),Object(me.jsx)(we.a,{align:"center",children:e.draft_indices.length}),Object(me.jsxs)(we.a,{align:"right",children:[C(e.total_amount,t.decimals),"\xa0",t.symbol,"\xa0",Object(me.jsx)(Te,{url:t.icon||"",size:32})]})]})}))})]}),Object(me.jsx)(h.b,{to:f,children:Object(me.jsx)("button",{className:"button",type:"button",children:"Import Draft Group"})})]})})}var pt=n(385);function jt(){var e=Object(u.b)().enqueueSnackbar,t=Object(l.useContext)(he),n=t.near,a=t.signIn;return n?Object(me.jsxs)("div",{children:[Object(me.jsx)("div",{className:"header",children:Object(me.jsx)("div",{className:"container",children:Object(me.jsxs)(pt.a,{sx:{display:"flex"},children:[Object(me.jsx)(h.b,{className:"logo",to:"/",children:"LOCKUPS"}),Object(me.jsx)("div",{className:"nav",children:Object(me.jsx)(h.b,{className:"nav-link",to:"/",children:"Home"})})]})})}),Object(me.jsxs)("div",{className:"container new-lockup-contract",children:[Object(me.jsx)("h2",{children:"Create Lockup Contract for your Fungible Tokens"}),Object(me.jsx)("form",{className:"form-submit",onSubmit:function(t){t.preventDefault();var a=function(){var a=Object(c.a)(i.a.mark((function a(){var r,c,o,s,l;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,null!==n&&void 0!==n&&null!==(r=n.currentUser)&&void 0!==r&&r.signedAccountId){a.next=3;break}throw new Error("expected signedAccountId to be present");case 3:if(c=t.target.elements.lockup_operators.value.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})),o=t.target.elements.token_account_id.value,s=t.target.elements.lockup_subaccount_id.value,0!==c.length){a.next=8;break}throw new Error("empty lockup operators");case 8:if(0!==o.length){a.next=10;break}throw new Error("empty tokenAccountId");case 10:if(0!==s.length){a.next=12;break}throw new Error("empty lockupSubaccountId");case 12:return a.next=14,n.factoryApi.create(s,o,c,"".concat(window.location.origin+window.location.pathname,"#/").concat(s,".").concat(v,"/admin/lockups"));case 14:return l=a.sent,console.log(l),a.abrupt("return",l);case 19:return a.prev=19,a.t0=a.catch(0),console.log(a.t0),e(a.t0.toString(),{variant:"error"}),a.abrupt("return",null);case 24:case"end":return a.stop()}}),a,null,[[0,19]])})));return function(){return a.apply(this,arguments)}}();a()},children:Object(me.jsxs)("div",{className:"form-wrapper",children:[Object(me.jsx)("p",{children:"On this page you can deploy your own copy of lockup contract. Some more elaborative description follows here."}),Object(me.jsxs)("div",{className:"form-row",children:[Object(me.jsx)("span",{children:"Contract creator: "}),Object(me.jsxs)("div",{className:"form-cell",children:[n.currentUser.signedAccountId&&Object(me.jsx)("strong",{children:n.currentUser.signedAccountId}),Object(me.jsx)("button",{className:"button",type:"button",onClick:a,children:n.currentUser.signedAccountId?"Login as someone else":"Login"})]})]}),Object(me.jsxs)("div",{className:"form-row",children:[Object(me.jsx)("span",{children:"Lockup operators: "}),Object(me.jsx)("input",{type:"text",id:"lockup_operators"})]}),Object(me.jsxs)("div",{className:"form-row",children:[Object(me.jsx)("span",{children:"Fungible token contract address: "}),Object(me.jsx)("input",{type:"text",id:"token_account_id"})]}),Object(me.jsxs)("div",{className:"form-row",children:[Object(me.jsx)("span",{children:"New Lockup Contract Address: "}),Object(me.jsx)("input",{type:"text",id:"lockup_subaccount_id"})]}),Object(me.jsx)("button",{className:"button submit",type:"submit",disabled:!n.currentUser.signedAccountId,children:"Deploy Contract"})]})})]})]}):null}var ht=n(24),ft=n(387),mt=n(185);n(291);function xt(e){var t=e.data,n={title:{text:""},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{bottom:"3%",selectedMode:!1,icon:"circle"},grid:{top:"15%",left:"2%",right:"3%",bottom:"15%",containLabel:!0},xAxis:[{type:"time",boundaryGap:["1%","1%"],splitNumber:15}],yAxis:[{type:"value"}],series:[{name:"Vested",type:"line",color:"#0069D1",areaStyle:{opacity:1},markLine:{data:[[{xAxis:new Date,yAxis:0},{xAxis:new Date,yAxis:"max"}]],lineStyle:{type:"dashed",color:"#FF594E"},symbol:"none"},data:t.vested},{name:"Unlocked",type:"line",color:"#00B988",areaStyle:{opacity:1},data:t.unlocked}]};return Object(me.jsx)(mt.a,{option:n})}var vt=n(386),Ot=n(382),gt=n(359),kt=n(181),wt=n(360);function _t(e){var t=e.token,n=Object(l.useContext)(he).near,a=Object(l.useState)(!1),s=Object(o.a)(a,2),u=s[0],b=s[1],p=Object(l.useState)(null),j=Object(o.a)(p,2),h=j[0],f=j[1],x=Object(l.useState)("4_year"),v=Object(o.a)(x,2),O=v[0],g=v[1],k=function(){return b(!1)},w=function(){var e=Object(c.a)(i.a.mark((function e(a){var r,c,s,l,u,d,b,p,j,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw Error("Cannot access token api");case 2:if(n.currentUser.signedAccountId){e.next=4;break}throw new Error("signedAccountId requred to set lockup terminator");case 4:if(h){e.next=6;break}throw Error("Start date not set");case 6:a.preventDefault(),r=a.target.elements,c=r.account,s=r.amount,console.log(c.value,s.value),l=(null===n||void 0===n?void 0:n.api.getContract().contractId)||"",u=c.value,d=new m.a(s.value).mul(new m.a(10).pow(t.decimals)).round(0,m.a.roundDown).toString(),b=function(e,t,n){var a=new Me.a(t),r={"4y_cliff_1y_25":[{timestamp:S(e,0),balance:"0"},{timestamp:S(e,1)-1,balance:"0"},{timestamp:S(e,1),balance:a.divn(4).toString()},{timestamp:S(e,4),balance:a.toString()}]};return{"4_year":[r["4y_cliff_1y_25"],null],"4_year_vested":[r["4y_cliff_1y_25"],r["4y_cliff_1y_25"]]}[n]}(h,d,O),p=Object(o.a)(b,2),j=p[0],f=p[1],n.tokenApi.createLockup(l,d.toString(),u,j,f);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)("button",{className:"button",type:"button",onClick:function(){return b(!0)},children:"Create Lockup"}),Object(me.jsx)(Qe.a,{open:u,sx:{padding:2},maxWidth:"xs",onClose:k,children:Object(me.jsxs)("form",{className:"form-submit",onSubmit:w,children:[Object(me.jsxs)(Xe.a,{children:["Create Lockup",Object(me.jsx)(d.a,{"aria-label":"close",onClick:k,sx:{position:"absolute",right:8,top:8},children:Object(me.jsx)(at.a,{})})]}),Object(me.jsxs)(et.a,{sx:{maxWidth:"320px"},children:[Object(me.jsx)(st.a,{margin:"normal",id:"account",label:"Account Id",type:"text",fullWidth:!0,variant:"standard"}),Object(me.jsx)(st.a,{margin:"normal",id:"amount",label:"Amount",type:"number",variant:"standard",InputProps:{endAdornment:Object(me.jsx)(vt.a,{position:"end",children:t.symbol})},fullWidth:!0}),Object(me.jsx)("br",{}),Object(me.jsx)(Ot.a,{fullWidth:!0,sx:{marginTop:"20px"},children:Object(me.jsxs)(rt.a,{id:"schedule-select",value:O,label:"Schedule",onChange:function(e){g(e.target.value)},variant:"standard",fullWidth:!0,children:[Object(me.jsx)(ot.a,{value:"4_year",children:"4 year lockup with 25% cliff in 1 year"}),Object(me.jsx)(ot.a,{value:"4_year_vested",children:"4 year lockup with 25% cliff in 1 year (VESTED)"})]})}),Object(me.jsx)(kt.a,{dateAdapter:gt.a,children:Object(me.jsx)(wt.a,{label:"Start date",value:h,onChange:function(e){f(e)},renderInput:function(e){return Object(me.jsx)(st.a,Object(r.a)({margin:"normal",fullWidth:!0,variant:"standard"},e))}})})]}),Object(me.jsx)(tt.a,{sx:{padding:"14px 24px 24px"},children:Object(me.jsx)("button",{disabled:!h,className:"button fullWidth noMargin",type:"submit",children:"Create"})})]})})]})}var yt=function(e){var t=e.currentState,n=e.handlers,a=e.dialog;return Object(me.jsx)(Qe.a,{open:t.value,sx:{padding:2},maxWidth:"xs",onClose:n.onClose,children:Object(me.jsxs)("form",{className:"form-submit",children:[Object(me.jsxs)(Xe.a,{children:["Terminate Lockup",Object(me.jsx)(d.a,{"aria-label":"close",onClick:n.onClose,sx:{position:"absolute",right:8,top:8},children:Object(me.jsx)(at.a,{})})]}),Object(me.jsxs)(et.a,{sx:{maxWidth:"320px"},children:[Object(me.jsxs)(kt.a,{dateAdapter:gt.a,children:[a.datePicker&&Object(me.jsx)(wt.a,{label:"Custom termination date",minDate:new Date,value:a.datePicker.currentState.value,onChange:function(e){a.datePicker.currentState.setValue(e)},renderInput:function(e){return Object(me.jsx)(st.a,Object(r.a)({sx:{margin:"0px 0 24px"},margin:"normal",fullWidth:!0,variant:"standard"},e))}}),(null===a||void 0===a?void 0:a.daoSelector)&&Object(me.jsx)(it,{selectedAddress:a.daoSelector.currentState.value,setSelectedAddress:a.daoSelector.currentState.setValue}),(null===a||void 0===a?void 0:a.daoProposalDescription)&&Object(me.jsx)(lt,{proposalDescription:a.daoProposalDescription.currentState.value,setProposalDescription:a.daoProposalDescription.currentState.setValue})]}),Object(me.jsx)("span",{style:{minHeight:"40px"}}),Object(me.jsx)("button",{className:"button red fullWidth",style:{marginTop:"40px"},type:"button",onClick:n.onSubmit,children:"Terminate"})]})]})})};var Ct=function(e){var t=Object(l.useContext)(he).near,n=e.adminControls,a=e.lockupIndex,s=e.config,d=e.token,b=e.buttonText,p=Object(u.b)().enqueueSnackbar,j=Object(l.useState)(null),h=Object(o.a)(j,2),f=h[0],x=h[1],v=Object(l.useState)(!1),O=Object(o.a)(v,2),g=O[0],k=O[1];if(!t)throw Error("Cannot access lockup api");if(void 0===a)throw Error("Cannot terminate lockup without lockupIndex");var w=function(){var e=Object(c.a)(i.a.mark((function e(){var n,r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}return e.abrupt("return");case 2:return n=f?f.getTime()/1e3:null,e.next=5,t.api.terminate(a,n);case 5:r=e.sent,c=new m.a(r).div(new m.a(10).pow(d.decimals)).round(2,m.a.roundDown),console.log(c),o="Terminated lockup #".concat(a,", refunded ").concat(c," ").concat(d.symbol),p(o,{variant:"success"}),setTimeout((function(){return window.location.reload()}),1e3);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=n&&s,y={currentState:{value:g,setValue:k},handlers:{onClose:function(){return k(!1)},onSubmit:w},dialog:{datePicker:{currentState:{value:f,setValue:x}}}};return Object(me.jsxs)(me.Fragment,{children:[_&&Object(me.jsx)("button",{className:"button",type:"button",onClick:function(){return k(!0)},children:b}),g&&Object(me.jsx)(yt,Object(r.a)({},y))]})};var St=function(e){var t=Object(l.useContext)(he).near,n=e.adminControls,a=e.lockupIndex,c=e.config,s=e.buttonText,i=Object(l.useState)(null),u=Object(o.a)(i,2),d=u[0],b=u[1],p=Object(l.useState)(!1),j=Object(o.a)(p,2),h=j[0],f=j[1],m="Terminate lockup ".concat(a,". Lockup link: ").concat(window.location.href),x=Object(l.useState)(m),v=Object(o.a)(x,2),O=v[0],g=v[1],k=Object(l.useState)((null===c||void 0===c?void 0:c.beneficiary_id)||""),w=Object(o.a)(k,2),_=w[0],y=w[1];if(!t)throw Error("Cannot access lockup api");if(void 0===a)throw Error("Cannot terminate lockup without lockupIndex");var C=n&&c,S={currentState:{value:h,setValue:f},handlers:{onClose:function(){return f(!1)},onSubmit:function(){var e,n=je(O,t.api.getContract().contractId,a,d?d.getTime()/1e3:null,_);null===(e=window.open(n,"_blank"))||void 0===e||e.focus()}},dialog:{datePicker:{currentState:{value:d,setValue:b}},daoSelector:{currentState:{value:_,setValue:y}},daoProposalDescription:{currentState:{value:O,setValue:g}}}};return Object(me.jsxs)("div",{children:[Object(me.jsx)("button",{className:"button",disabled:!C,type:"button",onClick:function(){return f(!0)},style:{marginTop:0},children:s}),h&&Object(me.jsx)(yt,Object(r.a)({},S))]})};function Nt(e){var t,n,a,r,c=Object(l.useState)(!1),s=Object(o.a)(c,2),i=s[0],u=s[1],b=e.adminControls,p=e.row,j=e.token,f=Object(l.useContext)(he).near;if(!f)return null;var m,x,v=null===p||void 0===p||null===(t=p.termination_config)||void 0===t||null===(n=t.vesting_schedule)||void 0===n?void 0:n.Schedule,O=window.location.href.split("/").pop()===p.account_id,g="".concat(C(p.claimed_balance,j.decimals)),k="".concat(C(p.unclaimed_balance,j.decimals)),w="".concat(C(p.total_balance-p.claimed_balance-p.unclaimed_balance,j.decimals)),_="".concat(C(p.total_balance-p.total_balance,j.decimals));null!==(a=p.termination_config)&&void 0!==a&&a.beneficiary_id?m="Unvested amount will return to ".concat(null===(x=p.termination_config)||void 0===x?void 0:x.beneficiary_id):m="This lockup cannot be terminated";var S,N,A,I=null===p||void 0===p||null===(r=p.termination_config)||void 0===r?void 0:r.beneficiary_id;return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(ke.a,{className:i?"expanded exp-row":"exp-row",sx:{"& > *":{borderBottom:"unset"}},children:[Object(me.jsx)(we.a,{children:Object(me.jsx)(d.a,{"aria-label":"expand row",size:"small",onClick:function(){return u(!i)},children:i?Object(me.jsx)(Ne.a,{}):Object(me.jsx)(Ie.a,{})})}),Object(me.jsx)(we.a,{align:"left",children:p.id}),Object(me.jsx)(we.a,{align:"left",children:Object(me.jsx)(h.b,{to:"".concat(O?"":p.account_id),children:p.account_id})}),Object(me.jsx)(we.a,{align:"right",children:y(p.schedule[0].timestamp)}),Object(me.jsx)(we.a,{align:"right",children:y(p.schedule[p.schedule.length-1].timestamp)}),Object(me.jsx)(we.a,{align:"center",children:v?"Yes":"No"}),Object(me.jsxs)(we.a,{align:"right",children:[C(p.total_balance,j.decimals),"\xa0",j.symbol,"\xa0",Object(me.jsx)(Te,{url:j.icon||"",size:32})]}),Object(me.jsx)(we.a,{align:"center",children:Object(me.jsx)(ye.a,{title:Object(me.jsxs)("div",{className:"progress-bar__tooltip",children:[Object(me.jsxs)("span",{children:[Object(me.jsx)("i",{className:"claimed",children:"\xa0"}),Object(me.jsx)("b",{children:g})," ","Claimed"]}),Object(me.jsxs)("span",{children:[Object(me.jsx)("i",{className:"available",children:"\xa0"}),Object(me.jsx)("b",{children:k})," ","Available"]}),Object(me.jsxs)("span",{children:[Object(me.jsx)("i",{className:"vested",children:"\xa0"}),Object(me.jsx)("b",{children:w})," ","Vested"]}),Object(me.jsxs)("span",{children:[Object(me.jsx)("i",{className:"unvested",children:"\xa0"}),Object(me.jsx)("b",{children:_})," ","Unvested"]})]}),placement:"top",arrow:!0,children:Object(me.jsxs)("div",{className:"progress-bar",children:[Object(me.jsx)("div",{style:{width:"".concat(p.claimed_balance/p.total_balance*100,"%")},className:"claimed",children:"\xa0"}),Object(me.jsx)("div",{style:{width:"".concat(p.unclaimed_balance/p.total_balance*100,"%")},className:"available",children:"\xa0"}),Object(me.jsx)("div",{style:{width:"".concat((p.total_balance-p.claimed_balance-p.unclaimed_balance)/p.total_balance*100,"%")},className:"vested",children:"\xa0"}),Object(me.jsx)("div",{style:{width:"".concat(100*(p.total_balance-p.total_balance),"%")},className:"unvested",children:"\xa0"})]})})})]}),Object(me.jsx)(ke.a,{sx:{background:"#F4F7FC"},children:Object(me.jsx)(we.a,{style:{padding:0},colSpan:8,children:Object(me.jsx)(Ce.a,{in:i,timeout:"auto",unmountOnExit:!0,children:Object(me.jsx)("div",{className:"lockup-row",children:Object(me.jsxs)("div",{style:{display:"flex",gap:20},children:[Object(me.jsx)(Ee,{schedule:p.schedule,title:"Lockup schedule",token:j}),v&&Object(me.jsx)(Ee,{schedule:v,title:"Vesting schedule",token:j}),Object(me.jsxs)("div",{className:"terminate",children:[Object(me.jsx)("span",{className:"fine-print",children:m}),(S=I,N=f.currentUser.signedAccountId,A=f.currentUser.daos,N&&S===N?Object(me.jsx)(Ct,{token:j,adminControls:b,lockupIndex:p.id,config:p.termination_config,buttonText:S?"Terminate":"No termination config"}):A.includes(S)?Object(me.jsx)(St,{token:j,adminControls:b,lockupIndex:p.id,config:p.termination_config,buttonText:S?"Terminate with Dao":"No termination config"}):null)]})]})})})})})]})}function At(e){var t=e.lockups,n=e.token,a=e.adminControls;return Object(me.jsxs)(Oe.a,{className:"main-table","aria-label":"collapsible table",children:[Object(me.jsx)(ge.a,{className:"table-head",children:Object(me.jsxs)(ke.a,{children:[Object(me.jsx)(we.a,{}),Object(me.jsx)(we.a,{align:"left",children:"ID"}),Object(me.jsx)(we.a,{align:"left",children:"Account ID"}),Object(me.jsx)(we.a,{align:"right",children:"Start\xa0date"}),Object(me.jsx)(we.a,{align:"right",children:"End\xa0date"}),Object(me.jsx)(we.a,{align:"center",children:"Terminatable"}),Object(me.jsx)(we.a,{align:"right",children:"Total\xa0amount"}),Object(me.jsx)(we.a,{align:"center",children:"Progress"})]})}),Object(me.jsx)(_e.a,{children:t.map((function(e){return Object(me.jsx)(Nt,{row:e,token:n,adminControls:a},e.id)}))})]})}function It(e){var t=e.tokenContractId,n=e.favouriteAccounts,a=e.uniqueUsers,r=e.onSave;console.log("unique users",a);var c=Object(l.useRef)(null),o=function(e){return e.replaceAll(" ","").split(",")},s=function(){var e,n=function(e){return JSON.stringify({favouriteAccounts:e})};if(null===c||void 0===c||null===(e=c.current)||void 0===e||!e.value)return localStorage.setItem(t,n([])),void r([]);var a=o(c.current.value);r(a),localStorage.setItem(t,n(a))};return Object(me.jsx)("div",{style:{display:"flex",marginBottom:"2em"},children:Object(me.jsx)(st.a,{inputProps:{sx:{margin:0}},size:"small",sx:{width:1,padding:0,margin:0},id:"outlined-helperText",label:"My accounts",placeholder:"Comma separated list of your near accounts",defaultValue:n.join(", "),inputRef:c,onKeyPress:function(e){return"Enter"===e.key&&s()},onChange:function(e){var t=e.target.value,a=o(t).filter((function(e){return e.match(/.*(\.)(near|testnet)$/)}));n.toString()!==a.toString()&&s()}})})}var Tt=function(e,t,n){return{timestamp:n,balance:function(e,t,n,a,r){if(n<=e)throw new Error("invalid range");if(r<e||r>=n)throw new Error("xM out of bound");return t+(a-t)*(r-e)/(n-e)}(e.timestamp,parseFloat(e.balance),t.timestamp,parseFloat(t.balance),n).toString()}},Et=function(e,t){if(0===e.length)throw new Error("empty schedule");if(t<e[0].timestamp)return{timestamp:t,balance:e[0].balance};if(t>=e[e.length-1].timestamp)return{timestamp:t,balance:e[e.length-1].balance};for(var n=0;n<e.length-1;n++)if(!(e[n+1].timestamp<=t))return Tt(e[n],e[n+1],t);throw new Error("unreachable")},Dt=function(e){if(0===e.length)throw new Error("schedules is empty");var t=Array.from(new Set(e.flat().map((function(e){return e.timestamp})).sort((function(e,t){return e-t})))),n=[];return t.forEach((function(t){for(var a=new f.Big(0),r=0;r<e.length;r++){var c=new f.Big(Et(e[r],t).balance);a=a.plus(c)}n.push({timestamp:t,balance:a.toString()})})),n};function Ut(e){var t,n=e.lockups,a=e.token,r=e.adminControls,c=Array.from(new Set(n.map((function(e){return e.account_id})))),s=Object(l.useContext)(he).near,i=s.currentUser,u=i.signedIn,d=i.isAdmin,b=localStorage.getItem(a.contractId),p=b?null===(t=JSON.parse(b))||void 0===t?void 0:t.favouriteAccounts:[],j=Object(l.useState)(p),f=Object(o.a)(j,2),m=f[0],x=f[1],v=n.filter((function(e){return m.includes(e.account_id)})),O=function(e){var t,n=Array.from(e.map((function(e){return e.schedule}))),r=Math.round((new Date).getTime()/1e3),c=e.map((function(e){return e.schedule[0].timestamp})),o=e.map((function(e){var t,n;return null===e||void 0===e||null===(t=e.termination_config)||void 0===t||null===(n=t.vesting_schedule[0])||void 0===n?void 0:n.timestamp})).filter((function(e){return e})),s=Math.min.apply(Math,Object(ht.a)(c).concat(Object(ht.a)(o),[r])),i=Array.from(e.map((function(e){var t,n,a,r,c=null===e||void 0===e||null===(t=e.termination_config)||void 0===t||null===(n=t.vesting_schedule)||void 0===n?void 0:n.Schedule;return c||(c||(a=s,r=e.schedule[e.schedule.length-1].balance,[{timestamp:a-1,balance:"0"},{timestamp:a,balance:r}]))}))),l=Dt(i),u=Dt(n);(null===(t=l[l.length-1])||void 0===t?void 0:t.timestamp)!==u[u.length-1].timestamp&&l.push(u[u.length-1]);var d=function(e,t){return e.map((function(e){return[1e3*e.timestamp,C(e.balance,t)]}))};return{unlocked:e.length?d(u,a.decimals):[],vested:e.length?d(l,a.decimals):[]}},g=function(e){return e.length>0?Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(xt,{data:O(e)}),u&&r&&d&&Object(me.jsx)(_t,{token:a}),Object(me.jsx)(ft.a,{sx:{boxShadow:"unset",margin:"0 0 20px"},children:Object(me.jsx)(At,{lockups:e,token:a,adminControls:r})})]}):Object(me.jsxs)("div",{children:["There are no lockups yet.",r&&Object(me.jsxs)("div",{children:["Create single lockup or create batch of them via"," ",Object(me.jsx)(h.b,{to:"/".concat(s.lockupContractId,"/admin/import_draft_group"),children:"Draft Groups"}),"."]})]})};return console.log("favouriteAccountsLockups",v),r?Object(me.jsx)("div",{className:"main",children:Object(me.jsx)("div",{className:"container",children:g(n)})}):Object(me.jsx)("div",{className:"main",children:Object(me.jsxs)("div",{className:"container",children:[Object(me.jsx)(It,{tokenContractId:a.contractId,favouriteAccounts:m,uniqueUsers:c,onSave:x}),g(v)]})})}var Pt=n(371);function Ft(e){var t=e.message,n=e.isOpen,a=e.closeFn,r=e.callback;return Object(me.jsxs)(Qe.a,{open:n,sx:{padding:2},maxWidth:"md",onClose:a,children:[Object(me.jsxs)(Xe.a,{children:["Confirmation",Object(me.jsx)(d.a,{"aria-label":"close",sx:{position:"absolute",right:8,top:8},onClick:a,children:Object(me.jsx)(at.a,{})})]}),Object(me.jsx)(et.a,{sx:{minWidth:"320px"},children:Object(me.jsx)("div",{children:t})}),Object(me.jsxs)(tt.a,{children:[Object(me.jsx)(Pt.a,{color:"error",onClick:a,children:"Cancel"}),Object(me.jsx)(Pt.a,{color:"success",variant:"contained",onClick:function(){a(),r()},children:"Confirm"})]})]})}var Wt=function(e){var t=Object(l.useContext)(he).near,n=e.accountId,a=e.token,r=e.total,s=Object(l.useState)(!1),u=Object(o.a)(s,2),d=u[0],b=u[1],p=Object(l.useState)((function(){return null})),j=Object(o.a)(p,2),h=j[0],f=j[1];if(!t)throw Error("Cannot access lockup api");if(!n)throw Error("Undefined account cannot claim");var m="\n    Your account doesn't have storage deposit on the token contract. You will be redirected to pay for the storage, after that you will be able to claim your tokens.\n  ".trim();return Object(me.jsxs)("div",{className:"claim-wrapper",children:[Object(me.jsx)("h5",{children:"Total available"}),Object(me.jsx)($e,{token:a,amount:r}),Object(me.jsx)("button",{className:"button fullWidth",type:"button",onClick:function(){var e=function(){var e=Object(c.a)(i.a.mark((function e(){var a,r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(t.tokenApi){e.next=4;break}return e.abrupt("return");case 4:if(t.noLoginTokenApi){e.next=6;break}return e.abrupt("return");case 6:if(t.tokenContractId){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,t.tokenApi.storageBalanceOf(n);case 10:if(a=e.sent,!(null!==a&&!0)){e.next=16;break}t.noLoginApi.claim(n),e.next=23;break;case 16:return e.next=18,t.tokenApi.storageBalanceBounds();case 18:r=e.sent,c=r.max,o=function(){t.noLoginTokenApi.storageDeposit(t.tokenContractId,n,c)},f((function(){return o})),b(!0);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()},children:"Claim All"}),Object(me.jsx)(Ft,{message:m,isOpen:d,closeFn:function(){return b(!1)},callback:h})]})};function Mt(e){var t=e.lockups,n=e.token,a=e.adminControls,r=Object(j.h)().userId,c=t.filter((function(e){return e.account_id===r})),o=c.reduce((function(e,t){return e+parseFloat(t.unclaimed_balance)}),0);return console.log("user lockups",r,c),Object(me.jsxs)("div",{className:"container",children:[!a&&Object(me.jsx)(Wt,{accountId:r,token:n,total:C(o,n.decimals)}),Object(me.jsx)(ft.a,{sx:{boxShadow:"unset"},children:Object(me.jsxs)(Oe.a,{className:"main-table","aria-label":"collapsible table",children:[Object(me.jsx)(ge.a,{className:"table-head",children:Object(me.jsxs)(ke.a,{children:[Object(me.jsx)(we.a,{}),Object(me.jsx)(we.a,{align:"left",children:"ID"}),Object(me.jsx)(we.a,{align:"left",children:"Account ID"}),Object(me.jsx)(we.a,{align:"right",children:"Start\xa0date"}),Object(me.jsx)(we.a,{align:"right",children:"End\xa0date"}),Object(me.jsx)(we.a,{align:"right",children:"Terminatable"}),Object(me.jsx)(we.a,{align:"right",children:"Total\xa0amount"}),Object(me.jsx)(we.a,{align:"center",children:"Progress"})]})}),Object(me.jsx)(_e.a,{children:c.map((function(e){return Object(me.jsx)(Nt,{row:e,token:n,adminControls:a},e.id)}))})]})})]})}function Lt(e){var t=e.adminControls,n=Object(j.f)(),a=n.pathname.split("/")[1],r=Object(l.useContext)(he),c=r.near,o=r.signOut;if(Object(l.useEffect)((function(){return console.log(n.pathname),function(){}}),[n]),!c)return null;var s=c.currentUser,i=s.signedIn,u=s.signedAccountId,d=s.isAdmin,b=s.isCouncilMember,p=t&&(d||b);return Object(me.jsx)("div",{className:"header",children:Object(me.jsx)("div",{className:"container",children:Object(me.jsxs)(pt.a,{sx:{display:"flex"},children:[Object(me.jsx)(h.b,{className:"logo",to:"/",children:"LOCKUPS"}),Object(me.jsxs)("div",{className:"nav",children:[Object(me.jsx)(h.c,{className:"nav-link",to:"/".concat(a,p?"/admin/lockups":"/lockups"),children:"Lockups"}),Object(me.jsx)(h.c,{className:"nav-link",to:"/".concat(a,t?"/admin/draft_groups":"/draft_groups"),children:"Lockup Drafts"}),Object(me.jsx)(h.c,{className:"nav-link",to:"/".concat(a,t?"/admin/about":"/about"),children:"About"})]}),t&&i&&Object(me.jsxs)(pt.a,{sx:{marginTop:"23px"},children:[Object(me.jsx)("span",{className:"account-name",children:u}),Object(me.jsx)("button",{className:"button",type:"button",onClick:o,children:"Log out"})]})]})})})}function Rt(e){var t=e.children;return Object(me.jsx)("div",{className:"container login",children:t})}var Ht=function(){var e=Object(l.useContext)(he),t=e.near,n=e.signIn;if(!t)return null;var a=t.currentUser,r=a.signedIn,c=a.isAdmin,o=a.isCouncilMember,s=r&&!(c||o),i=r&&(c||o);return Object(me.jsxs)(Rt,{children:[s&&Object(me.jsx)(qe.a,{sx:{margin:2,width:"500px"},severity:"error",children:"You are not admin"}),!r&&Object(me.jsx)("button",{className:"button",type:"button",onClick:n,children:"Sign In"}),i&&Object(me.jsx)(j.a,{to:"lockups",replace:!0})]})};function Gt(){var e=Object(l.useContext)(he).near;return Object(me.jsx)("div",{children:Object(me.jsxs)("div",{style:{maxWidth:640,margin:"auto",paddingTop:20},children:[Object(me.jsx)("p",{children:"Please pay for the account storage in fungible token contract. This is necessary to allow lockup contract to hold locked fungible token funds. This is a one time payment for the lockup contract. Additionally, all users claiming lockups will have to pay for the storage for their account too."}),Object(me.jsx)("button",{className:"button fullWidth",type:"button",onClick:function(){var t=function(){var t=Object(c.a)(i.a.mark((function t(){var n,a,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:if(e.tokenApi){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.tokenApi.storageBalanceBounds();case 6:return n=t.sent,a=n.max,console.log(a),t.next=11,e.tokenApi.storageDeposit(e.lockupContractId,a);case 11:r=t.sent,console.log(r);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()},children:"Pay"})]})})}function Kt(e){var t=e.children,n=Object(j.f)(),a=Object(l.useContext)(he).near;if(!a)return null;var r=a.currentUser,c=r.signedIn,o=r.isAdmin,s=r.isCouncilMember,i=n.pathname.split("/")[1];return c&&(o||s)?a.isContractFtStoragePaid?t:Object(me.jsx)("div",{className:"container",children:Object(me.jsx)(Gt,{})}):Object(me.jsx)(j.a,{to:"/".concat(i,"/admin"),replace:!0})}var Bt=n(183),Vt=n.n(Bt);function Jt(e){var t=e.lockups,n=Object(l.useState)(x),a=Object(o.a)(n,2),r=a[0],c=a[1],s=Object(j.g)();return Object(me.jsxs)("div",{className:"root",children:[Object(me.jsx)("div",{className:"header",children:Object(me.jsx)("div",{className:"container",children:Object(me.jsx)(pt.a,{sx:{display:"flex"},children:Object(me.jsx)(h.b,{className:"logo",to:"/",children:"LOCKUPS"})})})}),Object(me.jsx)("div",{className:"main",children:Object(me.jsxs)("div",{className:"container home",children:[Object(me.jsxs)("ul",{className:"home-list",children:[Object(me.jsx)("li",{children:Object(me.jsxs)("div",{children:[Object(me.jsx)("span",{children:"Total contracts"}),Object(me.jsx)("b",{children:"256"})]})}),Object(me.jsx)("li",{children:Object(me.jsxs)("div",{children:[Object(me.jsx)("span",{children:"Total locked"}),Object(me.jsx)("b",{children:"$5,336,000"})]})}),Object(me.jsx)("li",{children:Object(me.jsxs)("div",{children:[Object(me.jsx)("span",{children:"Total lockups"}),Object(me.jsx)("b",{children:(null===t||void 0===t?void 0:t.length)||42})]})})]}),Object(me.jsx)("h2",{children:"Manage token vesting on NEAR"}),Object(me.jsx)("p",{children:"Create new lockup contract to be used by startup"}),Object(me.jsx)(h.b,{to:"/new_lockup_contract",className:"button link-button",children:"Create Lockup Contract"}),Object(me.jsx)("div",{className:"line"}),Object(me.jsxs)("div",{className:"search-container",children:[Object(me.jsx)(st.a,{variant:"outlined",value:r,onChange:function(e){c(e.target.value)},className:"input",placeholder:"Enter existing Lockup contract address",InputProps:{startAdornment:Object(me.jsx)(vt.a,{position:"start",children:Object(me.jsx)(Vt.a,{})})}}),Object(me.jsx)("button",{className:"button",onClick:function(){var e="/".concat(r,"/lockups");s(e),window.location.reload()},"aria-label":"open",type:"button",children:"Search"})]})]})})]})}function Yt(){return Object(me.jsx)("div",{className:"container",children:"Contract not found"})}n(294);function qt(){var e=Object(j.f)(),t=e.pathname,n=e.pathname.includes("admin"),a=t.indexOf("/",1),r="".concat(t.substring(0,a),"/admin").concat(t.substring(a,t.length));return Object(l.useContext)(he).near?Object(me.jsx)("div",{className:"footer",children:Object(me.jsx)("div",{className:"container",children:Object(me.jsx)(pt.a,{sx:{display:"flex"},children:Object(me.jsxs)("div",{className:"nav",children:[Object(me.jsx)(h.b,{className:"nav-link",to:"/terms",children:"Terms"}),Object(me.jsx)(h.b,{className:"nav-link",to:"/privacy",children:"Privacy"}),n?Object(me.jsx)(h.b,{className:"nav-link",to:t.replace(/\/admin/,""),children:"User view"}):Object(me.jsx)(h.b,{className:"nav-link",to:r,children:"Admin view"})]})})})}):null}function zt(e){var t=e.lockups,n=e.token,a=e.contractId,c=e.near;return t?Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Lt,{adminControls:!1}),Object(me.jsxs)(j.d,{children:[Object(me.jsx)(j.b,{path:"/",element:Object(me.jsx)(j.a,{replace:!0,to:"lockups"})}),Object(me.jsx)(j.b,{path:"/about",element:Object(me.jsx)(xe,{lockups:t,token_account_id:a})}),Object(me.jsx)(j.b,{path:"/lockups",element:a&&c&&Object(me.jsx)(Ut,{lockups:t,token:Object(r.a)(Object(r.a)({},n),{},{contractId:a}),adminControls:!1})}),Object(me.jsx)(j.b,{path:"/lockups/:userId",element:Object(me.jsx)(Mt,{lockups:t,token:n,adminControls:!1})}),Object(me.jsx)(j.b,{path:"/draft_groups",element:Object(me.jsx)(Kt,{children:Object(me.jsx)(bt,{token:n,adminControls:!1})})}),Object(me.jsx)(j.b,{path:"/draft_groups/:draftGroupId",element:Object(me.jsx)(Kt,{children:Object(me.jsx)(dt,{token:n,adminControls:!1})})})]})]}):null}function $t(e){var t=e.lockups,n=e.token,a=e.tokenContractId,c=e.near;if(!t)return null;var o=a&&c;return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Lt,{adminControls:!0}),Object(me.jsxs)(j.d,{children:[Object(me.jsx)(j.b,{path:"/",element:Object(me.jsx)(Ht,{})}),Object(me.jsx)(j.b,{path:"/about",element:Object(me.jsx)(xe,{lockups:t,token_account_id:a})}),Object(me.jsx)(j.b,{path:"/lockups",element:o&&Object(me.jsx)(Kt,{children:Object(me.jsx)(Ut,{lockups:t,token:Object(r.a)(Object(r.a)({},n),{},{contractId:a}),adminControls:!0})})}),Object(me.jsx)(j.b,{path:"/lockups/:userId",element:Object(me.jsx)(Kt,{children:Object(me.jsx)(Mt,{lockups:t,token:n,adminControls:!0})})}),Object(me.jsx)(j.b,{path:"/draft_groups",element:Object(me.jsx)(Kt,{children:Object(me.jsx)(bt,{token:n,adminControls:!0})})}),Object(me.jsx)(j.b,{path:"/draft_groups/:draftGroupId",element:Object(me.jsx)(Kt,{children:Object(me.jsx)(dt,{token:n,adminControls:!0})})}),Object(me.jsx)(j.b,{path:"/import_draft_group",element:Object(me.jsx)(Kt,{children:Object(me.jsx)(Ye,{token:n,adminControls:!0})})})]})]})}function Zt(){var e=Object(u.b)().enqueueSnackbar,t=Object(l.useContext)(he).near,n=Object(l.useState)({}),a=Object(o.a)(n,2),r=a[0],s=a[1],d=Object(l.useState)(null),b=Object(o.a)(d,2),p=b[0],f=b[1],x=Object(l.useState)({decimals:0,icon:null,name:"",reference:null,reference_hash:null,spec:"",symbol:""}),v=Object(o.a)(x,2),O=v[0],g=v[1];Object(l.useEffect)((function(){if(e&&t&&O&&""!==O.spec){var n=function(){var n=Object(c.a)(i.a.mark((function n(){var a,r,c,o,s,l,u,d,b,p,j,h,f,x,v,g,k,w,y,C,S,N,A,T,E,D;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=new URLSearchParams(window.location.search),r=a.get("transactionHashes")){n.next=4;break}return n.abrupt("return");case 4:return c=r.split(",")[0],console.log("txHash",c),n.next=8,t.rpcProvider.txStatus(c,"sender.testnet");case 8:if(o=n.sent,console.log(o),s=o.transaction.actions[0].FunctionCall.method_name,l=o.status.SuccessValue,u=JSON.parse(atob(o.transaction.actions[0].FunctionCall.args)),"claim"!==s){n.next=22;break}if(!l){n.next=20;break}if("0"===(d=JSON.parse(atob(l)))){n.next=20;break}return b=new m.a(d).div(new m.a(10).pow(O.decimals)).round(2,m.a.roundDown),e("Claimed ".concat(b," ").concat(O.symbol),{variant:"success"}),n.abrupt("return");case 20:return e("Claim failed: ".concat(I(c)),{variant:"error"}),n.abrupt("return");case 22:if("storage_deposit"!==s){n.next=30;break}return p=JSON.parse(atob(l)),j=parseFloat(_(p.total,9)).toString(),console.log(j),h=u.account_id,f="Successfully paid ".concat(j,"N for FT storage of ").concat(h),e(f,{variant:"success"}),n.abrupt("return");case 30:if("ft_transfer_call"!==s){n.next=58;break}if(x=JSON.parse(u.msg),console.log(x),!x.schedule){n.next=45;break}if(v=JSON.parse(atob(l)),g=new m.a(v).div(new m.a(10).pow(O.decimals)).round(2,m.a.roundDown),console.log(g),x.schedule[x.schedule.length-1].balance!==v){n.next=42;break}return k="Created lockup for ".concat(x.account_id," with amount ").concat(g," ").concat(O.symbol),e(k,{variant:"success"}),n.abrupt("return");case 42:return w="Failed to create lockup for ".concat(x.account_id,": ").concat(I(c)),e(w,{variant:"error"}),n.abrupt("return");case 45:if(null===x.draft_group_id){n.next=56;break}if(y=JSON.parse(atob(l)),C=new m.a(y).div(new m.a(10).pow(O.decimals)).round(2,m.a.roundDown),console.log(C),"0"===y){n.next=53;break}return S="Funded draft group ".concat(x.draft_group_id," with amount ").concat(C," ").concat(O.symbol),e(S,{variant:"success"}),n.abrupt("return");case 53:return N="Failed to fund draft group ".concat(x.draft_group_id,": ").concat(I(c)),e(N,{variant:"error"}),n.abrupt("return");case 56:return e("Transaction performed, TODO ".concat(c,"!"),{variant:"warning"}),n.abrupt("return");case 58:if("terminate"!==s){n.next=68;break}if(!l){n.next=66;break}return A=JSON.parse(atob(l)),console.log(A),T=new m.a(A).div(new m.a(10).pow(O.decimals)).round(2,m.a.roundDown),E="Terminated lockup #".concat(u.lockup_index,", unvested amount: ").concat(T),e(E,{variant:"success"}),n.abrupt("return");case 66:return e("Terminate lockup failed: ".concat(I(c)),{variant:"error"}),n.abrupt("return");case 68:D='UNHANDLED Transaction "'.concat(s,'" : ').concat(I(c)),e(D,{variant:"warning"});case 70:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}}),[e,t,O]),Object(l.useEffect)((function(){var e=!0;if(t){var n=function(){var n=Object(c.a)(i.a.mark((function n(){var a,r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.api.loadAllLockups();case 2:return a=n.sent,n.next=5,t.tokenApi.ftMetadata();case 5:if(r=n.sent,e){n.next=8;break}return n.abrupt("return");case 8:g(r),s({lockups:a,name:"name"});case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();t.tokenContractId&&n()}return function(){e=!1}}),[t]),Object(l.useEffect)((function(){return t&&t.tokenApi&&f(t.tokenApi.getContract().contractId),function(){}}),[t]);var k=r.lockups;return Object(me.jsxs)(h.a,{children:[Object(me.jsxs)(j.d,{children:[Object(me.jsx)(j.b,{path:"/",element:Object(me.jsx)(Jt,{lockups:k})}),Object(me.jsx)(j.b,{path:"/new_lockup_contract/",element:Object(me.jsx)(jt,{})}),Object(me.jsx)(j.b,{path:"/:cid/*",element:p&&t&&Object(me.jsx)(zt,{lockups:k,token:O,contractId:p,near:t})}),Object(me.jsx)(j.b,{path:"/:cid/admin/*",element:p&&t&&Object(me.jsx)($t,{lockups:k,token:O,tokenContractId:p,near:t})}),Object(me.jsx)(j.b,{path:"/:cid/not_found_contract/",element:Object(me.jsx)(Yt,{})}),Object(me.jsx)(j.b,{path:"*",element:Object(me.jsx)(Yt,{})})]}),Object(me.jsx)(qt,{})]})}n(295);function Qt(e){var t=e.snackbarKey,n=Object(u.b)().closeSnackbar;return Object(me.jsx)(d.a,{onClick:function(){return n(t)},children:Object(me.jsx)(p.a,{style:{color:"white"}})})}function Xt(){var e=Object(l.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1];Object(l.useEffect)((function(){function e(){return(e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}try{!function(){e.apply(this,arguments)}()}catch(t){console.log(t)}}),[]);var s=Object(l.useMemo)((function(){return{near:n,signIn:function(){var e;null===n||void 0===n||null===(e=n.api)||void 0===e||e.signIn()},signOut:function(){n&&(n.api.signOut(),a(Object(r.a)(Object(r.a)({},n),{},{currentUser:{signedIn:!1,signedAccountId:null,isAdmin:!1,isCouncilMember:!1,daos:[]}})))}}}),[n]);return Object(me.jsx)(l.StrictMode,{children:Object(me.jsx)(he.Provider,{value:s,children:Object(me.jsx)(u.a,{autoHideDuration:null,action:function(e){return Object(me.jsx)(Qt,{snackbarKey:e})},onClose:function(){var e=new URL(window.location.href),t=new URLSearchParams(e.search);t.delete("transactionHashes"),e.search=t.toString(),console.log(e),window.history.pushState({},null,e.toString())},children:Object(me.jsx)(Zt,{})})})})}Object(a.render)(Object(me.jsx)(Xt,{}),document.getElementById("root"))}},[[296,1,2]]]);
//# sourceMappingURL=main.e18a99b1.chunk.js.map