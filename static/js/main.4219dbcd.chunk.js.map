{"version":3,"sources":["config.ts","utils.ts","services/api.ts","services/noLogInUsage.ts","services/noLoginApi.ts","services/NoLoginTokenApi.ts","services/tokenApi.ts","services/factoryApi.ts","services/DAOs/astroDAO/api.ts","services/DAOs/astroDAO/utils.ts","services/near.ts","pages/About/index.tsx","components/Chart/index.tsx","components/TokenIcon/index.tsx","components/ScheduleTable/index.tsx","services/scheduleHelpers.ts","services/chartHelpers.ts","services/spreadsheetImport.ts","components/DraftsTable/row.tsx","components/DraftsTable/index.tsx","components/TokenAmountPreview/index.tsx","components/ImportDraftGroup/index.tsx","components/FundButton/index.tsx","components/WithDao/DaoSelector/index.tsx","components/WithDao/DaoProposalDescription/index.tsx","components/FundWithDaoButton/index.tsx","components/DeleteDraftGroupButton/index.tsx","pages/PageDraftGroup/index.tsx","pages/PageDraftGroupsIndex/index.tsx","pages/NewLockupContract/index.tsx","components/CreateLockup/index.tsx","components/TerminateModal/index.tsx","components/TerminateLockup/index.tsx","components/TerminateWithDaoButton/index.tsx","components/table/row.tsx","components/LockupsTable/index.tsx","components/FavouriteAccounts/index.tsx","pages/Lockups/index.tsx","components/ConfirmDialog/index.tsx","components/Claim/index.tsx","pages/UserLockups/index.tsx","components/Header/index.tsx","components/Authorize/index.tsx","components/PayForContractStorage/index.tsx","components/RequireAuth/index.tsx","pages/Homepage/index.tsx","pages/NotFoundContract/index.tsx","components/Footer/index.tsx","pages/PageDraft/index.tsx","components/App/index.tsx","NearApp.tsx","index.tsx"],"names":["DEFAULT_CONTRACT_NAME","process","FACTORY_CONTRACT_NAME","CONTRACT_NAME","contractNameFromUrl","window","location","hash","split","getCurrentContractName","console","log","config","env","REACT_APP_ENVIRONMENT","networkId","nodeUrl","contractName","walletUrl","helperUrl","explorerUrl","factoryContractName","Error","getConfig","MAX_GAS","Big","DP","PE","nearTo","value","digits","mode","div","toFixed","undefined","convertTimestamp","time","Date","toLocaleDateString","convertAmount","decimals","addYear","date","year","setFullYear","getFullYear","getTime","dumpLocalStorage","dumpKey","dumpValue","Object","keys","localStorage","map","key","getItem","setItem","JSON","stringify","restoreLocalStorage","data","parse","clear","forEach","record","txLinkInExplorer","txHash","LOCKUP_VIEW_METHODS","LOCKUP_CHANGE_METHODS","NearApi","near","contract","walletConnection","this","WalletConnection","Contract","account","viewMethods","changeMethods","a","get_draft_groups_paged","result","draftIndex","draft","assign","id","index","get_draft_group","indices","get_drafts","create_draft_group","create_draft","drafts","create_drafts","args","gas","convert_draft","draft_id","convert_drafts","draft_ids","draftGroupId","discard_draft_group","draft_group_id","draftIds","delete_drafts","lockupIndex","timestamp","terminate","lockup_index","termination_timestamp","amount","get_token_account_id","get_deposit_whitelist","get_lockups_paged","then","response","successUrl","href","requestSignIn","signOut","keyStore","getAccountId","acc_id","balance","getAccountBalance","b","total","parseFloat","utils","format","formatNearAmount","error","getFirstFullAccessKey","provider","accountId","query","request_type","account_id","finality","allAccessKeys","length","allFullAccessKeys","filter","access_key","permission","NoLoginApi","setWalletAndContractWithAuth","buildContract","claim","clean","connection","firstFullAccessKey","allKeys","public_key","TOKEN_VIEW_METHODS","TOKEN_CHANGE_METHODS","NoLoginTokenApi","tokenAccountId","storage_deposit","TokenApi","contractId","lockupContractId","lockupTotalAmount","userAccountId","lockupSchedule","vestingSchedule","ftTransferCall","receiver_id","toString","msg","schedule","vesting_schedule","Schedule","try_convert","meta","deposit","rest","ft_transfer_call","ft_metadata","storage_balance_of","storage_balance_bounds","DEPLOY_DEPOSIT","mul","pow","FACTORY_CHANGE_METHODS","FactoryApi","name","depositWhitelist","callbackUrl","argsRaw","token_account_id","deposit_whitelist","argsPacked","create","init_function","init_args","FUNCTION_CALL_CREATE_PROPOSAL_PERMISSIONS","DAO_VIEW_METHODS","AstroDaoApi","get_policy","policy","canProposalRoles","roles","role","permissions","includes","canProposalGroups","kind","Group","flat","member","buildProposalFormLink","contractAddress","action","variant","details","smartContractAddress","methodName","json","actionsGas","actionDeposit","params","customFunctionCallProposalFormLink","daoCouncilMembers","accountAddress","api","getCouncilMembers","councilsMembers","buildFundDraftGroupProposalLink","description","lockupContractAddress","tokenContractAddress","amountValue","draftGroupIndex","daoContractAddress","encodeURIComponent","ONE_YOKTO","buildTerminateLockupProposalLink","NearContext","createContext","connectNear","nearAPI","BrowserLocalStorageKeyStore","headers","noLoginKeyStore","InMemoryKeyStore","noLoginNear","noLoginApi","noLoginTokenApi","signedAccountId","tokenContractId","isAdmin","daos","getTokenAccountId","getDepositWhitelist","Promise","all","dwID","daosCouncilMembers","userDaosCouncils","daoCMs","values","pop","tokenApi","isContractFtStoragePaid","storageBalanceOf","storageBalance","factoryApi","rpcProvider","JsonRpcProvider","currentUser","signedIn","isCouncilMember","About","lockups","className","Chart","option","title","text","tooltip","trigger","axisPointer","type","legend","bottom","selectedMode","icon","grid","top","left","right","containLabel","xAxis","boundaryGap","splitNumber","yAxis","series","color","areaStyle","opacity","markLine","lineStyle","symbol","vested","unlocked","TokenIcon","url","size","style","height","width","verticalAlign","src","alt","ScheduleTable","token","Table","TableHead","TableRow","TableCell","align","TableBody","x","component","scope","interpolate","checkpoint0","checkpoint1","x0","y0","x1","y1","xM","interpolateRaw","interpolateSchedule","i","sumSchedules","schedules","timestamps","Array","from","Set","sort","y","plus","push","chartData","lockupsList","tokenDecimals","lockupSchedules","now","Math","round","minTimestampsLockup","minTimestampsVesting","termination_config","minTimestamp","min","vestingSchedules","sumVesting","sumLockup","convertSchedule","s","BN","prototype","toJSON","prefixErrorWith","prefix","callback","e","message","parseSpreadsheetColumns","input","lines","trim","table","line","columns","row","fromEntries","col","colIdx","parseDuration","pattern","match","groups","parseInt","month","week","day","hour","minute","second","parseCliffInfo","parts","durationRaw","percentageRaw","duration","percentage","parsePercentage","parseHumanFriendlySchedule","timestampStartRaw","durationTotalRaw","cliffInfoRaw","releaseEveryRaw","timestampStart","Number","isNaN","parseTimestamp","durationTotal","cliffInfo","releaseEvery","durationCliff","percentageCliff","parseToSpreadsheetRow","allowedKeys","isValid","parseValidAccountId","parseTokenAmount","lockup_schedule","datePlusDurationMul","mulInput","floor","UTC","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","toUnix","toLockupSchedule","inputTotalAmount","decimalsMultiplier","timestampCliff","timestampPreCliff","timestampFinish","totalAmount","roundDown","cliffAmount","muln","divn","clone","gt","tmCliff","tmFirstStep","cpStart","cpPreCliff","cpCliff","cpFinish","unshift","tms","tm","increment","sub","cps","flatMap","stepBalance","add","cpsStart","concat","parseLockup","rawSpreadsheetRow","vestingSchedulePacked","checkpoint","lockupBalance","vestingBalance","lte","assertValidTerminationSchedule","lockupTotalBalance","lockup","DraftsTableRow","props","useLocation","useState","open","setOpen","adminControls","progressShow","enqueueSnackbar","useSnackbar","useContext","padding","colSpan","currentContractName","pathname","selectedDraftId","draftPage","importDraftPage","balancesRaw","totalBalanceRaw","m1","m2","unclaimedBalanceRaw","vestedBalanceFullRaw","vestedBalanceRaw","unvestedBalanceRaw","claimed","unclaimed","unvested","calcBalancesRaw","sx","borderBottom","IconButton","onClick","to","origin","onCopy","autoHideDuration","Tooltip","placement","arrow","background","Collapse","in","timeout","unmountOnExit","display","gap","flex","DraftsTable","TokenAmountPreview","ImportDraftGroup","setData","parseErrors","setParseErrors","importProgress","setImportProgress","navigate","useNavigate","withNotification","func","handleClickImport","createDraftGroup","chunkSize","chunk","slice","lockup_create","createDrafts","path","totalBalance","balances","calcTotalBalance","TextareaAutosize","placeholder","maxRows","onChange","event","target","spreadsheetInput","errorsFiltered","disabled","FundButton","fundDraftGroup","getContract","DaoSelector","selectedAddress","setSelectedAddress","handleSelectedDaoAddressChange","InputLabel","Select","required","marginBottom","dao","MenuItem","TextField","label","DaoProposalDescription","proposalDescription","setProposalDescription","multiline","minRows","defaultValue","FundWithDaoButton","defaultDescription","replace","setDescription","astroDAOContractAddress","setAstroDAOContractAddress","handleClose","Dialog","minWidth","onClose","onSubmit","link","focus","DialogTitle","position","DialogContent","paddingTop","DialogActions","DeleteDraftGroupButton","inProgress","setInProgress","perform","discardDraftGroup","deleteDrafts","reload","PageDraftGroup","useParams","draftGroup","setDraftGroup","setDrafts","isConverted","setIsConverted","useEffect","searchParams","URLSearchParams","search","transactionHashesRaw","get","txStatus","transaction","actions","FunctionCall","method_name","successValue","status","SuccessValue","atob","msgDraftGroupId","fetchDraftGroup","getDraftGroup","fetchDrafts","getDrafts","draft_indices","total_amount","discarded","funded","LoadingButton","convertDrafts","loading","marginTop","Alert","severity","PageDraftGroupsIndex","draftGroups","setDraftGroups","fetchDraftGroups","getDraftGroupsAll","importDraftGroupPath","group","NewLockupContract","signIn","Box","preventDefault","lockupOperators","elements","lockup_operators","lockupSubaccountId","lockup_subaccount_id","CreateLockup","startDate","setStartDate","setSchedule","setAccountId","accountStatus","setAccountStatus","setAmount","handleCreateLockup","balanceInput","selected","getScheduleList","createLockup","validAmount","maxWidth","margin","fullWidth","InputProps","endAdornment","InputAdornment","FormControl","LocalizationProvider","dateAdapter","AdapterDateFns","DatePicker","newValue","renderInput","TerminateModal","currentState","handlers","dialog","datePicker","minDate","setValue","daoSelector","daoProposalDescription","minHeight","TerminateLockup","buttonText","setDate","handleTerminateLockup","ts","setTimeout","canTerminate","modalProps","TerminateWithDaoButton","uri","URL","beneficiary_id","Row","payerMessage","selectedAccountPage","selectedLockupId","claimedAmount","claimed_balance","availbleAmount","unclaimed_balance","vestedAmount","total_balance","unvestedAmount","terminator","terminatorId","LockupsTable","FavouriteAccounts","favouriteAccounts","uniqueUsers","onSave","inputRef","useRef","parseAccounts","replaceAll","handleSaveFavouriteAccounts","localStorageValue","current","newFavouriteAccounts","inputProps","join","onKeyPress","realAccouns","Lockups","storedData","favouriteAccountsFromLocalStorage","setFavouriteAccounts","favouriteAccountsLockups","lockupsPage","TableContainer","boxShadow","ConfirmDialog","isOpen","closeFn","Button","ClaimAllLockups","isDialogOpen","setIsDialogOpen","dialogConfirmCallback","setDialogConfirmCallback","depositConfirmMessage","storageBalanceBounds","bounds","max","storageDeposit","UserLockups","allLockups","userId","totalUnclaimedBalance","reduce","acc","obj","Claim","Header","lockupsPageViewPolicy","Auth","children","Authorize","showAlertForUser","showLockups","PayForContractStorage","RequireAuth","currentPathname","draftGroupURL","Homepage","address","setAddress","startAdornment","NotFoundContract","Footer","isAdminView","indexOf","updatedPathname","substring","PageDraft","draftId","setDraft","fetchDraft","Customer","element","Admin","App","contractState","setContractState","setContractId","reference","reference_hash","spec","setToken","unpacked","txMsg","statusMessage","active","load","loadAllLockups","ftMetadata","metadata","SnackbarCloseButton","snackbarKey","closeSnackbar","NearApp","setNear","nearConn","connect","useMemo","Provider","sp","delete","history","pushState","render","document","getElementById"],"mappings":"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","file":"static/js/main.4219dbcd.chunk.js","sourcesContent":["export interface INearConfig {\n  networkId: string,\n  nodeUrl: string,\n  contractName: string,\n  walletUrl: string,\n  helperUrl: string,\n  explorerUrl: string,\n  factoryContractName: string,\n}\n\nexport const DEFAULT_CONTRACT_NAME = process.env.DEFAULT_CONTRACT_NAME || 'example.factory010.ft-lockup.testnet';\nexport const FACTORY_CONTRACT_NAME = process.env.FACTORY_CONTRACT_NAME || 'factory010.ft-lockup.testnet';\n\nconst getCurrentContractName = (): string => {\n  const contractNameFromUrl = window.location.hash.split('/')[1];\n  if (contractNameFromUrl === 'new_lockup_contract') return FACTORY_CONTRACT_NAME;\n\n  return contractNameFromUrl;\n};\n\nexport const CONTRACT_NAME = getCurrentContractName();\n\nconsole.log(CONTRACT_NAME);\n\n// TODO: move these data to envs\nfunction getConfig(): INearConfig {\n  const env = process.env.REACT_APP_ENVIRONMENT || 'development';\n  switch (env) {\n    case 'production':\n    case 'mainnet':\n      return {\n        networkId: 'mainnet',\n        nodeUrl: 'https://rpc.mainnet.near.org',\n        contractName: CONTRACT_NAME,\n        walletUrl: 'https://wallet.near.org',\n        helperUrl: 'https://helper.mainnet.near.org',\n        explorerUrl: 'https://explorer.mainnet.near.org',\n        factoryContractName: FACTORY_CONTRACT_NAME,\n      };\n    case 'development':\n    case 'testnet':\n      return {\n        networkId: 'testnet',\n        nodeUrl: 'https://rpc.testnet.near.org',\n        contractName: CONTRACT_NAME,\n        walletUrl: 'https://wallet.testnet.near.org',\n        helperUrl: 'https://helper.testnet.near.org',\n        explorerUrl: 'https://explorer.testnet.near.org',\n        factoryContractName: FACTORY_CONTRACT_NAME,\n      };\n    case 'betanet':\n      return {\n        networkId: 'betanet',\n        nodeUrl: 'https://rpc.betanet.near.org',\n        contractName: CONTRACT_NAME,\n        walletUrl: 'https://wallet.betanet.near.org',\n        helperUrl: 'https://helper.betanet.near.org',\n        explorerUrl: 'https://explorer.betanet.near.org',\n        factoryContractName: FACTORY_CONTRACT_NAME,\n      };\n    case 'local':\n      return {\n        explorerUrl: '',\n        helperUrl: '',\n        networkId: 'local',\n        nodeUrl: 'http://localhost:3030',\n        walletUrl: 'http://localhost:4000/wallet',\n        contractName: CONTRACT_NAME,\n        factoryContractName: FACTORY_CONTRACT_NAME,\n      };\n    case 'test':\n    case 'ci':\n      return {\n        explorerUrl: '',\n        helperUrl: '',\n        walletUrl: '',\n        networkId: 'shared-test',\n        nodeUrl: 'https://rpc.ci-testnet.near.org',\n        contractName: CONTRACT_NAME,\n        factoryContractName: FACTORY_CONTRACT_NAME,\n      };\n    case 'ci-betanet':\n      return {\n        explorerUrl: '',\n        helperUrl: '',\n        walletUrl: '',\n        networkId: 'shared-test-staging',\n        nodeUrl: 'https://rpc.ci-betanet.near.org',\n        contractName: CONTRACT_NAME,\n        factoryContractName: FACTORY_CONTRACT_NAME,\n      };\n    default:\n      throw Error(`Unconfigured environment '${env}'. Can be configured in src/config.js.`);\n  }\n}\n\nexport const config = getConfig();\n","import Big from 'big.js';\nimport { config } from './config';\n\nexport const MAX_GAS = 300_000_000_000_000;\nexport const ONE_YOCTO = 1;\n\nBig.DP = 40;\nBig.PE = 40;\nexport const NEAR_ROUND_DIGITS = 2;\n\nexport const toNear = (value: any) => Big(value).times(10 ** 24).round(0, Big.roundDown);\nexport const nearTo = (value: any, digits = NEAR_ROUND_DIGITS, mode?: number | undefined) => {\n  // default is 20, need at least 38 for proper rounding of any near balance\n  Big.DP = 40;\n  return Big(value || '0').div(10 ** 24).toFixed(digits === 0 ? undefined : digits, mode);\n};\nexport const nearToCeil = (\n  value: any,\n  digits = NEAR_ROUND_DIGITS,\n) => nearTo(value, digits, Big.roundUp);\nexport const nearToFloor = (\n  value: any,\n  digits = NEAR_ROUND_DIGITS,\n) => nearTo(value, digits, Big.roundDown);\nexport const big = (value = '0') => Big(value);\nexport const tsNear2JS = (time: number) => Math.floor(time / 1000000);\nexport const convertTimestamp = (time: number) => new Date(time * 1000).toLocaleDateString('en-US');\nexport const convertAmount = (value: number | string, decimals: number) => Big(value || '0').div(10 ** decimals).toFixed(NEAR_ROUND_DIGITS);\n// @ts-ignore\nexport const addYear = (date: Date, year: number) => new Date(new Date(date).setFullYear((date.getFullYear()) + year)).getTime() / 1000;\n\nexport const dumpLocalStorage = (dumpKey: string = 'dump') => {\n  const dumpValue = Object.keys(localStorage).map((key) => [key, localStorage.getItem(key)]);\n\n  localStorage.setItem(dumpKey, JSON.stringify(dumpValue));\n};\n\nexport const restoreLocalStorage = (dumpKey: string = 'dump') => {\n  const data = localStorage.getItem(dumpKey);\n\n  if (!data) {\n    return;\n  }\n\n  const dumpValue = JSON.parse(data);\n\n  localStorage.clear();\n\n  dumpValue.forEach((record:string[]) => localStorage.setItem(record[0], record[1]));\n};\n\nexport const txLinkInExplorer = (txHash: string) => `${config.explorerUrl}/transactions/${txHash}`;\n","import {\n  Near, Account, Contract, WalletConnection, utils,\n} from 'near-api-js';\nimport { MAX_GAS, ONE_YOCTO } from '../utils';\n\nexport const fromNear = (amount: string): number => parseFloat(utils.format.formatNearAmount(amount || '0'));\nexport const toYoctoNear = (amount: number): string => utils.format.parseNearAmount(String(amount)) || '0';\n\nconst LOCKUP_VIEW_METHODS = [\n  'get_draft_group',\n  'get_draft_groups_paged',\n  'get_drafts',\n  'get_lockups_paged',\n  'get_token_account_id',\n  'get_deposit_whitelist',\n];\n\nconst LOCKUP_CHANGE_METHODS = [\n  'create_draft',\n  'create_drafts',\n  'create_draft_group',\n  'convert_draft',\n  'convert_drafts',\n  'terminate',\n  'discard_draft_group',\n  'delete_drafts',\n];\n\ntype TViewMethods = {\n  'get_draft_group': any,\n  'get_draft_groups_paged': any,\n  'get_drafts': any,\n  'get_lockups_paged': any,\n  'get_token_account_id': any,\n  'get_deposit_whitelist': any,\n};\n\ntype TChangeMethods = {\n  'create_draft': any,\n  'create_drafts': any,\n  'create_draft_group': any,\n  'convert_draft': any,\n  'convert_drafts': any,\n  'terminate': any,\n  'discard_draft_group': any,\n  'delete_drafts': any,\n};\n\nexport type TNearAmount = string;\nexport type TNearTimestamp = number;\n\nexport type TCheckpoint = {\n  timestamp: TNearTimestamp,\n  balance: TNearAmount,\n};\n\nexport type TCheckpointWithIndex = {\n  timestamp: TNearTimestamp,\n  balance: TNearAmount,\n  index: number;\n};\n\nexport type TSchedule = TCheckpoint[];\n\nexport type TLockup = {\n  id: number,\n  account_id: string,\n  claimed_balance: TNearAmount,\n  schedule: TSchedule,\n  timestamp: TNearTimestamp,\n  total_balance: TNearAmount,\n  unclaimed_balance: TNearAmount,\n};\n\nexport type TLockupContract = Contract & TViewMethods & TChangeMethods;\n\ntype Balance = string;\ntype DraftIndex = number;\ntype DraftGroupIndex = number;\ntype LockupIndex = number;\n\ntype DraftGroupView = {\n  total_amount: Balance,\n  funded: boolean,\n  draft_indices: DraftIndex[],\n};\n\ntype DraftView = {\n  draft_group_id: DraftGroupIndex,\n  lockup_id: LockupIndex | null,\n  lockup: TLockup,\n};\n\nclass NearApi {\n  private near: Near;\n\n  private contract: TLockupContract;\n\n  private walletConnection: WalletConnection;\n\n  constructor(near: Near) {\n    this.near = near;\n    this.walletConnection = new WalletConnection(near, near.config.contractName);\n    this.contract = new Contract(\n      this.walletConnection.account(),\n      this.near.config.contractName,\n      { viewMethods: LOCKUP_VIEW_METHODS, changeMethods: LOCKUP_CHANGE_METHODS },\n    ) as TLockupContract;\n  }\n\n  async getDraftGroupsAll(): Promise<[DraftGroupView]> {\n    const result = await this.contract.get_draft_groups_paged();\n    return result.map(([draftIndex, draft]: [any, any]) => Object.assign(draft, { id: draftIndex }));\n  }\n\n  async getDraftGroup(index: number): Promise<DraftGroupView | null> {\n    const result = await this.contract.get_draft_group({ index });\n    if (result) {\n      result.id = index;\n    }\n\n    return result;\n  }\n\n  async getDrafts(indices: number[]): Promise<Array<[DraftIndex, DraftView]>> {\n    const result = await this.contract.get_drafts({ indices });\n\n    return result;\n  }\n\n  async createDraftGroup(): Promise<DraftGroupIndex> {\n    const result = await this.contract.create_draft_group();\n    return result;\n  }\n\n  async createDraft(draft: any): Promise<DraftIndex> {\n    const result = await this.contract.create_draft({ draft });\n\n    return result;\n  }\n\n  async createDrafts(drafts: any[]): Promise<DraftIndex> {\n    const result = await this.contract.create_drafts({ args: { drafts }, gas: '300000000000000' });\n\n    return result;\n  }\n\n  async convertDraft(index: DraftIndex): Promise<LockupIndex> {\n    const result = await this.contract.convert_draft({ draft_id: index });\n\n    return result;\n  }\n\n  async convertDrafts(indices: DraftIndex[]): Promise<LockupIndex[]> {\n    const result = await this.contract.convert_drafts({ args: { draft_ids: indices }, gas: '300000000000000' });\n\n    return result;\n  }\n\n  async discardDraftGroup(draftGroupId: number): Promise<any> {\n    const result = await this.contract.discard_draft_group({ args: { draft_group_id: draftGroupId } });\n\n    return result;\n  }\n\n  async deleteDrafts(draftIds: number[]): Promise<any> {\n    const result = await this.contract.delete_drafts({ args: { draft_ids: draftIds } });\n\n    return result;\n  }\n\n  async terminate(lockupIndex: number, timestamp: number | null): Promise<void> {\n    try {\n      const result = await this.contract.terminate({\n        args: { lockup_index: lockupIndex, termination_timestamp: timestamp },\n        gas: MAX_GAS,\n        amount: ONE_YOCTO,\n      });\n      return result;\n    } catch (e) {\n      console.log(e);\n      throw Error('Cannot terminate lockup');\n    }\n  }\n\n  getNear(): Near {\n    return this.near;\n  }\n\n  getWalletConnection(): WalletConnection {\n    return this.walletConnection;\n  }\n\n  getContract(): TLockupContract {\n    return this.contract as TLockupContract;\n  }\n\n  getTokenAccountId(): Promise<string> {\n    return (this.contract as TLockupContract).get_token_account_id();\n  }\n\n  getDepositWhitelist(): Promise<Array<string>> {\n    return (this.contract as TLockupContract).get_deposit_whitelist();\n  }\n\n  loadAllLockups(): Promise<TLockup[]> {\n    return (this.contract as TLockupContract).get_lockups_paged().then(\n      (response: any) => response.map(([id, data]: [number, any]) => Object.assign(data, { id })),\n    );\n  }\n\n  signIn(): void {\n    const successUrl = `${window.location.href}`;\n    this.walletConnection.requestSignIn(this.near.config.contractName, undefined, successUrl);\n  }\n\n  signOut(): void {\n    this.walletConnection.signOut();\n    this.near.config.keyStore.clear();\n  }\n\n  get_account_id(): string {\n    return this.walletConnection.getAccountId();\n  }\n\n  async account(acc_id: string): Promise<Account> {\n    return this.near.account(acc_id);\n  }\n\n  async get_balance(acc_id: string): Promise<number | null> {\n    const account = await this.account(acc_id);\n    let balance = null;\n    try {\n      const b = await account.getAccountBalance();\n      balance = fromNear(b.total);\n    } catch (e) {\n      console.error('Account not exist');\n    }\n    return balance;\n  }\n}\n\nexport default NearApi;\n","const getFirstFullAccessKey = async (provider: any, accountId: String): Promise<any> => {\n  const allAccessKeys = await provider.query({\n    request_type: 'view_access_key_list',\n    account_id: accountId,\n    finality: 'optimistic',\n  });\n\n  if (!allAccessKeys.keys?.length) {\n    throw Error('None of access keys was founded');\n  }\n\n  const allFullAccessKeys = allAccessKeys.keys.filter((key: any) => (typeof key?.access_key?.permission === 'string') && key?.access_key?.permission === 'FullAccess');\n\n  if (!allFullAccessKeys?.length) {\n    throw Error('None of full access keys was founded');\n  }\n\n  return allFullAccessKeys[0];\n};\n\nexport default getFirstFullAccessKey;\n","import {\n  Near, Contract, WalletConnection,\n} from 'near-api-js';\nimport { MAX_GAS, dumpLocalStorage } from '../utils';\nimport getFirstFullAccessKey from './noLogInUsage';\n\nconst LOCKUP_VIEW_METHODS = [''];\nconst LOCKUP_CHANGE_METHODS = ['claim'];\n\ntype TChangeMethods = {\n  'claim': any,\n};\n\ntype TLockupContract = Contract & TChangeMethods;\n\nclass NoLoginApi {\n  private near: Near;\n\n  constructor(near: Near) {\n    this.near = near;\n  }\n\n  async claim(accountId: string): Promise<void> {\n    dumpLocalStorage();\n\n    await this.setWalletAndContractWithAuth(accountId);\n\n    await this.buildContract().claim({}, MAX_GAS);\n\n    this.near.config.keyStore.clean();\n  }\n\n  async setWalletAndContractWithAuth(\n    accountId: string,\n    contractName: string = this.near.config.contractName,\n  ): Promise<any> {\n    const firstFullAccessKey = await getFirstFullAccessKey(\n      this.near.connection.provider,\n      accountId,\n    );\n\n    localStorage.setItem(\n      `${contractName}_wallet_auth_key`,\n      JSON.stringify({ accountId, allKeys: [firstFullAccessKey.public_key] }),\n    );\n  }\n\n  buildContract(): TLockupContract {\n    return new Contract(\n      (new WalletConnection(this.near, this.near.config.contractName)).account(),\n      this.near.config.contractName,\n      { viewMethods: LOCKUP_VIEW_METHODS, changeMethods: LOCKUP_CHANGE_METHODS },\n    ) as TLockupContract;\n  }\n}\n\nexport default NoLoginApi;\n","import {\n  Near, Contract, WalletConnection,\n} from 'near-api-js';\nimport { MAX_GAS, dumpLocalStorage } from '../utils';\nimport getFirstFullAccessKey from './noLogInUsage';\n\nconst TOKEN_VIEW_METHODS = [''];\nconst TOKEN_CHANGE_METHODS = ['storage_deposit'];\n\ntype TChangeMethods = {\n  'storage_deposit': any,\n};\n\ntype TTokenContract = Contract & TChangeMethods;\n\nclass NoLoginTokenApi {\n  private near: Near;\n\n  constructor(near: Near) {\n    this.near = near;\n  }\n\n  async storageDeposit(tokenAccountId: string, accountId: string, amount: string): Promise<void> {\n    dumpLocalStorage();\n\n    await this.setWalletAndContractWithAuth(accountId);\n\n    await this.buildContract(tokenAccountId).storage_deposit({\n      args: { account_id: accountId },\n      gas: MAX_GAS,\n      amount,\n    });\n\n    this.near.config.keyStore.clean();\n  }\n\n  async setWalletAndContractWithAuth(\n    accountId: string,\n    contractName: string = this.near.config.contractName,\n  ): Promise<any> {\n    const firstFullAccessKey = await getFirstFullAccessKey(\n      this.near.connection.provider,\n      accountId,\n    );\n\n    localStorage.setItem(\n      `${contractName}_wallet_auth_key`,\n      JSON.stringify({ accountId, allKeys: [firstFullAccessKey.public_key] }),\n    );\n  }\n\n  buildContract(contractName: string): TTokenContract {\n    return new Contract(\n      (new WalletConnection(this.near, this.near.config.contractName)).account(),\n      contractName,\n      { viewMethods: TOKEN_VIEW_METHODS, changeMethods: TOKEN_CHANGE_METHODS },\n    ) as TTokenContract;\n  }\n}\n\nexport default NoLoginTokenApi;\n","import {\n  Contract, WalletConnection,\n} from 'near-api-js';\nimport { TSchedule } from './api';\n\nconst MAX_GAS = 300_000_000_000_000;\nconst ONE_YOKTO = 1;\n\nconst TOKEN_VIEW_METHODS = [\n  'ft_metadata',\n  'storage_balance_of',\n  'storage_balance_bounds',\n];\n\nconst TOKEN_CHANGE_METHODS = [\n  'ft_transfer_call', // redirects to wallet\n  'storage_deposit',\n];\n\ntype TTokenChangeMethods = {\n  'ft_transfer_call': any,\n  'storage_deposit': any,\n};\n\ntype TTokenViewMethods = {\n  'ft_metadata': any,\n  'storage_balance_of': any,\n  'storage_balance_bounds': any,\n};\n\nexport type TMetadata = {\n  spec: string,\n  name: string,\n  symbol: string,\n  icon: string | null,\n  reference: string | null,\n  reference_hash: string | null,\n  decimals: number,\n};\n\ntype TLockupCreate = {\n  account_id: string,\n  schedule: TSchedule,\n  vesting_schedule: { Schedule: TSchedule } | null,\n};\n\ntype TDraftGroupFund = {\n  draft_group_id: number,\n  try_convert: boolean,\n};\n\ntype TTokenContract = Contract & TTokenChangeMethods & TTokenViewMethods;\n\nclass TokenApi {\n  private contract: TTokenContract;\n\n  constructor(walletConnection: WalletConnection, contractId: string) {\n    this.contract = new Contract(\n      walletConnection.account(),\n      contractId,\n      { viewMethods: TOKEN_VIEW_METHODS, changeMethods: TOKEN_CHANGE_METHODS },\n    ) as TTokenContract;\n  }\n\n  getContract(): TTokenContract {\n    return this.contract;\n  }\n\n  async createLockup(\n    lockupContractId: string,\n    lockupTotalAmount: string,\n    userAccountId: string,\n    lockupSchedule: any[],\n    vestingSchedule: TSchedule | null,\n  ): Promise<void> {\n    const result = await this.ftTransferCall({\n      receiver_id: lockupContractId,\n      amount: lockupTotalAmount.toString(),\n      msg: {\n        account_id: userAccountId,\n        schedule: lockupSchedule,\n        vesting_schedule: vestingSchedule ? { Schedule: vestingSchedule } : null,\n      },\n    });\n\n    return result;\n  }\n\n  async fundDraftGroup(lockupContractId: string, draftGroupId: number, amount: string): Promise<void> {\n    const result = await this.ftTransferCall({\n      receiver_id: lockupContractId,\n      amount,\n      msg: {\n        draft_group_id: draftGroupId,\n        try_convert: true,\n      },\n    });\n\n    return result;\n  }\n\n  async ftTransferCall(\n    meta: {\n      receiver_id: string,\n      amount: string,\n      msg: TLockupCreate | TDraftGroupFund,\n    },\n    gas = MAX_GAS,\n    deposit = ONE_YOKTO,\n  ): Promise<void> {\n    const { msg, ...rest } = meta;\n\n    await this.contract.ft_transfer_call(\n      { msg: JSON.stringify(msg), ...rest },\n      gas,\n      deposit,\n    );\n  }\n\n  storageDeposit(accountId: String, amount: String): Promise<any> {\n    return this.contract.storage_deposit({\n      args: { account_id: accountId },\n      gas: MAX_GAS,\n      amount,\n    });\n  }\n\n  ftMetadata(): Promise<TMetadata> {\n    return this.contract.ft_metadata({});\n  }\n\n  storageBalanceOf(accountId: String): Promise<String> {\n    return this.contract.storage_balance_of({ account_id: accountId });\n  }\n\n  storageBalanceBounds(): Promise<{ min: string, max: string }> {\n    return this.contract.storage_balance_bounds();\n  }\n}\n\nexport default TokenApi;\n","import Big from 'big.js';\n\nimport {\n  Contract, WalletConnection,\n} from 'near-api-js';\n\nconst MAX_GAS = 300_000_000_000_000;\nconst DEPLOY_DEPOSIT = new Big(4).mul(new Big(10).pow(24)).toString();\n\nconst FACTORY_CHANGE_METHODS = [\n  'create',\n];\n\ntype TFactoryChangeMethods = {\n  'create': (opts: {\n    args: { name: string, init_function: string, init_args: string },\n    callbackUrl: string,\n    amount: string | number,\n    gas: string | number\n  }) => any,\n};\n\ntype TFactoryContract = Contract & TFactoryChangeMethods;\n\nclass FactoryApi {\n  private contract: TFactoryContract;\n\n  constructor(walletConnection: WalletConnection, contractId: string) {\n    this.contract = new Contract(\n      walletConnection.account(),\n      contractId,\n      { viewMethods: [], changeMethods: FACTORY_CHANGE_METHODS },\n    ) as TFactoryContract;\n  }\n\n  getContract(): TFactoryContract {\n    return this.contract;\n  }\n\n  async create(name: string, tokenAccountId: string, depositWhitelist: string[], callbackUrl: string): Promise<void> {\n    const argsRaw = {\n      token_account_id: tokenAccountId,\n      deposit_whitelist: depositWhitelist,\n    };\n    const argsPacked = JSON.stringify(argsRaw);\n    const result = await this.contract.create({\n      args: {\n        name,\n        init_function: 'new',\n        init_args: argsPacked,\n      },\n      callbackUrl,\n      gas: MAX_GAS,\n      amount: DEPLOY_DEPOSIT,\n    });\n\n    console.log(result);\n\n    return result;\n  }\n}\n\nexport default FactoryApi;\n","import {\n  Contract, WalletConnection,\n} from 'near-api-js';\n\nconst FUNCTION_CALL_CREATE_PROPOSAL_PERMISSIONS = ['call:AddProposal', '*:AddProposal'];\n\nconst DAO_VIEW_METHODS = [\n  'get_policy',\n];\n\ntype TAstroDaoViewMethods = {\n  'get_policy': any,\n};\n\ntype TAstroDaoContract = Contract & TAstroDaoViewMethods;\n\nclass AstroDaoApi {\n  private contract: TAstroDaoContract;\n\n  constructor(walletConnection: WalletConnection, contractId: string) {\n    this.contract = new Contract(\n      walletConnection.account(),\n      contractId,\n      { viewMethods: DAO_VIEW_METHODS, changeMethods: [] },\n    ) as TAstroDaoContract;\n  }\n\n  getContract(): TAstroDaoContract {\n    return this.contract;\n  }\n\n  async getCouncilMembers(): Promise<string[]> {\n    const policy = await this.contract.get_policy();\n    const canProposalRoles = policy.roles.filter(\n      (role: any) => role?.permissions?.includes(FUNCTION_CALL_CREATE_PROPOSAL_PERMISSIONS[0]) || role?.permissions?.includes(FUNCTION_CALL_CREATE_PROPOSAL_PERMISSIONS[1]),\n    );\n\n    if (canProposalRoles.length === 0) {\n      return [];\n    }\n\n    const canProposalGroups = canProposalRoles.map((role: any) => role?.kind?.Group);\n\n    return canProposalGroups.flat().filter((member: any) => member);\n  }\n}\n\nexport default AstroDaoApi;\n","import {\n  WalletConnection,\n} from 'near-api-js';\n\nimport AstroDaoApi from './api';\n\n// TODO move to the .env\nconst ASTRO_DAO_HOST = 'https://dev.app.astrodao.com';\n\nexport const MAX_GAS = '300';\nexport const ONE_YOKTO = '0.000000000000000000000001';\n\nexport const buildProposalFormLink = (\n  contractAddress: string,\n  action: string,\n  variant: string,\n  details: string,\n  smartContractAddress: string,\n  methodName: string,\n  json: any,\n  actionsGas: string,\n  actionDeposit: string,\n  gas: string,\n): string => {\n  const params = {\n    details,\n    smartContractAddress,\n    methodName,\n    json,\n    actionsGas,\n    gas,\n    deposit: actionDeposit,\n  };\n\n  return `${ASTRO_DAO_HOST}/dao/${contractAddress}/proposals?action=${action}&variant=${variant}&params=${JSON.stringify(params)}`;\n};\n\nexport const customFunctionCallProposalFormLink = (\n  contractAddress: string,\n  details: string,\n  smartContractAddress: string,\n  methodName: string,\n  json: any,\n  actionsGas: string,\n  actionDeposit: string,\n  gas: string = MAX_GAS,\n): string => buildProposalFormLink(\n  contractAddress,\n  'create_proposal',\n  'ProposeCustomFunctionCall',\n  details,\n  smartContractAddress,\n  methodName,\n  json,\n  actionsGas,\n  actionDeposit,\n  gas,\n);\n\nexport const daoCouncilMembers = async (walletConnection: WalletConnection, accountAddress: string): Promise<any> => {\n  try {\n    const api = new AstroDaoApi(walletConnection, accountAddress);\n    const councilsMembers = await api.getCouncilMembers();\n\n    return { [accountAddress]: councilsMembers };\n  } catch (e) {\n    console.log('isDAO ERROR:', e);\n    return undefined;\n  }\n};\n\nexport const buildFundDraftGroupProposalLink = (\n  description: string,\n  lockupContractAddress: string,\n  tokenContractAddress: string,\n  amountValue: string,\n  draftGroupIndex: number,\n  daoContractAddress: string,\n): string => {\n  const details = encodeURIComponent(description);\n  const methodName = 'ft_transfer_call';\n  const json = {\n    receiver_id: lockupContractAddress,\n    amount: amountValue,\n    msg: JSON.stringify({ draft_group_id: draftGroupIndex, try_convert: true }),\n  };\n  const actionsGas = '100'; // with this amount transaction completes in one go (without resubmit with additional gas)\n  const actionDeposit = ONE_YOKTO;\n\n  return customFunctionCallProposalFormLink(\n    daoContractAddress,\n    details,\n    tokenContractAddress,\n    methodName,\n    json,\n    actionsGas,\n    actionDeposit,\n  );\n};\n\nexport const buildTerminateLockupProposalLink = (\n  description: string,\n  lockupContractAddress: string,\n  lockupIndex: number,\n  timestamp: number | null,\n  daoContractAddress: string,\n): string => {\n  const details = encodeURIComponent(description);\n  const methodName = 'terminate';\n  const json = {\n    lockup_index: lockupIndex,\n    termination_timestamp: timestamp,\n  };\n  const actionsGas = '100'; // with this amount transaction completes in one go (without resubmit with additional gas)\n  const actionDeposit = ONE_YOKTO;\n\n  return customFunctionCallProposalFormLink(\n    daoContractAddress,\n    details,\n    lockupContractAddress,\n    methodName,\n    json,\n    actionsGas,\n    actionDeposit,\n  );\n};\n\nconst utils = {\n  buildProposalFormLink,\n  customFunctionCallProposalFormLink,\n  daoCouncilMembers,\n  buildFundDraftGroupProposalLink,\n  buildTerminateLockupProposalLink,\n};\n\nexport default utils;\n","import * as nearAPI from 'near-api-js';\nimport { createContext } from 'react';\nimport { config, INearConfig } from '../config';\nimport { restoreLocalStorage } from '../utils';\nimport NearApi from './api';\nimport NoLoginApi from './noLoginApi';\nimport NoLoginTokenApi from './NoLoginTokenApi';\nimport TokenApi from './tokenApi';\nimport FactoryApi from './factoryApi';\nimport { daoCouncilMembers } from './DAOs/astroDAO/utils';\n\nexport interface INearProps {\n  config: INearConfig;\n  api: NearApi;\n  noLoginApi: NoLoginApi\n  currentUser: {\n    signedIn: boolean;\n    isAdmin: boolean;\n    isCouncilMember: boolean;\n    signedAccountId: string | null;\n    daos: string[];\n  }\n  tokenContractId: string;\n  lockupContractId: string;\n  tokenApi: TokenApi;\n  noLoginTokenApi: NoLoginTokenApi;\n  factoryApi: FactoryApi;\n  rpcProvider: nearAPI.providers.JsonRpcProvider;\n  isContractFtStoragePaid: boolean;\n  near: nearAPI.Near;\n}\n\nexport const NearContext = createContext<any>(null);\n\nexport const connectNear = async (): Promise<INearProps> => {\n  if (localStorage.getItem('dump')) {\n    restoreLocalStorage();\n  }\n\n  const keyStore = new nearAPI.keyStores.BrowserLocalStorageKeyStore();\n  const near = await nearAPI.connect({ headers: {}, keyStore, ...config });\n  const api = new NearApi(near);\n\n  const noLoginKeyStore = new nearAPI.keyStores.InMemoryKeyStore();\n  const noLoginNear = await nearAPI.connect({ headers: {}, keyStore: noLoginKeyStore, ...config });\n  const noLoginApi = new NoLoginApi(noLoginNear);\n  const noLoginTokenApi = new NoLoginTokenApi(noLoginNear);\n\n  const walletConnection = new nearAPI.WalletConnection(near, config.contractName);\n  const signedAccountId = walletConnection.getAccountId();\n  let tokenContractId: string = '';\n  let isAdmin: boolean = false;\n  let depositWhitelist: string[] = [];\n  let daos: string[] = [];\n  try {\n    tokenContractId = await api.getTokenAccountId();\n    depositWhitelist = await api.getDepositWhitelist();\n    console.log('depositWhitelist', depositWhitelist);\n    isAdmin = depositWhitelist.includes(signedAccountId);\n    console.log('isAdmin', isAdmin);\n    const daosCouncilMembers = (await Promise.all(depositWhitelist.map((dwID):Promise<any[]> => daoCouncilMembers(walletConnection, dwID)))).filter((value) => !!value);\n    const userDaosCouncils = daosCouncilMembers.filter((daoCMs) => Object.values(daoCMs).pop().includes(signedAccountId));\n    if (userDaosCouncils?.length > 0) {\n      daos = userDaosCouncils.map((daoCMs) => Object.keys(daoCMs).pop() || '');\n    }\n    console.log('userDaosCouncils', userDaosCouncils);\n    console.log('councilMembers', daosCouncilMembers);\n    console.log('daos', daos);\n  } catch (e) {\n    console.log(e);\n  }\n  const tokenApi = new TokenApi(walletConnection, tokenContractId);\n\n  let isContractFtStoragePaid = false;\n  const lockupContractId = window.location.hash.split('/')[1];\n\n  try {\n    const storageBalance = await tokenApi.storageBalanceOf(lockupContractId);\n    isContractFtStoragePaid = (storageBalance !== null) && true;\n    console.log(isContractFtStoragePaid);\n  } catch (e) {\n    console.log(e);\n  }\n\n  const factoryApi = new FactoryApi(\n    walletConnection,\n    config.factoryContractName,\n  );\n\n  const rpcProvider = new nearAPI.providers.JsonRpcProvider(\n    config.nodeUrl,\n  );\n\n  return {\n    config,\n    api,\n    tokenContractId,\n    noLoginApi,\n    tokenApi,\n    factoryApi,\n    currentUser: {\n      signedIn: !!signedAccountId,\n      isAdmin,\n      isCouncilMember: daos.length > 0,\n      signedAccountId,\n      daos,\n    },\n    noLoginTokenApi,\n    rpcProvider,\n    isContractFtStoragePaid,\n    lockupContractId,\n    near,\n  };\n};\n","import { config } from '../../config';\n\nexport default function About(\n  { lockups, token_account_id }: { lockups: any[], token_account_id: string | null },\n) {\n  return (\n    <div className=\"container\">\n      <h1>About Page</h1>\n\n      <pre>\n        {`\n          This page should render all useful info about contract,\n          at least ft-lockup name, token name, contract ft balance,\n\n          ft-lockup account id: ${config.contractName}\n          token account id: ${token_account_id}\n\n          Total number of lockups: ${lockups.length}\n        `}\n      </pre>\n\n    </div>\n  );\n}\n","import ReactEcharts from 'echarts-for-react';\n\nimport '../../styles/chart.scss';\n\nexport default function Chart({ data }: { data: { vested: any[], unlocked: any[] } }) {\n  const option = {\n    title: {\n      text: '',\n    },\n    tooltip: {\n      trigger: 'axis',\n      axisPointer: {\n        type: 'cross',\n      },\n    },\n    legend: {\n      bottom: '3%',\n      selectedMode: false,\n      icon: 'circle',\n    },\n    grid: {\n      top: '15%',\n      left: '2%',\n      right: '3%',\n      bottom: '15%',\n      containLabel: true,\n    },\n    xAxis: [\n      {\n        type: 'time',\n        boundaryGap: ['1%', '1%'],\n        splitNumber: 15,\n      },\n    ],\n    yAxis: [\n      {\n        type: 'value',\n      },\n    ],\n    series: [\n      {\n        name: 'Vested',\n        type: 'line',\n        color: '#0069D1',\n        areaStyle: {\n          opacity: 1,\n        },\n        markLine: {\n          data: [\n            [\n              { xAxis: new Date(), yAxis: 0 },\n              { xAxis: new Date(), yAxis: 'max' },\n            ],\n          ],\n          lineStyle: {\n            type: 'dashed',\n            color: '#FF594E',\n          },\n          symbol: 'none',\n        },\n        data: data.vested,\n      },\n      {\n        name: 'Unlocked',\n        type: 'line',\n        color: '#00B988',\n        areaStyle: {\n          opacity: 1,\n        },\n        data: data.unlocked,\n      },\n    ],\n  };\n  return <ReactEcharts option={option} />;\n}\n","export default function TokenIcon(params: { url: string, size: number }) {\n  const { url, size } = params;\n  return (\n    <img\n      style={{\n        height: size, width: size, verticalAlign: 'middle',\n      }}\n      src={url}\n      alt=\"Token Icon\"\n    />\n  );\n}\n","import {\n  Table,\n  TableCell,\n  TableHead,\n  TableBody,\n  TableRow,\n} from '@mui/material';\nimport { TSchedule } from '../../services/api';\nimport { TMetadata } from '../../services/tokenApi';\nimport { convertAmount, convertTimestamp } from '../../utils';\nimport TokenIcon from '../TokenIcon';\n\nexport default function ScheduleTable(params: { token: TMetadata, title: String, schedule: TSchedule }) {\n  const { schedule, title, token } = params;\n\n  return (\n    <div className=\"inner-table_wrapper\">\n      <h5>{title}</h5>\n      <Table className=\"inner-table\" size=\"small\" aria-label=\"purchases\">\n        <TableHead>\n          <TableRow>\n            <TableCell>DATE</TableCell>\n            <TableCell align=\"right\">AMOUNT</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {schedule.map((x: any) => (\n            <TableRow key={x.timestamp}>\n              <TableCell component=\"th\" scope=\"row\">\n                {convertTimestamp(x.timestamp)}\n              </TableCell>\n              <TableCell align=\"right\">\n                {convertAmount(x.balance, token.decimals)}\n                &nbsp;\n                {token.symbol}\n                &nbsp;\n                <TokenIcon url={token.icon || ''} size={32} />\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </div>\n  );\n}\n","import { Big } from 'big.js';\nimport { TCheckpoint, TNearTimestamp, TSchedule } from './api';\n\nexport const interpolateRaw = (x0: number, y0: number, x1: number, y1: number, xM: number) : Number => {\n  if (x1 <= x0) {\n    throw new Error('invalid range');\n  }\n  if (xM < x0 || xM >= x1) {\n    throw new Error('xM out of bound');\n  }\n\n  const yM = y0 + (y1 - y0) * (xM - x0) / (x1 - x0);\n\n  return yM;\n};\n\nexport const interpolate = (checkpoint0: TCheckpoint, checkpoint1: TCheckpoint, timestamp: TNearTimestamp) : TCheckpoint => {\n  const balance = interpolateRaw(\n    checkpoint0.timestamp,\n    parseFloat(checkpoint0.balance),\n    checkpoint1.timestamp,\n    parseFloat(checkpoint1.balance),\n    timestamp,\n  );\n\n  return { timestamp, balance: new Big(balance.toString()).toFixed() };\n};\n\nexport const interpolateSchedule = (schedule: TCheckpoint[], timestamp: TNearTimestamp) : TCheckpoint => {\n  if (schedule.length === 0) {\n    throw new Error('empty schedule');\n  }\n\n  if (timestamp < schedule[0].timestamp) {\n    return { timestamp, balance: schedule[0].balance };\n  }\n\n  if (timestamp >= schedule[schedule.length - 1].timestamp) {\n    return { timestamp, balance: schedule[schedule.length - 1].balance };\n  }\n\n  // eslint-disable-next-line no-plusplus\n  for (let i = 0; i < schedule.length - 1; i++) {\n    if (schedule[i + 1].timestamp <= timestamp) {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    return interpolate(schedule[i], schedule[i + 1], timestamp);\n  }\n\n  throw new Error('unreachable');\n};\n\nexport const sumSchedules = (schedules: TSchedule[]) : TSchedule => {\n  if (schedules.length === 0) {\n    throw new Error('schedules is empty');\n  }\n\n  const timestamps = Array.from(new Set(schedules.flat().map((x) => x.timestamp).sort(\n    (x, y) => x - y,\n  )));\n\n  const result: TSchedule = [];\n\n  timestamps.forEach((timestamp:TNearTimestamp) => {\n    let amount = new Big(0);\n    // eslint-disable-next-line no-plusplus\n    for (let i = 0; i < schedules.length; i++) {\n      const balance = new Big(interpolateSchedule(schedules[i], timestamp).balance);\n      amount = amount.plus(balance);\n    }\n    result.push({ timestamp, balance: amount.toString() });\n  });\n\n  return result;\n};\n\nexport const assertValidTerminationSchedule = (lockupSchedule: TSchedule, vestingSchedule: TSchedule) => {\n  lockupSchedule.forEach((checkpoint) => {\n    const { timestamp } = checkpoint;\n    const lockupBalance = checkpoint.balance;\n    const vestingBalance = interpolateSchedule(vestingSchedule, timestamp).balance;\n    if (!(new Big(lockupBalance).lte(new Big(vestingBalance)))) {\n      throw new Error(`The lockup schedule is ahead of the termination schedule at timestamp ${timestamp}`);\n    }\n  });\n  vestingSchedule.forEach((checkpoint) => {\n    const { timestamp } = checkpoint;\n    const lockupBalance = interpolateSchedule(lockupSchedule, timestamp).balance;\n    const vestingBalance = checkpoint.balance;\n    if (!(new Big(lockupBalance).lte(new Big(vestingBalance)))) {\n      throw new Error(`The lockup schedule is ahead of the termination schedule at timestamp ${timestamp}`);\n    }\n  });\n};\n","import {\n  TSchedule, TNearTimestamp, TNearAmount, TCheckpoint,\n} from './api';\nimport { convertAmount } from '../utils';\nimport { sumSchedules } from './scheduleHelpers';\n\nconst buildVestedSchedule = (from: TNearTimestamp, balance: TNearAmount) => [\n  { timestamp: from - 1, balance: '0' },\n  { timestamp: from, balance },\n];\n\nexport const chartData = (lockupsList: any[], tokenDecimals: number): any => {\n  const lockupSchedules = Array.from(\n    lockupsList.map((x) => x.schedule),\n  ) as TSchedule[];\n\n  const now = Math.round(new Date().getTime() / 1000);\n  const minTimestampsLockup = lockupsList.map((x) => x.schedule[0].timestamp);\n  const minTimestampsVesting = lockupsList.map((x) => x?.termination_config?.vesting_schedule[0]?.timestamp).filter((x) => x);\n\n  const minTimestamp = Math.min(...minTimestampsLockup, ...minTimestampsVesting, now);\n\n  const vestingSchedules = Array.from(\n    lockupsList.map((x) => {\n      // for lockups and drafts\n      const result = x?.termination_config?.vesting_schedule?.Schedule\n        || x?.vesting_schedule?.Schedule;\n      if (result) return result;\n      return result || buildVestedSchedule(minTimestamp, x.schedule[x.schedule.length - 1].balance);\n    }),\n  ) as TSchedule[];\n\n  const sumVesting = sumSchedules(vestingSchedules);\n  const sumLockup = sumSchedules(lockupSchedules);\n\n  if (sumVesting[sumVesting.length - 1]?.timestamp !== sumLockup[sumLockup.length - 1].timestamp) {\n    sumVesting.push(sumLockup[sumLockup.length - 1]);\n  }\n\n  const convertSchedule = (schedule: TSchedule, decimals: number) => schedule.map((s: TCheckpoint) => [s.timestamp * 1000, convertAmount(s.balance, decimals)]);\n\n  return {\n    unlocked: lockupsList.length ? convertSchedule(sumLockup, tokenDecimals) : [],\n    vested: lockupsList.length ? convertSchedule(sumVesting, tokenDecimals) : [],\n  };\n};\n\nexport default chartData;\n","import BN from 'bn.js';\nimport Big from 'big.js';\nimport { assertValidTerminationSchedule } from './scheduleHelpers';\n\n// TODO: replace with cleaner hack or another library\nBN.prototype.toJSON = function toJSON() {\n  return this.toString();\n};\n\nconst prefixErrorWith = (prefix: string, callback: () => any) => {\n  try {\n    return callback();\n  } catch (e) {\n    if (!(e instanceof Error)) throw new Error('unreachable');\n    e.message = `${prefix}: ${e.message}`;\n    throw e;\n  }\n};\n\nexport const parseSpreadsheetColumns = (input: string): any[] => {\n  const colSep = '\\t';\n  const rowSep = '\\n';\n  const lines = input.trim().split(rowSep);\n  if (lines.length <= 1) {\n    return [];\n  }\n  const table = lines.map((line) => line.split(colSep).map((x) => x.trim()));\n  const [columns, ...rowsSplit] = table;\n\n  const rowsParsed = rowsSplit.map((row) => Object.fromEntries(\n    columns.map((col, colIdx) => [col, row[colIdx] || '']),\n  ));\n\n  return rowsParsed;\n};\n\ntype NearAccountId = string;\n\nexport const parseValidAccountId = (accountId: string): ValidAccountId => {\n  let isValid = true;\n  if (accountId.length < 2) isValid = false;\n  if (accountId.length > 64) isValid = false;\n  if (!accountId.match(/^[a-z0-9._-]+$/)) isValid = false;\n\n  if (isValid) {\n    return accountId;\n  }\n  throw new Error('invalid near account id');\n};\n\ntype TokenAmount = string;\n\nexport const parseTokenAmount = (amount: string): TokenAmount => {\n  if (amount.match(/^[0-9]+(\\.[0-9]+)?$/)) {\n    return amount;\n  }\n  throw new Error('invalid token amount');\n};\n\nexport const parseTimestamp = (timestamp: string): Date => {\n  if (!timestamp.match(/\\d\\d\\d\\d-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\dZ/)) {\n    throw new Error('invalid timestamp');\n  }\n  const result = new Date(timestamp);\n  if (Number.isNaN(result.getTime())) {\n    throw new Error('invalid timestamp');\n  }\n\n  return result;\n};\n\ntype IsoDuration = {\n  year: number,\n  month: number,\n  week: number,\n  day: number,\n  hour: number,\n  minute: number,\n  second: number,\n};\n\nexport const parseDuration = (input: string): IsoDuration => {\n  // const pattern = /^(P(\\d+Y)?(\\d+M)?(\\d+D)?T(\\d+H)?(\\d+M)?(\\d+S)?|P(\\d+W))$/;\n  const pattern = /^P(((((?<year>\\d+)Y)?((?<month>\\d+)M)?((?<day>\\d+)D)?)(T((?<hour>\\d+)H)?((?<minute>\\d+)M)?((?<second>\\d+)S)?)?)|((?<week>\\d+)W)?)$/;\n  const match = input.match(pattern);\n  if (!match) {\n    throw new Error('invalid duration');\n  }\n\n  const groups = match && match.groups || {};\n  const result = {\n    year: parseInt(groups.year, 10) || 0,\n    month: parseInt(groups.month, 10) || 0,\n    week: parseInt(groups.week, 10) || 0,\n    day: parseInt(groups.day, 10) || 0,\n    hour: parseInt(groups.hour, 10) || 0,\n    minute: parseInt(groups.minute, 10) || 0,\n    second: parseInt(groups.second, 10) || 0,\n  };\n\n  return result;\n};\n\ntype CliffInfo = {\n  duration: IsoDuration,\n  percentage: number,\n};\n\nconst parsePercentage = (input: string): number => {\n  if (!(input.match(/^\\d+$/))) {\n    throw new Error('invalid cliff percentage');\n  }\n\n  const percentage = parseInt(input, 10);\n\n  if (percentage < 0 || percentage > 100) {\n    throw new Error('invalid cliff percentage');\n  }\n\n  return percentage;\n};\n\nexport const parseCliffInfo = (input: string): CliffInfo => {\n  const parts = input.split(':');\n  if (parts.length !== 2) {\n    throw new Error('expected 2 parts');\n  }\n  const [durationRaw, percentageRaw] = parts;\n  const duration = parseDuration(durationRaw);\n  const percentage = prefixErrorWith('percentage', () => parsePercentage(percentageRaw));\n  return { duration, percentage };\n};\n\ntype HumanFriendlySchedule = {\n  timestampStart: Date,\n  durationTotal: IsoDuration,\n  durationCliff: IsoDuration,\n  percentageCliff: number,\n  releaseEvery: IsoDuration,\n};\n\nexport const parseHumanFriendlySchedule = (schedule: string): HumanFriendlySchedule => {\n  const parts = schedule.split('|');\n  if (parts.length !== 4) {\n    throw new Error('invalid human friendly schedule, expected 4 parts');\n  }\n\n  const [\n    timestampStartRaw,\n    durationTotalRaw,\n    cliffInfoRaw,\n    releaseEveryRaw,\n  ] = parts;\n\n  const timestampStart = prefixErrorWith('start timestamp', () => parseTimestamp(timestampStartRaw));\n  const durationTotal = prefixErrorWith('duration', () => parseDuration(durationTotalRaw));\n  const cliffInfo = prefixErrorWith('cliff', () => parseCliffInfo(cliffInfoRaw));\n  const releaseEvery = prefixErrorWith('release every', () => parseDuration(releaseEveryRaw));\n\n  return {\n    timestampStart,\n    durationTotal,\n    durationCliff: cliffInfo.duration,\n    percentageCliff: cliffInfo.percentage,\n    releaseEvery,\n  };\n};\n\ntype RawSpreadsheetRow = any;\n\ntype SpreadsheetRow = {\n  account_id: NearAccountId,\n  amount: TokenAmount,\n  lockup_schedule: HumanFriendlySchedule,\n  vesting_schedule: HumanFriendlySchedule | null,\n};\n\nexport const parseToSpreadsheetRow = (input: RawSpreadsheetRow): SpreadsheetRow => {\n  const allowedKeys = ['account_id', 'amount', 'lockup_schedule', 'vesting_schedule'];\n  Object.keys(input).forEach((key) => {\n    if (!allowedKeys.includes(key)) {\n      throw new Error(`unknown column '${key}'`);\n    }\n  });\n\n  if (!input.account_id) throw new Error(\"column 'account_id' not found\");\n  const accountId = parseValidAccountId(input.account_id);\n\n  if (!input.amount) throw new Error(\"column 'amount' not found\");\n  const amount = parseTokenAmount(input.amount);\n\n  if (!input.lockup_schedule) throw new Error(\"column 'lockup_schedule' not found\");\n  const lockupSchedule = prefixErrorWith('lockup schedule', () => parseHumanFriendlySchedule(input.lockup_schedule));\n  let vestingSchedule = null;\n\n  if (input.vesting_schedule) {\n    vestingSchedule = prefixErrorWith('vesting schedule', () => parseHumanFriendlySchedule(input.vesting_schedule));\n  }\n\n  return {\n    account_id: accountId,\n    amount,\n    lockup_schedule: lockupSchedule,\n    vesting_schedule: vestingSchedule,\n  };\n};\n\nexport const parseSpreadsheetToSpreadsheetRows = (input: string): SpreadsheetRow[] => {\n  const parsedStringRows = parseSpreadsheetColumns(input);\n\n  return parsedStringRows.map((x) => parseToSpreadsheetRow(x));\n};\n\ntype ValidAccountId = string;\ntype TimestampSec = number;\ntype Balance = string;\ntype Checkpoint = {\n  timestamp: TimestampSec,\n  balance: Balance,\n};\ntype Schedule = Checkpoint[];\n\nexport const datePlusDurationMul = (date: Date, duration: IsoDuration, mulInput: number): Date => {\n  const mul = Math.floor(mulInput);\n  const result = new Date(Date.UTC(\n    date.getUTCFullYear() + duration.year * mul,\n    date.getUTCMonth() + duration.month * mul,\n    date.getUTCDate() + (duration.week * 7 + duration.day) * mul,\n    date.getUTCHours() + duration.hour * mul,\n    date.getUTCMinutes() + duration.minute * mul,\n    date.getUTCSeconds() + duration.second * mul,\n  ));\n  return result;\n};\n\nexport const toUnix = (date: Date | string) => Math.floor(new Date(date).getTime() / 1000);\n\nexport const toLockupSchedule = (schedule: HumanFriendlySchedule, inputTotalAmount: TokenAmount, tokenDecimals: number): Schedule => {\n  if (!(tokenDecimals >= 0 && tokenDecimals === Math.floor(tokenDecimals))) {\n    throw new Error('invalid token decimals');\n  }\n  const decimalsMultiplier = new Big(10).pow(tokenDecimals);\n\n  const { timestampStart } = schedule;\n  const timestampCliff = datePlusDurationMul(timestampStart, schedule.durationCliff, 1);\n  const timestampPreCliff = datePlusDurationMul(timestampCliff, parseDuration('PT1S'), -1);\n  const timestampFinish = datePlusDurationMul(timestampStart, schedule.durationTotal, 1);\n\n  // clone normalizes internal structure, needed for unit test equality\n  const totalAmount = new BN(new Big(inputTotalAmount).mul(decimalsMultiplier).round(0, Big.roundDown).toString());\n  const cliffAmount = new BN(totalAmount).muln(schedule.percentageCliff).divn(100).clone();\n\n  if (cliffAmount.gt(totalAmount)) {\n    throw new Error('error: cliffAmount > totalAmount');\n  }\n  if (timestampCliff > timestampFinish) {\n    throw new Error('error: timestampCliff > timestampFinish');\n  }\n  if (timestampCliff < timestampStart) {\n    throw new Error('error: timestampPreCliff < timestampStart');\n  }\n\n  const { releaseEvery } = schedule;\n\n  const tmCliff = timestampCliff;\n  const tmFirstStep = datePlusDurationMul(timestampCliff, releaseEvery, 1);\n  if (toUnix(tmFirstStep) <= toUnix(tmCliff)) {\n    throw new Error('invalid releaseEvery, zero duration');\n  }\n  if (toUnix(tmFirstStep) - toUnix(tmCliff) === 1) { // linear unlock during cliff\n    const cpStart = { timestamp: toUnix(timestampStart), balance: new BN('0').toString() };\n    const cpPreCliff = { timestamp: toUnix(timestampPreCliff), balance: new BN('0').toString() };\n    const cpCliff = { timestamp: toUnix(timestampCliff), balance: cliffAmount.toString() };\n    const cpFinish = { timestamp: toUnix(timestampFinish), balance: totalAmount.toString() };\n\n    const result = [];\n    result.unshift(cpFinish);\n    if (cpCliff.timestamp < cpFinish.timestamp) {\n      result.unshift(cpCliff);\n    }\n    result.unshift(cpPreCliff);\n    if (cpStart.timestamp < cpPreCliff.timestamp) {\n      result.unshift(cpStart);\n    }\n\n    return result;\n  }\n\n  const tms = [];\n  {\n    // otherwise: use steps\n    let tm = timestampCliff;\n    const maxSteps = 500;\n    for (;;) {\n      if (tm >= timestampFinish) {\n        tm = timestampFinish;\n        tms.push(tm);\n        break;\n      }\n      tms.push(tm);\n      tm = datePlusDurationMul(tm, releaseEvery, 1);\n      if (tms.length >= maxSteps) {\n        throw new Error('too many checkpoints for schedule');\n      }\n    }\n  }\n\n  const increment = totalAmount.sub(cliffAmount).divn(tms.length - 1);\n\n  const cps: Checkpoint[] = tms.flatMap((tm, i) => {\n    if (tms.length === 1) {\n      return [{ timestamp: toUnix(timestampFinish), balance: totalAmount.toString() }];\n    }\n    if (i === 0) {\n      return [{ timestamp: toUnix(tm), balance: cliffAmount.toString() }];\n    }\n    const stepBalance = i === tms.length - 1\n      ? totalAmount\n      : cliffAmount.add(increment.muln(i)).toString();\n    return [\n      { timestamp: toUnix(tm) - 1, balance: cliffAmount.add(increment.muln(i - 1)).toString() },\n      { timestamp: toUnix(tm), balance: stepBalance.toString() },\n    ];\n  });\n\n  const cpsStart: Checkpoint[] = [];\n  const cpStart = { timestamp: toUnix(timestampStart), balance: new BN('0').toString() };\n  const cpPreCliff = { timestamp: toUnix(timestampPreCliff), balance: new BN('0').toString() };\n\n  cpsStart.unshift(cpPreCliff);\n  if (cpStart.timestamp < cpPreCliff.timestamp) {\n    cpsStart.unshift(cpStart);\n  }\n\n  const result = cpsStart.concat(cps);\n  return result;\n};\n\nexport type Lockup = {\n  id: number,\n  account_id: ValidAccountId,\n  schedule: Schedule,\n  vesting_schedule: { Schedule: Schedule } | null,\n};\n\nexport const parseLockup = (rawSpreadsheetRow: RawSpreadsheetRow, tokenDecimals: number, index: number): Lockup => {\n  const row = parseToSpreadsheetRow(rawSpreadsheetRow);\n\n  const lockupSchedule = toLockupSchedule(row.lockup_schedule, row.amount, tokenDecimals);\n  let vestingSchedulePacked = null;\n\n  if (row.vesting_schedule) {\n    const vestingSchedule = toLockupSchedule(row.vesting_schedule, row.amount, tokenDecimals);\n    assertValidTerminationSchedule(lockupSchedule, vestingSchedule);\n    vestingSchedulePacked = { Schedule: vestingSchedule };\n  }\n\n  return {\n    id: index,\n    account_id: row.account_id,\n    schedule: lockupSchedule,\n    vesting_schedule: vestingSchedulePacked,\n  };\n};\n\nexport const parseRawSpreadsheetInput = (spreadsheetInput: string, tokenDecimals: number): Lockup[] => {\n  const rows = parseSpreadsheetColumns(spreadsheetInput);\n  return rows.map((x, index: number) => parseLockup(x, tokenDecimals, index));\n};\n\nexport type TLockupOrError = Lockup | Error;\n\nexport const parseRawSpreadsheetInputWithErrors = (spreadsheetInput: string, tokenDecimals: number): TLockupOrError[] => {\n  const rows = parseSpreadsheetColumns(spreadsheetInput);\n  return rows.map((x, index: number) => {\n    try {\n      return parseLockup(x, tokenDecimals, index);\n    } catch (e) {\n      if (e instanceof Error) {\n        return e;\n      }\n      throw new Error('unreachable');\n    }\n  });\n};\n\nexport const lockupTotalBalance = (lockup: Lockup): Balance => lockup.schedule[lockup.schedule.length - 1].balance;\n","import { useState, useContext } from 'react';\nimport {\n  Collapse,\n  IconButton,\n  TableCell,\n  TableRow,\n  Tooltip,\n} from '@mui/material';\nimport { Big } from 'big.js';\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp';\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\nimport { Link, useLocation } from 'react-router-dom';\nimport LinkIcon from '@mui/icons-material/Link';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { useSnackbar } from 'notistack';\n\nimport Chart from '../Chart';\nimport { convertAmount, convertTimestamp } from '../../utils';\nimport { INearProps, NearContext } from '../../services/near';\nimport { TMetadata } from '../../services/tokenApi';\nimport TokenIcon from '../TokenIcon';\nimport ScheduleTable from '../ScheduleTable';\nimport { chartData } from '../../services/chartHelpers';\nimport { lockupTotalBalance } from '../../services/spreadsheetImport';\nimport { interpolateSchedule } from '../../services/scheduleHelpers';\n\ntype TBalancesRaw = {\n  claimed: string,\n  unclaimed: string,\n  vested: string,\n  unvested: string,\n  total: string,\n};\n\nconst calcBalancesRaw = (row: any, now: number): TBalancesRaw => {\n  const totalBalanceRaw = row.schedule[row.schedule.length - 1].balance;\n  const claimedBalanceRaw = '0';\n\n  const m1 = interpolateSchedule;\n  const m2 = lockupTotalBalance;\n  console.log(m1, m2);\n\n  const unclaimedBalanceRaw = interpolateSchedule(row.schedule, now).balance;\n  let vestedBalanceFullRaw = null;\n  const vestingSchedule = row.vesting_schedule?.Schedule;\n  if (vestingSchedule) {\n    vestedBalanceFullRaw = interpolateSchedule(vestingSchedule, now).balance;\n  } else {\n    vestedBalanceFullRaw = lockupTotalBalance(row);\n  }\n  const vestedBalanceRaw = new Big(vestedBalanceFullRaw)\n    .sub(new Big(claimedBalanceRaw))\n    .sub(new Big(unclaimedBalanceRaw))\n    .toString();\n  const unvestedBalanceRaw = new Big(totalBalanceRaw)\n    .sub(new Big(vestedBalanceFullRaw))\n    .toString();\n  console.log(totalBalanceRaw, claimedBalanceRaw, unclaimedBalanceRaw, vestedBalanceRaw, unvestedBalanceRaw);\n\n  return {\n    claimed: claimedBalanceRaw,\n    unclaimed: unclaimedBalanceRaw,\n    vested: vestedBalanceRaw,\n    unvested: unvestedBalanceRaw,\n    total: totalBalanceRaw,\n  };\n};\n\nexport default function DraftsTableRow(props: { row: ReturnType<any>, token: TMetadata, adminControls: boolean, progressShow: boolean }) {\n  const location = useLocation();\n  const [open, setOpen] = useState(false);\n  const {\n    row, token, adminControls, progressShow,\n  } = props;\n  const { enqueueSnackbar } = useSnackbar();\n  const {\n    near,\n  }: {\n    near: INearProps | null\n  } = useContext(NearContext);\n\n  const [now, _setNow] = useState<number>(Math.floor(new Date().getTime() / 1000));\n\n  if (!near) return null;\n\n  if (row instanceof Error) {\n    return (\n      <TableRow>\n        <TableCell style={{ padding: 0 }} colSpan={8}>\n          <div className=\"row-error\">\n            {row.message}\n          </div>\n        </TableCell>\n      </TableRow>\n    );\n  }\n\n  const vestingSchedule = row?.vesting_schedule?.Schedule;\n\n  const currentContractName = location.pathname.split('/')[1];\n\n  const selectedDraftId = location.pathname.split('/').pop() === row.id.toString();\n  const draftPage = location.pathname.split('/').includes('drafts');\n  const importDraftPage = location.pathname.split('/').includes('import_draft_group');\n\n  const balancesRaw = calcBalancesRaw(row, now);\n\n  return (\n    <>\n      <TableRow className={open ? 'expanded exp-row' : 'exp-row'} sx={{ '& > *': { borderBottom: 'unset' } }}>\n        <TableCell>\n          <IconButton\n            aria-label=\"expand row\"\n            size=\"small\"\n            onClick={() => setOpen(!open)}\n          >\n            {open ? <KeyboardArrowUpIcon /> : <KeyboardArrowDownIcon />}\n          </IconButton>\n        </TableCell>\n        <TableCell align=\"left\">\n          {selectedDraftId && draftPage || importDraftPage\n            ? row.id\n            : (\n              <Link\n                to={adminControls\n                  ? `/${currentContractName}/admin/drafts/${row.id}`\n                  : `/${currentContractName}/drafts/${row.id}`}\n              >\n                {row.id}\n              </Link>\n            )}\n          {!importDraftPage && (\n          <CopyToClipboard\n            text={`${window.location.origin}/#/${currentContractName}/drafts/${row.id}`}\n            onCopy={() => enqueueSnackbar('Copied', { variant: 'success', autoHideDuration: 1000 })}\n          >\n            <IconButton aria-label=\"copy link\">\n              <LinkIcon />\n            </IconButton>\n          </CopyToClipboard>\n          )}\n        </TableCell>\n        <TableCell align=\"left\">\n          {row.account_id}\n        </TableCell>\n        <TableCell align=\"right\">\n          {convertTimestamp(row.schedule[0].timestamp)}\n        </TableCell>\n        <TableCell align=\"right\">\n          {convertTimestamp(row.schedule[row.schedule.length - 1].timestamp)}\n        </TableCell>\n        <TableCell align=\"right\">\n          {convertAmount(balancesRaw.total, token.decimals)}\n          &nbsp;\n          {token.symbol}\n          &nbsp;\n          <TokenIcon url={token.icon || ''} size={32} />\n        </TableCell>\n        {progressShow && (\n        <TableCell align=\"center\">\n          <Tooltip\n            title={(\n              <div className=\"progress-bar__tooltip\">\n                <span>\n                  <i className=\"claimed\">&nbsp;</i>\n                  <b>{convertAmount(balancesRaw.claimed, token.decimals)}</b>\n                  {' '}\n                  Claimed\n                </span>\n                <span>\n                  <i className=\"available\">&nbsp;</i>\n                  <b>{convertAmount(balancesRaw.unclaimed, token.decimals)}</b>\n                  {' '}\n                  Available\n                </span>\n                <span>\n                  <i className=\"vested\">&nbsp;</i>\n                  <b>{convertAmount(balancesRaw.vested, token.decimals)}</b>\n                  {' '}\n                  Vested\n                </span>\n                <span>\n                  <i className=\"unvested\">&nbsp;</i>\n                  <b>{convertAmount(balancesRaw.unvested, token.decimals)}</b>\n                  {' '}\n                  Unvested\n                </span>\n              </div>\n)}\n            placement=\"top\"\n            arrow\n          >\n            <div className=\"progress-bar\">\n              <div style={{ width: `${(parseFloat(balancesRaw.claimed) / parseFloat(balancesRaw.total)) * 100}%` }} className=\"claimed\">\n                &nbsp;\n              </div>\n              <div style={{ width: `${(parseFloat(balancesRaw.unclaimed) / parseFloat(balancesRaw.total)) * 100}%` }} className=\"available\">\n                &nbsp;\n              </div>\n              <div style={{ width: `${(parseFloat(balancesRaw.vested) / parseFloat(balancesRaw.total)) * 100}%` }} className=\"vested\">\n                &nbsp;\n              </div>\n              <div style={{ width: `${(parseFloat(balancesRaw.unvested) / parseFloat(balancesRaw.total)) * 100}%` }} className=\"unvested\">\n                &nbsp;\n              </div>\n            </div>\n          </Tooltip>\n        </TableCell>\n        )}\n      </TableRow>\n      <TableRow sx={{ background: '#F4F7FC' }}>\n        <TableCell style={{ padding: 0 }} colSpan={8}>\n          <Collapse in={open} timeout=\"auto\" unmountOnExit>\n            <div className=\"lockup-row\">\n              <div style={{ display: 'flex', gap: 20 }}>\n                <ScheduleTable schedule={row.schedule} title=\"Lockup schedule\" token={token} />\n                {vestingSchedule && (\n                  <ScheduleTable schedule={vestingSchedule} title=\"Vesting schedule\" token={token} />\n                )}\n                <div style={{ flex: 1 }}>\n                  <div style={{ height: 300 }}>\n                    <Chart data={chartData([row], token.decimals)} />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </Collapse>\n        </TableCell>\n      </TableRow>\n    </>\n  );\n}\n","import {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n} from '@mui/material';\nimport { TMetadata } from '../../services/tokenApi';\nimport DraftsTableRow from './row';\n\nexport default function DraftsTable({\n  lockups, token, adminControls, progressShow,\n}: { lockups: any[], token: TMetadata, adminControls: boolean, progressShow: boolean }) {\n  return (\n    <Table className=\"main-table\" aria-label=\"collapsible table\">\n      <TableHead className=\"table-head\">\n        {lockups.length > 0 && (\n        <TableRow>\n          <TableCell />\n          <TableCell align=\"left\">ID</TableCell>\n          <TableCell align=\"left\">Account ID</TableCell>\n          <TableCell align=\"right\">Start&nbsp;date</TableCell>\n          <TableCell align=\"right\">End&nbsp;date</TableCell>\n          <TableCell align=\"right\">Total&nbsp;amount</TableCell>\n          {progressShow && <TableCell align=\"center\">Progress</TableCell>}\n        </TableRow>\n        )}\n      </TableHead>\n      <TableBody>\n        {lockups.map((lockup) => (\n          <DraftsTableRow key={lockup.id} row={lockup} token={token} adminControls={adminControls} progressShow={progressShow} />\n        ))}\n      </TableBody>\n    </Table>\n  );\n}\n","import { TMetadata } from '../../services/tokenApi';\nimport TokenIcon from '../TokenIcon';\n\nexport default function TokenAmountPreview(params: { token: TMetadata, amount: String }) {\n  const { token, amount } = params;\n\n  return (\n    <div className=\"token-info\">\n      <div className=\"token-amount\">\n        {amount}\n        {' '}\n        {token.symbol}\n      </div>\n      <TokenIcon url={token.icon || ''} size={32} />\n    </div>\n  );\n}\n","import { TextareaAutosize } from '@mui/material';\nimport { useContext, useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useSnackbar } from 'notistack';\nimport Big from 'big.js';\n\nimport DraftsTable from '../DraftsTable';\nimport {\n  parseRawSpreadsheetInputWithErrors, TLockupOrError, Lockup, lockupTotalBalance,\n} from '../../services/spreadsheetImport';\nimport TokenAmountPreview from '../TokenAmountPreview';\nimport { TMetadata } from '../../services/tokenApi';\nimport { INearProps, NearContext } from '../../services/near';\nimport { convertAmount } from '../../utils';\n\nfunction ImportDraftGroup({ token, adminControls }: { token: TMetadata, adminControls: boolean }) {\n  const location = useLocation();\n  const { near }: { near: INearProps | null } = useContext(NearContext);\n\n  const [data, setData] = useState<TLockupOrError[]>([]);\n  const [parseErrors, setParseErrors] = useState<Error[]>([]);\n  const [importProgress, setImportProgress] = useState<boolean>(false);\n\n  const handleChangeInput = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    try {\n      if (!near?.currentUser?.signedAccountId) {\n        throw new Error('expected present signedAccountId');\n      }\n      console.log(token);\n      const input = event.target.value;\n      const lockups = parseRawSpreadsheetInputWithErrors(input, token.decimals);\n      const errorsFiltered = lockups.filter((x) => x instanceof Error).map((x) => x as Error);\n      setData(lockups);\n      setParseErrors(errorsFiltered);\n    } catch (e) {\n      if (e instanceof Error) {\n        setData([]);\n        setParseErrors([e]);\n        console.log(e);\n      }\n    }\n  };\n\n  const navigate = useNavigate();\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const withNotification = async (name: string, func: () => any): Promise<any> => {\n    try {\n      const result = await func();\n      return result;\n    } catch (e) {\n      enqueueSnackbar(`${name} failed with error: '${e}'`, { variant: 'error' });\n      throw e;\n    }\n  };\n\n  const handleClickImport = async () => {\n    try {\n      if (!near) {\n        throw new Error('near is null');\n      }\n      setImportProgress(true);\n      const draftGroupId = await withNotification(\n        'Create draft group',\n        async () => {\n          const result = await near.api.createDraftGroup();\n          return result;\n        },\n      );\n      const msg = `Created draft group id: ${draftGroupId}`;\n      enqueueSnackbar(msg, { variant: 'success' });\n\n      const chunkSize = 20;\n      for (let i = 0; i < data.length; i += chunkSize) {\n        const chunk = data.slice(i, i + chunkSize);\n        const drafts = chunk.map((lockup) => ({\n          draft_group_id: draftGroupId,\n          lockup_create: lockup,\n        }));\n        await withNotification(\n          'Create drafts',\n          async () => {\n            const result = await near.api.createDrafts(drafts);\n            return result;\n          },\n        );\n      }\n\n      const message = `Created ${data.length} draft${data.length > 1 ? 's' : ''}.`;\n      enqueueSnackbar(message, { variant: 'success' });\n\n      const currentContractName = location.pathname.split('/')[1];\n      const path = `/${currentContractName}/admin/draft_groups/${draftGroupId}`;\n\n      navigate(path);\n    } catch (e) {\n      setImportProgress(false);\n    }\n  };\n\n  const calcTotalBalance = (lockups: TLockupOrError[]) => {\n    const lockupsFiltered = lockups.filter((x: TLockupOrError) => !(x instanceof Error)).map((x) => x as Lockup);\n    const balances = lockupsFiltered.map((x: Lockup) => lockupTotalBalance(x));\n    let result = new Big('0');\n\n    balances.forEach((x) => {\n      result = result.add(new Big(x));\n    });\n    return result.toString();\n  };\n\n  const totalBalance = convertAmount(calcTotalBalance(data), token.decimals);\n\n  return (\n    <div className=\"main\">\n      <div className=\"container\">\n        <h2>\n          Import Draft Group\n        </h2>\n\n        <div className=\"import-draft-group-wrapper\">\n          <div className=\"draft-group-preview-inner\">\n            <div className=\"draft-group-preview-info\" style={{ display: 'flex' }}>\n              <h5>\n                {`New draft group with ${data.length} lockup${data.length > 1 ? 's' : ''}`}\n                {' '}\n                {parseErrors.length > 0 && (<span className=\"parse-error-label\">{`${parseErrors.length} parse error${parseErrors.length > 1 ? 's' : ''}`}</span>)}\n              </h5>\n              <TokenAmountPreview token={token} amount={totalBalance} />\n            </div>\n          </div>\n\n          <p>\n            Copy lockups from a spreadsheet editor and paste into the area below.\n            See\n            {' '}\n            <a href={`${process.env.PUBLIC_URL}/lockup_import_example.xlsx`}>\n              example and format specifications\n            </a>\n            .\n          </p>\n          <TextareaAutosize\n            className=\"import-draft-group-textarea\"\n            id=\"spreadsheet-input\"\n            placeholder=\"Excel input\"\n            maxRows={5}\n            onChange={handleChangeInput}\n          />\n        </div>\n        <DraftsTable lockups={data} token={token} adminControls={adminControls} progressShow />\n        <button\n          disabled={!(data.length >= 1 && parseErrors.length === 0 && !importProgress)}\n          onClick={handleClickImport}\n          type=\"button\"\n          className=\"button\"\n        >\n          Import\n        </button>\n      </div>\n    </div>\n  );\n}\nexport default ImportDraftGroup;\n","import { useContext } from 'react';\nimport { INearProps, NearContext } from '../../services/near';\n\nfunction FundButton(props: { draftGroupIndex: number | undefined, amount: string | undefined }) {\n  const { near }: { near: INearProps | null } = useContext(NearContext);\n  const { draftGroupIndex, amount } = props;\n\n  if (!near) {\n    throw Error('Cannot access lockup api');\n  }\n\n  if (draftGroupIndex === undefined) {\n    throw Error('Cannot fund draft group without index');\n  }\n\n  if (amount === undefined) {\n    throw Error('Cannot fund draft group without specified amount');\n  }\n\n  const handleFund = () => {\n    near.tokenApi.fundDraftGroup(\n      near.api.getContract().contractId,\n      draftGroupIndex,\n      amount,\n    );\n  };\n\n  return (\n    <button className=\"button\" type=\"button\" onClick={handleFund}>Fund</button>\n  );\n}\n\nexport default FundButton;\n","import { useContext } from 'react';\n\nimport Select from '@mui/material/Select';\n\nimport {\n  TextField,\n  InputLabel,\n  MenuItem,\n} from '@mui/material';\n\nimport { INearProps, NearContext } from '../../../services/near';\n\ntype TProps = {\n  selectedAddress: string,\n  setSelectedAddress: Function,\n};\n\nfunction DaoSelector({ selectedAddress, setSelectedAddress }: TProps): any {\n  const { near }: { near: INearProps | null } = useContext(NearContext);\n\n  if (!near) {\n    throw Error('Cannot access lockup api');\n  }\n\n  const { daos } = near.currentUser;\n\n  if (daos.length > 0 && (selectedAddress === '' || !daos.includes(selectedAddress))) {\n    setSelectedAddress(daos[0]);\n  }\n\n  const handleSelectedDaoAddressChange = (event: any) => {\n    setSelectedAddress(event.target.value as string);\n  };\n\n  if (daos.length > 0) {\n    return (\n      <div>\n        <InputLabel>Select DAO contract address</InputLabel>\n        <Select\n          required\n          sx={{ marginBottom: 3, width: 1 }}\n          value={selectedAddress}\n          onChange={handleSelectedDaoAddressChange}\n        >\n          {daos.map((dao) => <MenuItem value={dao}>{dao}</MenuItem>)}\n        </Select>\n      </div>\n    );\n  }\n\n  return (\n    <TextField\n      required\n      sx={{ marginBottom: 3, width: 1 }}\n      id=\"outlined-helperText\"\n      label=\"DAO contract address\"\n      onChange={handleSelectedDaoAddressChange}\n    />\n  );\n}\n\nexport default DaoSelector;\n","import {\n  TextField,\n} from '@mui/material';\n\ntype TProps = {\n  proposalDescription: string,\n  setProposalDescription: Function,\n};\n\nfunction DaoProposalDescription({ proposalDescription, setProposalDescription }: TProps): any {\n  const handleDescriptionChange = (e: any) => {\n    setProposalDescription(e.target.value as string);\n  };\n\n  return (\n    <TextField\n      sx={{ width: 1 }}\n      id=\"outlined-multiline-static\"\n      label=\"Proposal description\"\n      multiline\n      minRows={5}\n      onChange={handleDescriptionChange}\n      defaultValue={proposalDescription}\n    />\n  );\n}\n\nexport default DaoProposalDescription;\n","import { useContext, useState } from 'react';\nimport {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  IconButton,\n} from '@mui/material';\n\nimport CloseRoundedIcon from '@mui/icons-material/CloseRounded';\n\nimport { INearProps, NearContext } from '../../services/near';\nimport { buildFundDraftGroupProposalLink } from '../../services/DAOs/astroDAO/utils';\n\nimport DaoSelector from '../WithDao/DaoSelector';\nimport DaoProposalDescription from '../WithDao/DaoProposalDescription';\n\nfunction FundWithDaoButton(props: { draftGroupIndex: number | undefined, amount: any }) {\n  const { near }: { near: INearProps | null } = useContext(NearContext);\n  const { draftGroupIndex, amount } = props;\n\n  const defaultDescription = `Fund draft group ${draftGroupIndex} with amount ${amount?.label}. Draft group link: ${window.location.href.replace(/\\/admin/, '')}`;\n  const [description, setDescription] = useState(defaultDescription);\n  const [astroDAOContractAddress, setAstroDAOContractAddress] = useState('');\n\n  const [open, setOpen] = useState(false);\n  const handleOpen = () => setOpen(true);\n  const handleClose = () => setOpen(false);\n\n  if (!near) {\n    throw Error('Cannot access lockup api');\n  }\n\n  if (draftGroupIndex === undefined) {\n    throw Error('Cannot fund draft group without index');\n  }\n\n  if (amount?.value === undefined) {\n    throw Error('Cannot fund draft group without specified amount');\n  }\n\n  console.log('AMOUNT', amount);\n\n  const handleFund = () => {\n    const link = buildFundDraftGroupProposalLink(\n      description,\n      near.api.getContract().contractId,\n      near.tokenApi.getContract().contractId,\n      amount.value,\n      draftGroupIndex,\n      astroDAOContractAddress,\n    );\n\n    debugger;\n\n    window.open(link, '_blank')?.focus();\n  };\n\n  return (\n    <>\n      <button className=\"button\" type=\"button\" onClick={handleOpen}>Fund with DAO</button>\n      <Dialog open={open} sx={{ padding: 1, minWidth: 1 }} onClose={handleClose}>\n        <form className=\"form-submit\" onSubmit={handleFund}>\n          <DialogTitle>\n            Fund with DAO\n            <IconButton\n              aria-label=\"close\"\n              onClick={handleClose}\n              sx={{\n                position: 'absolute',\n                right: 8,\n                top: 8,\n              }}\n            >\n              <CloseRoundedIcon />\n            </IconButton>\n          </DialogTitle>\n          <DialogContent style={{ minWidth: '320px', paddingTop: '1.25em' }}>\n            <DaoSelector selectedAddress={astroDAOContractAddress} setSelectedAddress={setAstroDAOContractAddress} />\n            <DaoProposalDescription proposalDescription={description} setProposalDescription={setDescription} />\n          </DialogContent>\n          <DialogActions sx={{ padding: '14px 24px 24px' }}>\n            <button className=\"button fullWidth noMargin\" type=\"submit\">Fund</button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    </>\n  );\n}\n\nexport default FundWithDaoButton;\n","import { useContext, useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useSnackbar } from 'notistack';\n\nimport { INearProps, NearContext } from '../../services/near';\n\nfunction DeleteDraftGroupButton(props: { draftGroupId: number, draftIds: [number], disabled: boolean }) {\n  const { draftGroupId, draftIds, disabled } = props;\n  const { near }: { near: INearProps | null } = useContext(NearContext);\n  const { enqueueSnackbar } = useSnackbar();\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const [inProgress, setInProgress] = useState<boolean>(false);\n\n  const withNotification = async (name: string, func: () => any): Promise<any> => {\n    try {\n      const result = await func();\n      return result;\n    } catch (e) {\n      enqueueSnackbar(`${name} failed with error: '${e}'`, { variant: 'error' });\n      throw e;\n    }\n  };\n\n  if (!near) {\n    throw Error('Cannot access lockup api');\n  }\n\n  const handleDelete = () => {\n    const perform = async () => {\n      if (!near) {\n        throw new Error('near is null');\n      }\n\n      setInProgress(true);\n\n      // discard draft group\n      try {\n        await near.api.discardDraftGroup(draftGroupId);\n        enqueueSnackbar(`Discarded draft group ${draftGroupId}`, { variant: 'success' });\n      } catch (e) {\n        if (e instanceof Error) {\n          console.log(`ERROR: ${e}`);\n          const { message } = e;\n          if (!message.includes('cannot discard, draft group already discarded')) {\n            enqueueSnackbar(`Failed to discard draft group ${draftGroupId}: ${message}`, { variant: 'error' });\n            setInProgress(false);\n            return;\n          }\n        } else {\n          throw new Error('unreachable');\n        }\n      }\n\n      // delete all drafts\n      try {\n        const chunkSize = 100;\n        for (let i = 0; i < draftIds.length; i += chunkSize) {\n          const chunk = draftIds.slice(i, i + chunkSize);\n\n          await withNotification(\n            'Delete drafts',\n            async () => {\n              const result = await near.api.deleteDrafts(chunk);\n              return result;\n            },\n          );\n        }\n        enqueueSnackbar(`Deleted draft group ${draftGroupId}`, { variant: 'success' });\n        const currentContractName = location.pathname.split('/')[1];\n        navigate(`/${currentContractName}/admin/draft_groups`);\n        window.location.reload();\n      } catch (e) {\n        if (e instanceof Error) {\n          console.log(`ERROR: ${e}`);\n          const { message } = e;\n          enqueueSnackbar(`Failed to discard draft group ${draftGroupId}: ${message}`, { variant: 'error' });\n          setInProgress(false);\n        } else {\n          throw new Error('unreachable');\n        }\n      }\n    };\n\n    perform();\n  };\n\n  return (\n    <button className=\"button compact red\" type=\"button\" onClick={handleDelete} disabled={disabled || inProgress}>Delete</button>\n  );\n}\n\nexport default DeleteDraftGroupButton;\n","import { useState, useEffect, useContext } from 'react';\nimport { Alert } from '@mui/material';\nimport {\n  useNavigate, useParams, useLocation, Link,\n} from 'react-router-dom';\nimport { useSnackbar } from 'notistack';\nimport { LoadingButton } from '@mui/lab';\n\nimport DraftsTable from '../../components/DraftsTable';\nimport { TMetadata } from '../../services/tokenApi';\nimport { convertAmount } from '../../utils';\nimport { INearProps, NearContext } from '../../services/near';\nimport TokenAmountPreview from '../../components/TokenAmountPreview';\nimport FundButton from '../../components/FundButton';\nimport FundWithDaoButton from '../../components/FundWithDaoButton';\nimport DeleteDraftGroupButton from '../../components/DeleteDraftGroupButton';\n\nexport default function PageDraftGroup({ token, adminControls }: { token: TMetadata, adminControls: boolean }) {\n  const location = useLocation();\n  const { enqueueSnackbar } = useSnackbar();\n  const draftGroupId = parseInt(useParams().draftGroupId || '', 10);\n  const { near }: { near: INearProps | null } = useContext(NearContext);\n  const [draftGroup, setDraftGroup] = useState<any>(null);\n  const [drafts, setDrafts] = useState<any[]>([]);\n  const [inProgress, setInProgress] = useState<boolean>(false);\n  const [isConverted, setIsConverted] = useState<string>('pending');\n\n  useEffect(() => {\n    const perform = async () => {\n      setIsConverted('pending');\n      console.log(`fetchIsConverted: ${draftGroupId} ${'pending'}`);\n\n      if (!near) return;\n\n      const searchParams = new URLSearchParams(window.location.search);\n      const transactionHashesRaw: string | null = searchParams.get('transactionHashes');\n      if (!transactionHashesRaw) {\n        setIsConverted('unknown');\n        console.log(`fetchIsConverted: ${draftGroupId} ${'unknown'}`);\n        return;\n      }\n      const txHash = transactionHashesRaw.split(',')[0];\n      console.log('txHash', txHash);\n      const txStatus = await near.rpcProvider.txStatus(txHash, 'sender.testnet');\n      console.log(txStatus);\n\n      const methodName = txStatus.transaction.actions[0].FunctionCall.method_name;\n\n      const successValue = (txStatus.status as any).SuccessValue;\n\n      const args = JSON.parse(atob(txStatus.transaction.actions[0].FunctionCall.args));\n      const msg = args.msg && JSON.parse(args.msg);\n      const msgDraftGroupId = msg && msg.draft_group_id;\n\n      console.log(methodName, successValue, args, msg, msgDraftGroupId);\n\n      const result = methodName === 'ft_transfer_call' && msgDraftGroupId && msgDraftGroupId === draftGroupId;\n\n      if (result) {\n        setIsConverted('converted');\n        console.log(`fetchIsConverted: ${draftGroupId} ${'converted'}`);\n      } else {\n        setIsConverted('unknown');\n        console.log(`fetchIsConverted: ${draftGroupId} ${'unknown'}`);\n      }\n    };\n    perform();\n  }, [near, draftGroupId]);\n\n  useEffect(() => {\n    const fetchDraftGroup = async () => {\n      setDraftGroup(null);\n\n      console.log(`fetchDraftGroup called: ${draftGroupId} ${isConverted}`);\n      if (!near) return;\n      console.log(isConverted);\n      if (isConverted === 'pending') {\n        return;\n      }\n\n      const result = await near.api.getDraftGroup(draftGroupId);\n      setDraftGroup(result || 'not_found');\n    };\n\n    fetchDraftGroup(); // .catch(console.error);\n  }, [near, draftGroupId, isConverted]);\n\n  useEffect(() => {\n    const fetchDrafts = async () => {\n      setDrafts([]);\n      console.log('fetchDrafts called');\n      if (!near) {\n        return;\n      }\n      if (!draftGroup || draftGroup === 'not_found') {\n        return;\n      }\n      const result = await near.api.getDrafts(draftGroup.draft_indices);\n      setDrafts(result.map((x: any) => Object.assign(x[1].lockup_create, { id: x[0] })));\n    };\n\n    fetchDrafts(); // .catch(console.error);\n  }, [near, draftGroup]);\n\n  const navigate = useNavigate();\n\n  const withNotification = async (name: string, func: () => any): Promise<any> => {\n    try {\n      const result = await func();\n      return result;\n    } catch (e) {\n      enqueueSnackbar(`${name} failed with error: '${e}'`, { variant: 'error' });\n      throw e;\n    }\n  };\n\n  const handleConvert = () => {\n    const convertDrafts = async () => {\n      if (!near) {\n        throw new Error('near is null');\n      }\n      try {\n        setInProgress(true);\n        const draftIds = draftGroup.draft_indices;\n        const chunkSize = 100;\n        for (let i = 0; i < draftIds.length; i += chunkSize) {\n          const chunk = draftIds.slice(i, i + chunkSize);\n\n          await withNotification(\n            'Convert drafts',\n            async () => {\n              const result = await near.api.convertDrafts(chunk);\n              return result;\n            },\n          );\n        }\n        enqueueSnackbar(`Converted drafts for draft group ${draftGroupId}`, { variant: 'success' });\n        const currentContractName = location.pathname.split('/')[1];\n        navigate(`/${currentContractName}/admin/lockups`);\n        window.location.reload();\n      } catch (e) {\n        console.log(`ERROR: ${e}`);\n      } finally {\n        setInProgress(false);\n      }\n    };\n\n    convertDrafts();\n  };\n\n  if (!draftGroup) {\n    return null;\n  }\n\n  if (draftGroup === 'not_found') {\n    const currentContractName = location.pathname.split('/')[1];\n    return (\n      <div className=\"container\">\n        <h1>{isConverted === 'converted' ? `Success! Draft group ${draftGroupId} have been converted!` : 'Draft group not found.'}</h1>\n        <div>\n          {!(isConverted === 'converted') && 'It may have been converted, deleted, or have never existed at all.' || true}\n          <br />\n          Check\n          {' '}\n          <Link to={`/${currentContractName}${adminControls ? '/admin' : ''}/lockups`}>lockups</Link>\n          {' '}\n          to find converted lockups or\n          {' '}\n          <Link to={`/${currentContractName}${adminControls ? '/admin' : ''}/draft_groups`}>draft groups</Link>\n          {' '}\n          to see all existing draft groups.\n        </div>\n      </div>\n    );\n  }\n\n  const amount = {\n    value: draftGroup.total_amount,\n    label: convertAmount(draftGroup.total_amount, token.decimals) || '',\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"draft-group-preview-wrapper draft-group-preview-inner\">\n        <div className=\"draft-group-preview-info\" style={{ display: 'flex' }}>\n          <h5>\n            {`Draft group ${draftGroupId}`}\n            {' '}\n            {draftGroup.discarded && (<span className=\"discarded-marker\">DISCARDED</span>)}\n          </h5>\n          <TokenAmountPreview token={token} amount={amount.label} />\n        </div>\n        {!draftGroup.funded && adminControls && (\n          <div className=\"draft-group-fund-button-wrapper\">\n            {!draftGroup.discarded && <FundButton draftGroupIndex={draftGroupId} amount={amount.value} /> }\n            {!draftGroup.discarded && <FundWithDaoButton draftGroupIndex={draftGroupId} amount={amount} />}\n            <DeleteDraftGroupButton\n              draftGroupId={draftGroup.id}\n              draftIds={draftGroup.draft_indices}\n              disabled={draftGroup.funded}\n            />\n          </div>\n        )}\n        {draftGroup.funded && draftGroup.draft_indices.length > 0 && adminControls && (\n          <div className=\"draft-group-fund-button-wrapper\">\n            <LoadingButton\n              className=\"button\"\n              type=\"button\"\n              onClick={handleConvert}\n              loading={inProgress}\n              variant=\"contained\"\n              color=\"success\"\n            >\n              Convert\n            </LoadingButton>\n          </div>\n        )}\n        {draftGroup.funded && draftGroup.draft_indices.length === 0 && (\n          <div style={{ marginTop: 20 }}>\n            <Alert severity=\"success\">Draft Group converted</Alert>\n          </div>\n        )}\n      </div>\n\n      {(!draftGroup.funded || draftGroup.draft_indices.length > 0) && (\n        <DraftsTable lockups={drafts} token={token} adminControls={adminControls} progressShow />\n      )}\n    </div>\n  );\n}\n","import { useEffect, useState, useContext } from 'react';\nimport {\n  Table,\n  TableCell,\n  TableHead,\n  TableBody,\n  TableRow,\n} from '@mui/material';\nimport { Link, useLocation } from 'react-router-dom';\n\nimport { INearProps, NearContext } from '../../services/near';\nimport { TMetadata } from '../../services/tokenApi';\nimport { convertAmount } from '../../utils';\nimport TokenIcon from '../../components/TokenIcon';\nimport DeleteDraftGroupButton from '../../components/DeleteDraftGroupButton';\n\nexport default function PageDraftGroupsIndex({ token, adminControls }: { token: TMetadata, adminControls: boolean }) {\n  const location = useLocation();\n  console.log(location);\n  const { near }: { near: INearProps | null } = useContext(NearContext);\n  const [draftGroups, setDraftGroups] = useState<any[]>([]);\n\n  useEffect(() => {\n    const fetchDraftGroups = async () => {\n      setDraftGroups([]);\n      console.log('fetchDraftGroup called');\n      if (!near) {\n        return;\n      }\n      const result = await near.api.getDraftGroupsAll();\n      console.log(result);\n      setDraftGroups(result);\n    };\n\n    fetchDraftGroups(); // .catch(console.error);\n  }, [near]);\n\n  // useEffect(() => {\n  //   const fetchDrafts = async () => {\n  //     setDrafts([]);\n  //     console.log('fetchDrafts called');\n  //     if (!near) {\n  //       return;\n  //     }\n  //     if (!draftGroup) {\n  //       return;\n  //     }\n  //     const result = await near.api.getDrafts(draftGroup.draft_indices);\n  //     console.log(result);\n  //     setDrafts(result.map((x: any) => x[1].lockup));\n  //   };\n\n  //   fetchDrafts(); // .catch(console.error);\n  // }, [near, draftGroup]);\n\n  // if (!draftGroup) {\n  //   return null;\n  // }\n\n  const currentContractName = location.pathname.split('/')[1];\n  const importDraftGroupPath = `/${currentContractName}/admin/import_draft_group`;\n\n  return (\n    <div className=\"main\">\n      <div className=\"container\">\n        <h1>\n          All draft groups\n        </h1>\n\n        <Table className=\"main-table\" aria-label=\"collapsible table\">\n          <TableHead className=\"table-head\">\n            <TableRow>\n              <TableCell align=\"center\">ID</TableCell>\n              <TableCell align=\"center\">Funded</TableCell>\n              <TableCell align=\"center\">Number&nbsp;of&nbsp;lockups</TableCell>\n              <TableCell align=\"right\">Total&nbsp;amount</TableCell>\n              {adminControls && <TableCell align=\"right\" width=\"0%\">Delete</TableCell>}\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {draftGroups.map((group) => (\n              <TableRow key={group.id}>\n                <TableCell align=\"center\">\n                  <Link to={`/${currentContractName}/${adminControls ? 'admin/' : ''}draft_groups/${group.id}`}>{group.id}</Link>\n                </TableCell>\n                <TableCell align=\"center\">{group.funded ? 'Yes' : 'No'}</TableCell>\n                <TableCell align=\"center\">{group.draft_indices.length}</TableCell>\n                <TableCell align=\"right\">\n                  {convertAmount(group.total_amount, token.decimals)}\n                &nbsp;\n                  {token.symbol}\n                &nbsp;\n                  <TokenIcon url={token.icon || ''} size={32} />\n                </TableCell>\n                {adminControls && (\n                <TableCell align=\"right\">\n                  <DeleteDraftGroupButton\n                    draftGroupId={group.id}\n                    draftIds={group.draft_indices}\n                    disabled={group.funded}\n                  />\n                </TableCell>\n                )}\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n\n        {adminControls && (\n        <Link to={importDraftGroupPath}>\n          <button className=\"button\" type=\"button\">Import Draft Group</button>\n        </Link>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Box } from '@mui/material';\nimport { useSnackbar } from 'notistack';\n\nimport { FACTORY_CONTRACT_NAME } from '../../config';\nimport { INearProps, NearContext } from '../../services/near';\n\nexport default function NewLockupContract() {\n  const { enqueueSnackbar } = useSnackbar();\n  const { near, signIn }: { near: INearProps | null, signIn: () => void } = useContext(NearContext);\n\n  const handleDeployLockupContract = (e: any) => {\n    e.preventDefault();\n\n    const perform = async () => {\n      try {\n        if (!near?.currentUser?.signedAccountId) {\n          throw new Error('expected signedAccountId to be present');\n        }\n\n        // const lockupCreator: string = near.signedAccountId;\n        const lockupOperators: string[] = e.target.elements.lockup_operators.value\n          .split(',').map((x: string) => x.trim()).filter((x: string) => x.length > 0);\n        const tokenAccountId: string = e.target.elements.token_account_id.value;\n        const lockupSubaccountId: string = e.target.elements.lockup_subaccount_id.value;\n\n        if (lockupOperators.length === 0) {\n          throw new Error('empty lockup operators');\n        }\n\n        if (tokenAccountId.length === 0) {\n          throw new Error('empty tokenAccountId');\n        }\n\n        if (lockupSubaccountId.length === 0) {\n          throw new Error('empty lockupSubaccountId');\n        }\n\n        // const message = `\n        //   lockup_creator: ${lockupCreator}\n        //   lockup_operators: ${JSON.stringify(lockupOperators)}\n        //   token_account_id: ${tokenAccountId}\n        //   lockup_subaccount_id: ${lockupSubaccountId}\n        // `;\n        // alert(message);\n\n        const result = await near.factoryApi.create(\n          lockupSubaccountId,\n          tokenAccountId,\n          lockupOperators,\n          `${window.location.origin + window.location.pathname}#/${lockupSubaccountId}.${FACTORY_CONTRACT_NAME}/admin/lockups`,\n        );\n\n        console.log(result);\n\n        return result;\n      } catch (error) {\n        console.log(error);\n        enqueueSnackbar((error as any).toString(), { variant: 'error' });\n        return null;\n      }\n    };\n\n    perform();\n  };\n\n  if (!(near)) {\n    return null;\n  }\n\n  return (\n    <div>\n      <div className=\"header\">\n        <div className=\"container\">\n          <Box sx={{ display: 'flex' }}>\n            <Link className=\"logo\" to=\"/\">LOCKUPS</Link>\n            <div className=\"nav\">\n              <Link className=\"nav-link\" to=\"/\">Home</Link>\n            </div>\n          </Box>\n        </div>\n      </div>\n\n      <div className=\"container new-lockup-contract\">\n        <h2>\n          Create Lockup Contract for your Fungible Tokens\n        </h2>\n\n        <form className=\"form-submit\" onSubmit={handleDeployLockupContract}>\n          <div className=\"form-wrapper\">\n\n            <p>On this page you can deploy your own copy of lockup contract. Some more elaborative description follows here.</p>\n            <div className=\"form-row\">\n              <span>Contract creator: </span>\n              <div className=\"form-cell\">\n                {near.currentUser.signedAccountId && <strong>{near.currentUser.signedAccountId}</strong>}\n                <button className=\"button\" type=\"button\" onClick={signIn}>\n                  {near.currentUser.signedAccountId && 'Login as someone else' || 'Login'}\n                </button>\n              </div>\n            </div>\n            <div className=\"form-row\">\n              <span>Lockup operators: </span>\n              <input type=\"text\" id=\"lockup_operators\" />\n            </div>\n            <div className=\"form-row\">\n              <span>Fungible token contract address: </span>\n              <input type=\"text\" id=\"token_account_id\" />\n            </div>\n            <div className=\"form-row\">\n              <span>New Lockup Contract Address: </span>\n              <input type=\"text\" id=\"lockup_subaccount_id\" />\n            </div>\n\n            <button className=\"button submit\" type=\"submit\" disabled={!near.currentUser.signedAccountId}>\n              Deploy Contract\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n","import { useContext, useState } from 'react';\nimport {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  FormControl,\n  IconButton,\n  InputAdornment,\n  MenuItem,\n  Select,\n  TextField,\n} from '@mui/material';\nimport BN from 'bn.js';\nimport Big from 'big.js';\nimport CloseRoundedIcon from '@mui/icons-material/CloseRounded';\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\nimport { INearProps, NearContext } from '../../services/near';\nimport { addYear } from '../../utils';\nimport { TMetadata } from '../../services/tokenApi';\nimport { TSchedule } from '../../services/api';\n\nexport default function CreateLockup({ token } : { token: TMetadata }) {\n  const {\n    near,\n  }: {\n    near: INearProps | null,\n  } = useContext(NearContext);\n\n  const [open, setOpen] = useState(false);\n  const [startDate, setStartDate] = useState<Date | null>(null);\n  const [schedule, setSchedule] = useState<string>('4_year');\n  const handleOpen = () => setOpen(true);\n  const handleClose = () => setOpen(false);\n  const [accountId, setAccountId] = useState<string>('');\n  const [accountStatus, setAccountStatus] = useState<string>('pending'); // pending success error\n  const [amount, setAmount] = useState<string>('');\n\n  const onScheduleSelect = (value: any) => {\n    setSchedule(value.target.value);\n  };\n\n  const handleChangeAmount = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const perform = async () => {\n      if (!near) return;\n      const { value } = event.target;\n\n      setAmount(value);\n    };\n\n    perform();\n  };\n\n  const handleChangeAccountId = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const perform = async () => {\n      if (!near) return;\n      const { value } = event.target;\n\n      console.log(accountStatus, setAccountStatus);\n\n      setAccountId(value);\n      setAccountStatus('pending');\n\n      try {\n        const { total } = (await (await near.near.account(value)).getAccountBalance());\n        console.log(total);\n        setAccountStatus('success');\n      } catch (e) {\n        setAccountStatus('error');\n      }\n    };\n\n    perform();\n  };\n\n  const handleCreateLockup = async (e: any) => {\n    if (!near) {\n      throw Error('Cannot access token api');\n    }\n    if (!near.currentUser.signedAccountId) {\n      throw new Error('signedAccountId requred to set lockup terminator');\n    }\n    if (!startDate) {\n      throw Error('Start date not set');\n    }\n\n    e.preventDefault();\n\n    console.log(amount);\n\n    const lockupContractId = near?.api.getContract().contractId || '';\n    const lockupTotalAmount = new Big(amount).mul(new Big(10).pow(token.decimals))\n      .round(0, Big.roundDown).toString();\n\n    const getScheduleList = (date: Date, balanceInput: string, selected: string): [TSchedule, TSchedule | null] => {\n      const balance = new BN(balanceInput);\n\n      const schedules: { [key: string]: TSchedule } = {\n        '4y_cliff_1y_25': [\n          { timestamp: addYear(date, 0), balance: '0' },\n          { timestamp: addYear(date, 1) - 1, balance: '0' },\n          { timestamp: addYear(date, 1), balance: balance.divn(4).toString() },\n          { timestamp: addYear(date, 4), balance: balance.toString() },\n        ],\n      };\n\n      const schedulePairs: { [key: string]: [TSchedule, TSchedule | null] } = {\n        '4_year': [schedules['4y_cliff_1y_25'], null],\n        '4_year_vested': [schedules['4y_cliff_1y_25'], schedules['4y_cliff_1y_25']],\n      };\n\n      return schedulePairs[selected];\n    };\n\n    const [lockupSchedule, vestingSchedule] = getScheduleList(startDate, lockupTotalAmount, schedule);\n\n    near.tokenApi.createLockup(\n      lockupContractId,\n      lockupTotalAmount.toString(),\n      accountId,\n      lockupSchedule,\n      vestingSchedule,\n    );\n  };\n\n  const validAmount = !Number.isNaN(parseFloat(amount));\n\n  return (\n    <>\n      <button className=\"button\" type=\"button\" onClick={handleOpen}>Create Lockup</button>\n      <Dialog open={open} sx={{ padding: 2 }} maxWidth=\"xs\" onClose={handleClose}>\n        <form className=\"form-submit\" onSubmit={handleCreateLockup}>\n          <DialogTitle>\n            Create Lockup\n            <IconButton\n              aria-label=\"close\"\n              onClick={handleClose}\n              sx={{\n                position: 'absolute',\n                right: 8,\n                top: 8,\n              }}\n            >\n              <CloseRoundedIcon />\n            </IconButton>\n          </DialogTitle>\n          <DialogContent sx={{ maxWidth: '320px' }}>\n            <TextField\n              margin=\"normal\"\n              id=\"account\"\n              label=\"Account Id\"\n              type=\"text\"\n              fullWidth\n              variant=\"standard\"\n              onChange={handleChangeAccountId}\n              color={accountStatus === 'success' ? 'success' : accountStatus === 'error' ? 'error' : 'primary'}\n            />\n            <TextField\n              margin=\"normal\"\n              id=\"amount\"\n              label=\"Amount\"\n              type=\"number\"\n              variant=\"standard\"\n              InputProps={{\n                endAdornment: <InputAdornment position=\"end\">{token.symbol}</InputAdornment>,\n              }}\n              fullWidth\n              onChange={handleChangeAmount}\n            />\n            <br />\n            <FormControl\n              fullWidth\n              sx={{ marginTop: '20px' }}\n            >\n              <Select\n                id=\"schedule-select\"\n                value={schedule}\n                label=\"Schedule\"\n                onChange={onScheduleSelect}\n                variant=\"standard\"\n                fullWidth\n              >\n                <MenuItem value=\"4_year\">4 year lockup with 25% cliff in 1 year</MenuItem>\n                <MenuItem value=\"4_year_vested\">4 year lockup with 25% cliff in 1 year (VESTED)</MenuItem>\n              </Select>\n            </FormControl>\n            <LocalizationProvider dateAdapter={AdapterDateFns}>\n              <DatePicker\n                label=\"Start date\"\n                value={startDate}\n                onChange={(newValue) => {\n                  setStartDate(newValue);\n                }}\n                renderInput={\n                  (params) => (\n                    <TextField\n                      margin=\"normal\"\n                      fullWidth\n                      variant=\"standard\"\n                      {...params}\n                    />\n                  )\n                }\n              />\n            </LocalizationProvider>\n          </DialogContent>\n          <DialogActions sx={{ padding: '14px 24px 24px' }}>\n            <button disabled={!startDate || accountStatus === 'error' || !validAmount} className=\"button fullWidth noMargin\" type=\"submit\">Create</button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    </>\n  );\n}\n","import {\n  Dialog,\n  DialogContent,\n  DialogTitle,\n  IconButton,\n  TextField,\n} from '@mui/material';\n\nimport CloseRoundedIcon from '@mui/icons-material/CloseRounded';\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\n\nimport DaoSelector from '../WithDao/DaoSelector';\nimport DaoProposalDescription from '../WithDao/DaoProposalDescription';\n\ntype TUIElement<Ctype> = {\n  currentState: {\n    value: Ctype,\n    setValue: any,\n  },\n};\n\ntype TProps = {\n  currentState: {\n    value: boolean,\n    setValue: any,\n  },\n  handlers: {\n    onClose: any,\n    onSubmit: any,\n  },\n  dialog: {\n    datePicker: TUIElement<Date | null>,\n    daoSelector?: TUIElement<string>,\n    daoProposalDescription?: TUIElement<string>,\n  },\n};\n\nfunction TerminateModal({ currentState, handlers, dialog }: TProps) {\n  return (\n    <Dialog open={currentState.value} sx={{ padding: 2 }} maxWidth=\"xs\" onClose={handlers.onClose}>\n      <form className=\"form-submit\">\n        <DialogTitle>\n          Terminate Lockup\n          <IconButton\n            aria-label=\"close\"\n            onClick={handlers.onClose}\n            sx={{\n              position: 'absolute',\n              right: 8,\n              top: 8,\n            }}\n          >\n            <CloseRoundedIcon />\n          </IconButton>\n        </DialogTitle>\n        <DialogContent sx={{ maxWidth: '320px' }}>\n          <LocalizationProvider dateAdapter={AdapterDateFns}>\n            { dialog.datePicker && (\n              <DatePicker\n                label=\"Custom termination date\"\n                minDate={new Date()}\n                value={dialog.datePicker.currentState.value}\n                onChange={(newValue) => {\n                  dialog.datePicker.currentState.setValue(newValue);\n                }}\n                renderInput={\n                  (params) => (\n                    <TextField\n                      sx={{ margin: '0px 0 24px' }}\n                      margin=\"normal\"\n                      fullWidth\n                      variant=\"standard\"\n                      {...params}\n                    />\n                  )\n                }\n              />\n            ) }\n            { dialog?.daoSelector && (\n              <DaoSelector\n                selectedAddress={dialog.daoSelector.currentState.value}\n                setSelectedAddress={dialog.daoSelector.currentState.setValue}\n              />\n            ) }\n            { dialog?.daoProposalDescription && (\n              <DaoProposalDescription\n                proposalDescription={dialog.daoProposalDescription.currentState.value}\n                setProposalDescription={dialog.daoProposalDescription.currentState.setValue}\n              />\n            ) }\n          </LocalizationProvider>\n          <span style={{ minHeight: '40px' }} />\n          <button className=\"button red fullWidth\" style={{ marginTop: '40px' }} type=\"button\" onClick={handlers.onSubmit}>\n            Terminate\n          </button>\n        </DialogContent>\n      </form>\n    </Dialog>\n  );\n}\n\nexport default TerminateModal;\n","import { useContext, useState } from 'react';\n\nimport { useSnackbar } from 'notistack';\nimport Big from 'big.js';\nimport { TMetadata } from '../../services/tokenApi';\nimport { INearProps, NearContext } from '../../services/near';\nimport TerminateModal from '../TerminateModal';\n\nfunction TerminateLockup(\n  props: {\n    adminControls: boolean,\n    lockupIndex: number | undefined,\n    config: { beneficiary_id: String, vesting_schedule: [] | null } | null,\n    token: TMetadata,\n    buttonText: string,\n  },\n) {\n  const { near }: { near: INearProps | null } = useContext(NearContext);\n  const {\n    adminControls,\n    lockupIndex,\n    config,\n    token,\n    buttonText,\n  } = props;\n\n  const { enqueueSnackbar } = useSnackbar();\n  const [date, setDate] = useState<Date | null>(null);\n\n  const [open, setOpen] = useState(false);\n  const handleOpen = () => setOpen(true);\n  const handleClose = () => setOpen(false);\n\n  if (!near) {\n    throw Error('Cannot access lockup api');\n  }\n\n  if (lockupIndex === undefined) {\n    throw Error('Cannot terminate lockup without lockupIndex');\n  }\n\n  const handleTerminateLockup = async () => {\n    if (!enqueueSnackbar) return;\n\n    const ts = date ? date.getTime() / 1000 : null;\n    const result = await near.api.terminate(lockupIndex, ts);\n    const amount = new Big(result as any).div(new Big(10).pow(token.decimals)).round(2, Big.roundDown);\n    console.log(amount);\n    const message = `Terminated lockup #${lockupIndex}, refunded ${amount} ${token.symbol}`;\n    enqueueSnackbar(message, { variant: 'success' });\n    setTimeout(() => window.location.reload(), 1000);\n  };\n\n  const canTerminate = adminControls && config;\n\n  const modalProps = {\n    currentState: {\n      value: open,\n      setValue: setOpen,\n    },\n    handlers: {\n      onClose: handleClose,\n      onSubmit: handleTerminateLockup,\n    },\n    dialog: {\n      datePicker: {\n        currentState: {\n          value: date,\n          setValue: setDate,\n        },\n      },\n    },\n  };\n\n  return (\n    <>\n      {canTerminate && (\n        <button\n          className=\"button\"\n          type=\"button\"\n          onClick={handleOpen}\n        >\n          {buttonText}\n        </button>\n      )}\n      { open && <TerminateModal {...modalProps} /> }\n    </>\n  );\n}\n\nexport default TerminateLockup;\n","import { useContext, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nimport { TMetadata } from '../../services/tokenApi';\nimport { INearProps, NearContext } from '../../services/near';\nimport TerminateModal from '../TerminateModal';\nimport { buildTerminateLockupProposalLink } from '../../services/DAOs/astroDAO/utils';\n\nfunction TerminateWithDaoButton(\n  props: {\n    accountId: string,\n    adminControls: boolean,\n    lockupIndex: number | undefined,\n    config: { beneficiary_id: String, vesting_schedule: [] | null } | null,\n    token: TMetadata,\n    buttonText: string,\n  },\n) {\n  const { near }: { near: INearProps | null } = useContext(NearContext);\n  const {\n    accountId,\n    adminControls,\n    lockupIndex,\n    config,\n    buttonText,\n  } = props;\n\n  const [date, setDate] = useState<Date | null>(null);\n\n  const [open, setOpen] = useState(false);\n  const handleOpen = () => setOpen(true);\n  const handleClose = () => setOpen(false);\n  const location = useLocation();\n\n  const currentContractName = location.pathname.split('/')[1];\n  const pathname = `/${currentContractName}/lockups/${accountId}/${lockupIndex}`;\n  const uri = new URL(window.location.href);\n  uri.hash = `#${pathname}`;\n  const defaultDescription = `Terminate lockup ${lockupIndex}. Lockup link: ${uri.toString()}`;\n\n  const [description, setDescription] = useState(defaultDescription);\n  const [astroDAOContractAddress, setAstroDAOContractAddress] = useState((config?.beneficiary_id || '') as string);\n\n  if (!near) {\n    throw Error('Cannot access lockup api');\n  }\n\n  if (lockupIndex === undefined) {\n    throw Error('Cannot terminate lockup without lockupIndex');\n  }\n\n  const handleTerminate = () => {\n    const link = buildTerminateLockupProposalLink(\n      description,\n      near.api.getContract().contractId,\n      lockupIndex,\n      date ? date.getTime() / 1000 : null,\n      astroDAOContractAddress,\n    );\n\n    window.open(link, '_blank')?.focus();\n  };\n\n  const canTerminate = adminControls && config;\n\n  const modalProps = {\n    currentState: {\n      value: open,\n      setValue: setOpen,\n    },\n    handlers: {\n      onClose: handleClose,\n      onSubmit: handleTerminate,\n    },\n    dialog: {\n      datePicker: {\n        currentState: {\n          value: date,\n          setValue: setDate,\n        },\n      },\n      daoSelector: {\n        currentState: {\n          value: astroDAOContractAddress,\n          setValue: setAstroDAOContractAddress,\n        },\n      },\n      daoProposalDescription: {\n        currentState: {\n          value: description,\n          setValue: setDescription,\n        },\n      },\n    },\n  };\n\n  return (\n    <div>\n      <button\n        className=\"button\"\n        disabled={!canTerminate}\n        type=\"button\"\n        onClick={handleOpen}\n        style={{ marginTop: 0 }}\n      >\n        {buttonText}\n      </button>\n      { open && <TerminateModal {...modalProps} /> }\n    </div>\n  );\n}\n\nexport default TerminateWithDaoButton;\n","import { useContext, useState } from 'react';\nimport {\n  Collapse,\n  IconButton,\n  TableCell,\n  TableRow,\n  Tooltip,\n} from '@mui/material';\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp';\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\nimport { Link } from 'react-router-dom';\n\nimport Chart from '../Chart';\nimport { convertAmount, convertTimestamp } from '../../utils';\nimport { INearProps, NearContext } from '../../services/near';\nimport { TMetadata } from '../../services/tokenApi';\nimport TerminateLockup from '../TerminateLockup';\nimport TerminateWithDaoButton from '../TerminateWithDaoButton';\nimport TokenIcon from '../TokenIcon';\nimport ScheduleTable from '../ScheduleTable';\nimport { chartData } from '../../services/chartHelpers';\n\nexport default function Row(props: { adminControls: boolean, row: ReturnType<any>, token: TMetadata }) {\n  const [open, setOpen] = useState(false);\n  const { adminControls, row, token } = props;\n  const {\n    near,\n  }: {\n    near: INearProps | null\n  } = useContext(NearContext);\n\n  if (!near) return null;\n\n  const vestingSchedule = row?.termination_config?.vesting_schedule?.Schedule;\n\n  const selectedAccountPage = window.location.href.split('/').pop() === row.account_id;\n\n  const selectedLockupId = window.location.href.split('/').pop() === row.id.toString();\n\n  const claimedAmount = `${convertAmount(row.claimed_balance, token.decimals)}`;\n  const availbleAmount = `${convertAmount(row.unclaimed_balance, token.decimals)}`;\n  const vestedAmount = `${convertAmount(row.total_balance - row.claimed_balance - row.unclaimed_balance, token.decimals)}`;\n  const unvestedAmount = `${convertAmount(row.total_balance - row.total_balance, token.decimals)}`;\n\n  let payerMessage;\n  if (!row.termination_config?.beneficiary_id) {\n    payerMessage = 'This lockup cannot be terminated';\n  } else {\n    payerMessage = `Unvested amount will return to ${row.termination_config?.beneficiary_id}`;\n  }\n\n  const terminatorId = row?.termination_config?.beneficiary_id;\n\n  const terminateButton = (terminator: string) => {\n    if (!adminControls) {\n      return null;\n    }\n    return (\n      <>\n        <div>\n          <TerminateLockup\n            token={token}\n            adminControls={adminControls}\n            lockupIndex={row.id}\n            config={row.termination_config}\n            buttonText={terminator ? 'Terminate' : 'No termination config'}\n          />\n        </div>\n        <div>\n          <TerminateWithDaoButton\n            accountId={row.account_id}\n            token={token}\n            adminControls={adminControls}\n            lockupIndex={row.id}\n            config={row.termination_config}\n            buttonText={terminator ? 'Terminate with Dao' : 'No termination config'}\n          />\n        </div>\n      </>\n    );\n  };\n\n  return (\n    <>\n      <TableRow className={open ? 'expanded exp-row' : 'exp-row'} sx={{ '& > *': { borderBottom: 'unset' } }}>\n        <TableCell>\n          <IconButton\n            aria-label=\"expand row\"\n            size=\"small\"\n            onClick={() => setOpen(!open)}\n          >\n            {open ? <KeyboardArrowUpIcon /> : <KeyboardArrowDownIcon />}\n          </IconButton>\n        </TableCell>\n        <TableCell align=\"left\">\n          {!selectedLockupId ? <Link to={`${row.id}`}>{row.id}</Link> : row.id}\n        </TableCell>\n        <TableCell align=\"left\">\n          {!selectedAccountPage && !selectedLockupId ? <Link to={row.account_id}>{row.account_id}</Link> : row.account_id}\n        </TableCell>\n        <TableCell align=\"right\">\n          {convertTimestamp(row.schedule[0].timestamp)}\n        </TableCell>\n        <TableCell align=\"right\">\n          {convertTimestamp(row.schedule[row.schedule.length - 1].timestamp)}\n        </TableCell>\n        <TableCell align=\"center\">\n          {vestingSchedule ? 'Yes' : 'No'}\n        </TableCell>\n        <TableCell align=\"right\">\n          {convertAmount(row.total_balance, token.decimals)}\n          &nbsp;\n          {token.symbol}\n          &nbsp;\n          <TokenIcon url={token.icon || ''} size={32} />\n        </TableCell>\n        <TableCell align=\"center\">\n          <Tooltip\n            title={(\n              <div className=\"progress-bar__tooltip\">\n                <span>\n                  <i className=\"claimed\">&nbsp;</i>\n                  <b>{claimedAmount}</b>\n                  {' '}\n                  Claimed\n                </span>\n                <span>\n                  <i className=\"available\">&nbsp;</i>\n                  <b>{availbleAmount}</b>\n                  {' '}\n                  Available\n                </span>\n                <span>\n                  <i className=\"vested\">&nbsp;</i>\n                  <b>{vestedAmount}</b>\n                  {' '}\n                  Vested\n                </span>\n                <span>\n                  <i className=\"unvested\">&nbsp;</i>\n                  <b>{unvestedAmount}</b>\n                  {' '}\n                  Unvested\n                </span>\n              </div>\n)}\n            placement=\"top\"\n            arrow\n          >\n            <div className=\"progress-bar\">\n              <div style={{ width: `${(row.claimed_balance / row.total_balance) * 100}%` }} className=\"claimed\">\n                &nbsp;\n              </div>\n              <div style={{ width: `${(row.unclaimed_balance / row.total_balance) * 100}%` }} className=\"available\">\n                &nbsp;\n              </div>\n              <div style={{ width: `${((row.total_balance - row.claimed_balance - row.unclaimed_balance) / row.total_balance) * 100}%` }} className=\"vested\">\n                &nbsp;\n              </div>\n              <div style={{ width: `${(row.total_balance - row.total_balance) * 100}%` }} className=\"unvested\">&nbsp;</div>\n            </div>\n          </Tooltip>\n        </TableCell>\n      </TableRow>\n      <TableRow sx={{ background: '#F4F7FC' }}>\n        <TableCell style={{ padding: 0 }} colSpan={8}>\n          <Collapse in={open} timeout=\"auto\" unmountOnExit>\n            <div className=\"lockup-row\">\n              <div style={{ display: 'flex', gap: 20 }}>\n                <ScheduleTable schedule={row.schedule} title=\"Lockup schedule\" token={token} />\n                {vestingSchedule && (\n                  <ScheduleTable schedule={vestingSchedule} title=\"Vesting schedule\" token={token} />\n                )}\n\n                <div style={{ flex: '1' }}>\n                  <div style={{ height: 300 }}>\n                    <Chart data={chartData([row], token.decimals)} />\n                  </div>\n\n                  <div className=\"terminate\">\n                    <span className=\"fine-print\">{payerMessage}</span>\n                    {terminatorId && terminateButton(terminatorId)}\n\n                  </div>\n                </div>\n              </div>\n            </div>\n          </Collapse>\n        </TableCell>\n      </TableRow>\n    </>\n  );\n}\n","import {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n} from '@mui/material';\nimport Row from '../table/row';\nimport { TMetadata } from '../../services/tokenApi';\n\nexport default function LockupsTable(\n  { lockups, token, adminControls }: { lockups: any[], token: TMetadata, adminControls: boolean },\n) {\n  return (\n    <Table className=\"main-table\" aria-label=\"collapsible table\">\n      <TableHead className=\"table-head\">\n        <TableRow>\n          <TableCell />\n          <TableCell align=\"left\">ID</TableCell>\n          <TableCell align=\"left\">Account ID</TableCell>\n          <TableCell align=\"right\">Start&nbsp;date</TableCell>\n          <TableCell align=\"right\">End&nbsp;date</TableCell>\n          <TableCell align=\"center\">Terminatable</TableCell>\n          <TableCell align=\"right\">Total&nbsp;amount</TableCell>\n          <TableCell align=\"center\">Progress</TableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {lockups.map((lockup) => (\n          <Row key={lockup.id} row={lockup} token={token} adminControls={adminControls} />\n        ))}\n      </TableBody>\n    </Table>\n  );\n}\n","import {\n  TextField,\n} from '@mui/material';\n\nimport { useRef } from 'react';\n\nexport default function FavouriteAccounts({\n  tokenContractId, favouriteAccounts, uniqueUsers, onSave,\n}: {\n  tokenContractId: string, favouriteAccounts: string[], uniqueUsers: string[], onSave: Function,\n}) {\n  console.log('unique users', uniqueUsers);\n\n  const inputRef = useRef<null | HTMLInputElement>(null);\n\n  const parseAccounts = (input: string): string[] => input.replaceAll(' ', '').split(',');\n\n  const handleSaveFavouriteAccounts = (): void => {\n    const localStorageValue = (value: string[]): string => JSON.stringify({ favouriteAccounts: value });\n\n    if (!inputRef?.current?.value) {\n      localStorage.setItem(tokenContractId, localStorageValue([]));\n      onSave([]);\n      return;\n    }\n\n    const newFavouriteAccounts = parseAccounts(inputRef.current.value);\n    onSave(newFavouriteAccounts);\n    localStorage.setItem(tokenContractId, localStorageValue(newFavouriteAccounts));\n  };\n\n  const handleChangeFavouriteAccounts = (e: any) => {\n    const { value } = e.target;\n\n    const realAccouns = parseAccounts(value).filter((account) => account.match(/.*(\\.)(near|testnet)$/));\n\n    if (favouriteAccounts.toString() !== realAccouns.toString()) {\n      handleSaveFavouriteAccounts();\n    }\n  };\n\n  return (\n    <div style={{ display: 'flex', marginBottom: '2em' }}>\n      <TextField\n        inputProps={{\n          sx: {\n            margin: 0,\n          },\n        }}\n        size=\"small\"\n        sx={{ width: 1, padding: 0, margin: 0 }}\n        id=\"outlined-helperText\"\n        label=\"My accounts\"\n        placeholder=\"Comma separated list of your near accounts\"\n        defaultValue={favouriteAccounts.join(', ')}\n        inputRef={inputRef}\n        onKeyPress={(e) => e.key === 'Enter' && handleSaveFavouriteAccounts()}\n        onChange={handleChangeFavouriteAccounts}\n      />\n    </div>\n  );\n}\n","import {\n  TableContainer,\n} from '@mui/material';\nimport { useContext, useState } from 'react';\n\nimport { Link } from 'react-router-dom';\nimport Chart from '../../components/Chart';\n\nimport CreateLockup from '../../components/CreateLockup';\nimport LockupsTable from '../../components/LockupsTable';\nimport { INearProps, NearContext } from '../../services/near';\nimport { TMetadata } from '../../services/tokenApi';\nimport FavouriteAccounts from '../../components/FavouriteAccounts';\nimport { chartData } from '../../services/chartHelpers';\n\ntype TToken = TMetadata & { contractId: string };\n\nexport default function Lockups({ lockups, token, adminControls }: { lockups: any[], token: TToken, adminControls: boolean }) {\n  const uniqueUsers = Array.from(new Set(lockups.map((x) => x.account_id)));\n\n  const {\n    near,\n  }: {\n    near: INearProps,\n  } = useContext(NearContext);\n\n  const { signedIn, isAdmin } = near.currentUser;\n\n  const storedData = localStorage.getItem(token.contractId);\n  const favouriteAccountsFromLocalStorage = storedData ? JSON.parse(storedData)?.favouriteAccounts : [];\n  const [favouriteAccounts, setFavouriteAccounts] = useState<string[]>(favouriteAccountsFromLocalStorage);\n  const favouriteAccountsLockups = lockups.filter((lockup) => favouriteAccounts.includes(lockup.account_id));\n\n  const lockupsPage = (lockupsList: any): any => {\n    if (lockupsList.length > 0) {\n      return (\n        <>\n          <Chart data={chartData(lockupsList, token.decimals)} />\n\n          { signedIn && adminControls && isAdmin && <CreateLockup token={token} /> }\n\n          <TableContainer sx={{ boxShadow: 'unset', margin: '0 0 20px' }}>\n            <LockupsTable lockups={lockupsList} token={token} adminControls={adminControls} />\n          </TableContainer>\n        </>\n      );\n    }\n\n    return (\n      <div>\n        There are no lockups yet.\n        {adminControls && (\n          <div>\n            Create single lockup or create batch of them via\n            {' '}\n            <Link to={`/${near.lockupContractId}/admin/import_draft_group`}>Draft Groups</Link>\n            .\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  console.log('favouriteAccountsLockups', favouriteAccountsLockups);\n\n  if (adminControls) {\n    return (\n      <div className=\"main\">\n        <div className=\"container\">\n          {lockupsPage(lockups)}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"main\">\n      <div className=\"container\">\n        <FavouriteAccounts\n          tokenContractId={token.contractId}\n          favouriteAccounts={favouriteAccounts}\n          uniqueUsers={uniqueUsers}\n          onSave={setFavouriteAccounts}\n        />\n        {lockupsPage(favouriteAccountsLockups)}\n      </div>\n    </div>\n  );\n}\n","import {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  IconButton,\n  Button,\n} from '@mui/material';\nimport CloseRoundedIcon from '@mui/icons-material/CloseRounded';\n\nexport default function ConfirmDialog(props: { message: string, isOpen: boolean, closeFn: any, callback: any }) {\n  const {\n    message,\n    isOpen,\n    closeFn,\n    callback,\n  } = props;\n\n  const handleConfirm = () => {\n    closeFn();\n    callback();\n  };\n\n  return (\n    <Dialog open={isOpen} sx={{ padding: 2 }} maxWidth=\"md\" onClose={closeFn}>\n      <DialogTitle>\n        Confirmation\n        <IconButton\n          aria-label=\"close\"\n          sx={{\n            position: 'absolute',\n            right: 8,\n            top: 8,\n          }}\n          onClick={closeFn}\n        >\n          <CloseRoundedIcon />\n        </IconButton>\n      </DialogTitle>\n      <DialogContent sx={{ minWidth: '320px' }}>\n        <div>{message}</div>\n      </DialogContent>\n      <DialogActions>\n        <Button color=\"error\" onClick={closeFn}>Cancel</Button>\n        <Button color=\"success\" variant=\"contained\" onClick={handleConfirm}>Confirm</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import { useContext, useState } from 'react';\n\nimport ConfirmDialog from '../ConfirmDialog';\nimport { INearProps, NearContext } from '../../services/near';\nimport { TMetadata } from '../../services/tokenApi';\nimport TokenAmountPreview from '../TokenAmountPreview';\n\nfunction ClaimAllLockups(params: { accountId: string | undefined, token: TMetadata, total: String }) {\n  const { near }: { near: INearProps | null } = useContext(NearContext);\n  const { accountId, token, total } = params;\n\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [dialogConfirmCallback, setDialogConfirmCallback] = useState<any>(() => null);\n  const closeDialog = () => setIsDialogOpen(false);\n  const openDialog = () => setIsDialogOpen(true);\n\n  if (!near) {\n    throw Error('Cannot access lockup api');\n  }\n\n  if (!accountId) {\n    throw Error('Undefined account cannot claim');\n  }\n\n  const handleClaimAllLockups = () => {\n    const perform = async () => {\n      if (!near) return;\n      if (!near.tokenApi) return;\n      if (!near.noLoginTokenApi) return;\n      if (!near.tokenContractId) return;\n\n      const storageBalance = await near.tokenApi.storageBalanceOf(accountId);\n      const isStoragePaid = (storageBalance !== null) && true;\n      if (isStoragePaid) {\n        near.noLoginApi.claim(accountId);\n      } else {\n        const bounds = await near.tokenApi.storageBalanceBounds();\n        const amount = bounds.max;\n\n        const callback = () => {\n          near.noLoginTokenApi.storageDeposit(near.tokenContractId, accountId, amount);\n        };\n        setDialogConfirmCallback(() => callback);\n        openDialog();\n      }\n    };\n\n    perform();\n  };\n\n  const depositConfirmMessage = `\n    Your account doesn't have storage deposit on the token contract. You will be redirected to pay for the storage, after that you will be able to claim your tokens.\n  `.trim();\n\n  return (\n    <div className=\"claim-wrapper\">\n      <h5>Total available</h5>\n      <TokenAmountPreview token={token} amount={total} />\n      <button className=\"button fullWidth\" type=\"button\" onClick={handleClaimAllLockups}>Claim All</button>\n      <ConfirmDialog message={depositConfirmMessage} isOpen={isDialogOpen} closeFn={closeDialog} callback={dialogConfirmCallback} />\n    </div>\n  );\n}\n\nexport default ClaimAllLockups;\n","import { useParams } from 'react-router-dom';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from '@mui/material';\nimport Row from '../../components/table/row';\nimport ClaimAllLockups from '../../components/Claim';\nimport { TMetadata } from '../../services/tokenApi';\nimport { convertAmount } from '../../utils';\n\nexport default function UserLockups({ lockups: allLockups, token, adminControls }: { lockups: any[], token: TMetadata, adminControls: boolean }) {\n  const { userId, id } = useParams();\n\n  const lockups = allLockups.filter((x) => {\n    if (id) {\n      return x.id.toString() === id;\n    }\n\n    return x.account_id === userId || x.id.toString() === userId;\n  });\n\n  const totalUnclaimedBalance = lockups.reduce((acc, obj) => acc + parseFloat(obj.unclaimed_balance), 0);\n\n  console.log('user lockups', userId, lockups);\n\n  return (\n    <div className=\"main\">\n      <div className=\"container\">\n\n        {!adminControls && <ClaimAllLockups accountId={userId} token={token} total={convertAmount(totalUnclaimedBalance, token.decimals)} />}\n\n        <TableContainer sx={{ boxShadow: 'unset' }}>\n          <Table className=\"main-table\" aria-label=\"collapsible table\">\n            <TableHead className=\"table-head\">\n              <TableRow>\n                <TableCell />\n                <TableCell align=\"left\">ID</TableCell>\n                <TableCell align=\"left\">Account ID</TableCell>\n                <TableCell align=\"right\">Start&nbsp;date</TableCell>\n                <TableCell align=\"right\">End&nbsp;date</TableCell>\n                <TableCell align=\"right\">Terminatable</TableCell>\n                <TableCell align=\"right\">Total&nbsp;amount</TableCell>\n                <TableCell align=\"center\">Progress</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {lockups.map((lockup) => (\n                <Row key={lockup.id} row={lockup} token={token} adminControls={adminControls} />\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n\n      </div>\n    </div>\n  );\n}\n","import { Link, NavLink, useLocation } from 'react-router-dom';\nimport { useContext, useEffect } from 'react';\nimport { Box } from '@mui/material';\nimport { INearProps, NearContext } from '../../services/near';\n\nexport default function Header({ adminControls }: { adminControls: boolean }) {\n  const location = useLocation();\n  const currentContractName = location.pathname.split('/')[1];\n\n  const {\n    near, signOut,\n  }: {\n    near: INearProps | null, signIn: () => void, signOut: () => void,\n  } = useContext(NearContext);\n\n  useEffect(() => {\n    console.log(location.pathname);\n\n    return () => {};\n  }, [location]);\n\n  if (!near) return null;\n\n  const {\n    signedIn,\n    signedAccountId,\n    isAdmin,\n    isCouncilMember,\n  } = near.currentUser;\n\n  const lockupsPageViewPolicy = adminControls && (isAdmin || isCouncilMember);\n\n  return (\n    <div className=\"header\">\n      <div className=\"container\">\n        <Box sx={{ display: 'flex' }}>\n          <Link className=\"logo\" to=\"/\">LOCKUPS</Link>\n          <div className=\"nav\">\n            <NavLink className=\"nav-link\" to={lockupsPageViewPolicy ? `/${currentContractName}/admin/lockups` : `/${currentContractName}/lockups`}>Lockups</NavLink>\n            <NavLink className=\"nav-link\" to={lockupsPageViewPolicy ? `/${currentContractName}/admin/draft_groups` : `/${currentContractName}/draft_groups`}>Lockup Drafts</NavLink>\n            <NavLink className=\"nav-link\" to={lockupsPageViewPolicy ? `/${currentContractName}/admin/about` : `/${currentContractName}/about`}>About</NavLink>\n          </div>\n          {adminControls && signedIn && (\n            <Box sx={{ marginTop: '23px' }}>\n              <span className=\"account-name\">\n                {signedAccountId}\n              </span>\n              <button className=\"button\" type=\"button\" onClick={signOut}>Log out</button>\n            </Box>\n          )}\n        </Box>\n      </div>\n    </div>\n  );\n}\n","import { Alert } from '@mui/material';\nimport { ReactNode, useContext } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { INearProps, NearContext } from '../../services/near';\n\nfunction Auth({ children }: { children: ReactNode }) {\n  return <div className=\"container login\">{children}</div>;\n}\n\nfunction Authorize() {\n  const {\n    near, signIn,\n  }: {\n    near: INearProps | null, signIn: () => void,\n  } = useContext(NearContext);\n\n  if (!near) return null;\n\n  const { signedIn, isAdmin, isCouncilMember } = near.currentUser;\n\n  const showAlertForUser = signedIn && !(isAdmin || isCouncilMember);\n  const showLockups = signedIn && (isAdmin || isCouncilMember);\n\n  return (\n    <Auth>\n      { showAlertForUser && <Alert sx={{ margin: 2, width: '500px' }} severity=\"error\">You are not admin</Alert>}\n      { !signedIn && <button className=\"button\" type=\"button\" onClick={signIn}>Sign In</button> }\n      { showLockups && <Navigate to=\"lockups\" replace />}\n    </Auth>\n  );\n}\nexport default Authorize;\n","import { useContext } from 'react';\nimport { INearProps, NearContext } from '../../services/near';\n\nexport default function PayForContractStorage() {\n  const { near }: { near: INearProps | null } = useContext(NearContext);\n\n  const handlePay = () => {\n    const perform = async () => {\n      if (!near) {\n        return;\n      }\n      if (!near.tokenApi) {\n        return;\n      }\n      const bounds = await near.tokenApi.storageBalanceBounds();\n      const amount = bounds.max;\n\n      console.log(amount);\n      const result = await near.tokenApi.storageDeposit(near.lockupContractId, amount);\n      console.log(result);\n    };\n    perform();\n  };\n\n  return (\n    <div>\n      <div style={{ maxWidth: 640, margin: 'auto', paddingTop: 20 }}>\n        <p>\n          Please pay for the account storage in fungible token contract.\n          This is necessary to allow lockup contract to hold locked fungible token funds.\n          This is a one time payment for the lockup contract.\n          Additionally, all users claiming lockups will have to pay for the\n          storage for their account too.\n        </p>\n\n        <button className=\"button fullWidth\" type=\"button\" onClick={handlePay}>\n          Pay\n        </button>\n      </div>\n    </div>\n  );\n}\n","import { Navigate, useLocation } from 'react-router-dom';\nimport { useContext } from 'react';\nimport { INearProps, NearContext } from '../../services/near';\nimport PayForContractStorage from '../PayForContractStorage';\n\nexport default function RequireAuth({ children }: { children: JSX.Element }) {\n  const location = useLocation();\n  const currentPathname = location.pathname;\n  const draftGroupURL = location.pathname.includes('draft');\n  const {\n    near,\n  }: {\n    near: INearProps | null, signIn: () => void, signOut: () => void,\n  } = useContext(NearContext);\n\n  if (!near) return null;\n\n  const { signedIn, isAdmin, isCouncilMember } = near.currentUser;\n\n  const currentContractName = location.pathname.split('/')[1];\n\n  if (!signedIn || !(isAdmin || isCouncilMember)) {\n    if (draftGroupURL) {\n      return <Navigate to={currentPathname.replace(/\\/admin/, '')} replace />;\n    }\n    return <Navigate to={`/${currentContractName}/admin`} replace />;\n  }\n\n  if (!near.isContractFtStoragePaid) {\n    return (\n      <div className=\"container\">\n        <PayForContractStorage />\n      </div>\n    );\n  }\n\n  return children;\n}\n","import { Box, InputAdornment, TextField } from '@mui/material';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { ChangeEvent, useState } from 'react';\nimport SearchIcon from '@mui/icons-material/Search';\nimport { DEFAULT_CONTRACT_NAME } from '../../config';\n\nexport default function Homepage(\n  { lockups }: { lockups: any[] },\n) {\n  const [address, setAddress] = useState(DEFAULT_CONTRACT_NAME);\n  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\n    setAddress(e.target.value);\n  };\n  const navigate = useNavigate();\n\n  const handleOpenLockupContract = () => {\n    const url = `/${address}/lockups`;\n    navigate(url);\n    window.location.reload();\n  };\n\n  return (\n    <div className=\"root\">\n      <div className=\"header\">\n        <div className=\"container\">\n          <Box sx={{ display: 'flex' }}>\n            <Link className=\"logo\" to=\"/\">LOCKUPS</Link>\n          </Box>\n        </div>\n      </div>\n      <div className=\"main\">\n        <div className=\"container home\">\n\n          <ul className=\"home-list\">\n            <li>\n              <div>\n                <span>Total contracts</span>\n                <b>256</b>\n              </div>\n            </li>\n            <li>\n              <div>\n                <span>Total locked</span>\n                <b>$5,336,000</b>\n              </div>\n            </li>\n            <li>\n              <div>\n                <span>Total lockups</span>\n                <b>{lockups?.length || 42}</b>\n              </div>\n            </li>\n          </ul>\n\n          <h2>Manage token vesting on NEAR</h2>\n          <p>Create new lockup contract to be used by startup</p>\n\n          <Link to=\"/new_lockup_contract\" className=\"button link-button\">Create Lockup Contract</Link>\n\n          <div className=\"line\" />\n\n          <div className=\"search-container\">\n            <TextField\n              variant=\"outlined\"\n              value={address}\n              onChange={handleChange}\n              className=\"input\"\n              placeholder=\"Enter existing Lockup contract address\"\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <SearchIcon />\n                  </InputAdornment>\n                ),\n              }}\n            />\n            <button className=\"button\" onClick={handleOpenLockupContract} aria-label=\"open\" type=\"button\">\n              Search\n            </button>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  );\n}\n","export default function NotFoundContract() {\n  return (\n    <div className=\"container\">\n      Contract not found\n    </div>\n  );\n}\n","import {\n  Link, useLocation,\n} from 'react-router-dom';\nimport { useContext } from 'react';\nimport { Box } from '@mui/material';\nimport { INearProps, NearContext } from '../../services/near';\n\nimport '../../styles/footer.scss';\n\nexport default function Footer() {\n  const location = useLocation();\n  const currentPathname = location.pathname;\n  const isAdminView = location.pathname.includes('admin');\n\n  const index = currentPathname.indexOf('/', 1);\n  const updatedPathname = `${currentPathname.substring(0, index)}/admin${currentPathname.substring(index, currentPathname.length)}`;\n\n  const {\n    near,\n  }: {\n    near: INearProps | null,\n  } = useContext(NearContext);\n\n  if (!near) return null;\n\n  return (\n    <div className=\"footer\">\n      <div className=\"container\">\n        <Box sx={{ display: 'flex' }}>\n          <div className=\"nav\">\n            <Link className=\"nav-link\" to=\"/terms\">Terms</Link>\n            <Link className=\"nav-link\" to=\"/privacy\">Privacy</Link>\n            {isAdminView ? <Link className=\"nav-link\" to={currentPathname.replace(/\\/admin/, '')}>User view</Link>\n              : <Link className=\"nav-link\" to={updatedPathname}>Admin view</Link>}\n          </div>\n        </Box>\n      </div>\n    </div>\n  );\n}\n","import {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n} from '@mui/material';\nimport { useParams } from 'react-router-dom';\nimport { useContext, useEffect, useState } from 'react';\nimport DraftsTableRow from '../../components/DraftsTable/row';\nimport { TMetadata } from '../../services/tokenApi';\nimport { INearProps, NearContext } from '../../services/near';\n\nexport default function PageDraft({\n  token, adminControls,\n}: { token: TMetadata, adminControls: boolean }) {\n  const draftId = parseInt(useParams().draftId || '', 10);\n  const { near }: { near: INearProps | null } = useContext(NearContext);\n  const [draft, setDraft] = useState<any>();\n\n  useEffect(() => {\n    const fetchDraft = async () => {\n      console.log('fetchDraft called');\n      if (!near) {\n        return;\n      }\n      const result = await near.api.getDrafts([draftId]);\n      const drafts = result.map((x: any) => Object.assign(x[1].lockup_create, { id: x[0] }));\n      setDraft(drafts[0]);\n    };\n\n    fetchDraft(); // .catch(console.error);\n  }, [near, draftId]);\n\n  console.log(draft);\n\n  const progressShow = true;\n\n  return (\n    <div className=\"container\">\n      {draft && (\n      <Table className=\"main-table\" aria-label=\"collapsible table\">\n        <TableHead className=\"table-head\">\n          <TableRow>\n            <TableCell />\n            <TableCell align=\"left\">ID</TableCell>\n            <TableCell align=\"left\">Account ID</TableCell>\n            <TableCell align=\"right\">Start&nbsp;date</TableCell>\n            <TableCell align=\"right\">End&nbsp;date</TableCell>\n            <TableCell align=\"right\">Total&nbsp;amount</TableCell>\n            {progressShow && <TableCell align=\"center\">Progress</TableCell>}\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          <DraftsTableRow row={draft} token={token} adminControls={adminControls} progressShow={progressShow} />\n        </TableBody>\n      </Table>\n      )}\n    </div>\n  );\n}\n","import {\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\nimport {\n  Routes, Route, HashRouter, Navigate,\n} from 'react-router-dom';\nimport { useSnackbar } from 'notistack';\nimport Big from 'big.js';\n\nimport { txLinkInExplorer, nearTo } from '../../utils';\nimport { INearProps, NearContext } from '../../services/near';\nimport About from '../../pages/About';\nimport ImportDraftGroup from '../ImportDraftGroup';\nimport PageDraftGroup from '../../pages/PageDraftGroup';\nimport PageDraftGroupsIndex from '../../pages/PageDraftGroupsIndex';\nimport NewLockupContract from '../../pages/NewLockupContract';\nimport Lockups from '../../pages/Lockups';\nimport UserLockups from '../../pages/UserLockups';\nimport Header from '../Header';\nimport Authorize from '../Authorize';\nimport RequireAuth from '../RequireAuth';\nimport { TMetadata } from '../../services/tokenApi';\nimport Homepage from '../../pages/Homepage';\nimport NotFoundContract from '../../pages/NotFoundContract';\nimport Footer from '../Footer';\nimport PageDraft from '../../pages/PageDraft';\n\nfunction Customer({\n  lockups, token, contractId, near,\n}: {\n  lockups: any, token: TMetadata, contractId: string | null, near: INearProps | null,\n}) {\n  if (!lockups) return null;\n\n  return (\n    <>\n      <Header adminControls={false} />\n      <Routes>\n        <Route path=\"/\" element={<Navigate replace to=\"lockups\" />} />\n        <Route path=\"/about\" element={<About lockups={lockups} token_account_id={contractId} />} />\n        <Route path=\"/lockups\" element={contractId && near && <Lockups lockups={lockups} token={{ ...token, contractId }} adminControls={false} />} />\n        <Route path=\"/lockups/:userId\" element={<UserLockups lockups={lockups} token={token} adminControls={false} />} />\n        <Route path=\"/lockups/:userId/:id\" element={<UserLockups lockups={lockups} token={token} adminControls={false} />} />\n        <Route path=\"/draft_groups\" element={<PageDraftGroupsIndex token={token} adminControls={false} />} />\n        <Route path=\"/draft_groups/:draftGroupId\" element={<PageDraftGroup token={token} adminControls={false} />} />\n        <Route path=\"/drafts/:draftId\" element={<PageDraft token={token} adminControls={false} />} />\n      </Routes>\n    </>\n  );\n}\n\nfunction Admin({\n  lockups, token, tokenContractId, near,\n}: {\n  lockups: any, token: TMetadata, tokenContractId: string | null, near: INearProps | null,\n}) {\n  if (!lockups) return null;\n\n  const showLockups = tokenContractId && near;\n\n  return (\n    <>\n      <Header adminControls />\n      <Routes>\n        <Route path=\"/\" element={<Authorize />} />\n        <Route path=\"/about\" element={<About lockups={lockups} token_account_id={tokenContractId} />} />\n        <Route path=\"/lockups\" element={showLockups && <RequireAuth><Lockups lockups={lockups} token={{ ...token, contractId: tokenContractId }} adminControls /></RequireAuth>} />\n        <Route path=\"/lockups/:userId\" element={<RequireAuth><UserLockups lockups={lockups} token={token} adminControls /></RequireAuth>} />\n        <Route path=\"/lockups/:userId/:id\" element={<RequireAuth><UserLockups lockups={lockups} token={token} adminControls /></RequireAuth>} />\n        <Route path=\"/draft_groups\" element={<RequireAuth><PageDraftGroupsIndex token={token} adminControls /></RequireAuth>} />\n        <Route path=\"/draft_groups/:draftGroupId\" element={<RequireAuth><PageDraftGroup token={token} adminControls /></RequireAuth>} />\n        <Route path=\"/drafts/:draftId\" element={<RequireAuth><PageDraft token={token} adminControls /></RequireAuth>} />\n        <Route path=\"/import_draft_group\" element={<RequireAuth><ImportDraftGroup token={token} adminControls /></RequireAuth>} />\n      </Routes>\n    </>\n  );\n}\n\nexport default function App() {\n  const { enqueueSnackbar } = useSnackbar();\n  const { near }: { near: INearProps | null } = useContext(NearContext);\n  const [contractState, setContractState] = useState({});\n  const [contractId, setContractId] = useState<string | null>(null);\n  const [token, setToken] = useState<TMetadata>({\n    decimals: 0,\n    icon: null,\n    name: '',\n    reference: null,\n    reference_hash: null,\n    spec: '',\n    symbol: '',\n  });\n\n  useEffect(() => {\n    if (!enqueueSnackbar) return;\n    if (!near) return;\n    if (!token) return;\n    if (token.spec === '') {\n      return;\n    }\n\n    const perform = async () => {\n      const searchParams = new URLSearchParams(window.location.search);\n      const transactionHashesRaw: string | null = searchParams.get('transactionHashes');\n      if (!transactionHashesRaw) {\n        return;\n      }\n      const txHash = transactionHashesRaw.split(',')[0];\n      console.log('txHash', txHash);\n      const txStatus = await near.rpcProvider.txStatus(txHash, 'sender.testnet');\n      console.log(txStatus);\n\n      const methodName = txStatus.transaction.actions[0].FunctionCall.method_name;\n\n      const successValue = (txStatus.status as any).SuccessValue;\n\n      const args = JSON.parse(atob(txStatus.transaction.actions[0].FunctionCall.args));\n\n      if (methodName === 'claim') {\n        if (successValue) {\n          const unpacked = JSON.parse(atob(successValue));\n          if (unpacked !== '0') {\n            const amount = new Big(unpacked).div(new Big(10).pow(token.decimals)).round(2, Big.roundDown);\n            enqueueSnackbar(`Claimed ${amount} ${token.symbol}`, { variant: 'success' });\n            return;\n          }\n        }\n        enqueueSnackbar(`Claim failed: ${txLinkInExplorer(txHash)}`, { variant: 'error' });\n        return;\n      }\n\n      if (methodName === 'storage_deposit') {\n        const unpacked = JSON.parse(atob(successValue));\n        const amount = parseFloat(nearTo(unpacked.total, 9)).toString();\n        console.log(amount);\n        const accountId = args.account_id;\n        const message = `Successfully paid ${amount}N for FT storage of ${accountId}`;\n        enqueueSnackbar(message, { variant: 'success' });\n        return;\n      }\n\n      if (methodName === 'ft_transfer_call') {\n        const txMsg = JSON.parse(args.msg);\n        console.log(txMsg);\n        if (txMsg.schedule) {\n          const unpacked = JSON.parse(atob(successValue));\n          const amount = new Big(unpacked).div(new Big(10).pow(token.decimals)).round(2, Big.roundDown);\n          console.log(amount);\n          const totalBalance = txMsg.schedule[txMsg.schedule.length - 1].balance;\n          if (totalBalance === unpacked) {\n            const statusMessage = `Created lockup for ${txMsg.account_id} with amount ${amount} ${token.symbol}`;\n            enqueueSnackbar(statusMessage, { variant: 'success' });\n            return;\n          }\n\n          const statusMessage = `Failed to create lockup for ${txMsg.account_id}: ${txLinkInExplorer(txHash)}`;\n          enqueueSnackbar(statusMessage, { variant: 'error' });\n          return;\n        }\n        if (txMsg.draft_group_id !== null) {\n          const unpacked = JSON.parse(atob(successValue));\n          const amount = new Big(unpacked).div(new Big(10).pow(token.decimals)).round(2, Big.roundDown);\n          console.log(amount);\n          if (unpacked !== '0') {\n            const statusMessage = `Funded draft group ${txMsg.draft_group_id} with amount ${amount} ${token.symbol}`;\n            enqueueSnackbar(statusMessage, { variant: 'success' });\n            return;\n          }\n          const statusMessage = `Failed to fund draft group ${txMsg.draft_group_id}: ${txLinkInExplorer(txHash)}`;\n          enqueueSnackbar(statusMessage, { variant: 'error' });\n          return;\n        }\n\n        enqueueSnackbar(`Transaction performed, TODO ${txHash}!`, { variant: 'warning' });\n        return;\n      }\n\n      if (methodName === 'terminate') {\n        if (successValue) {\n          const unpacked = JSON.parse(atob(successValue));\n          console.log(unpacked);\n          const amount = new Big(unpacked).div(new Big(10).pow(token.decimals)).round(2, Big.roundDown);\n          const message = `Terminated lockup #${args.lockup_index}, unvested amount: ${amount}`;\n          enqueueSnackbar(message, { variant: 'success' });\n          return;\n        }\n        enqueueSnackbar(`Terminate lockup failed: ${txLinkInExplorer(txHash)}`, { variant: 'error' });\n        return;\n      }\n\n      const message = `UNHANDLED Transaction \"${methodName}\" : ${txLinkInExplorer(txHash)}`;\n      enqueueSnackbar(message, { variant: 'warning' });\n    };\n\n    perform();\n  }, [enqueueSnackbar, near, token]);\n\n  useEffect(() => {\n    let active = true;\n\n    if (near) {\n      const load = async () => {\n        const lockups = await near.api.loadAllLockups();\n        const metadata = await near.tokenApi.ftMetadata();\n        if (!active) {\n          return;\n        }\n        setToken(metadata);\n        setContractState({ lockups, name: 'name' });\n      };\n\n      if (near.tokenContractId) {\n        load();\n      }\n    }\n\n    return () => { active = false; };\n  }, [near]);\n\n  useEffect(() => {\n    if (near && near.tokenApi) {\n      setContractId(near.tokenApi.getContract().contractId);\n    }\n\n    return () => {};\n  }, [near]);\n\n  const { lockups }: any = contractState as any;\n\n  return (\n    <HashRouter>\n      <Routes>\n        <Route path=\"/\" element={<Homepage lockups={lockups} />} />\n        <Route path=\"/new_lockup_contract/\" element={<NewLockupContract />} />\n        <Route path=\"/:cid/*\" element={contractId && near && <Customer lockups={lockups} token={token} contractId={contractId} near={near} />} />\n        <Route path=\"/:cid/admin/*\" element={contractId && near && <Admin lockups={lockups} token={token} tokenContractId={contractId} near={near} />} />\n        <Route path=\"/:cid/not_found_contract/\" element={<NotFoundContract />} />\n        <Route path=\"*\" element={<NotFoundContract />} />\n      </Routes>\n      <Footer />\n    </HashRouter>\n  );\n}\n","import {\n  StrictMode, useEffect, useMemo, useState,\n} from 'react';\nimport { SnackbarProvider, useSnackbar } from 'notistack';\nimport { IconButton } from '@mui/material';\nimport CloseIcon from '@mui/icons-material/Close';\n\nimport App from './components/App';\nimport { NearContext, connectNear, INearProps } from './services/near';\n\nimport './index.css';\n\nfunction SnackbarCloseButton(props: { snackbarKey: any }) {\n  const { snackbarKey } = props;\n  const { closeSnackbar } = useSnackbar();\n\n  return (\n    <IconButton onClick={() => closeSnackbar(snackbarKey)}>\n      <CloseIcon style={{ color: 'white' }} />\n    </IconButton>\n  );\n}\n\n/* eslint react/no-unstable-nested-components: \"off\" */\n\nexport default function NearApp() {\n  const [near, setNear] = useState<INearProps | null>(null);\n\n  useEffect(() => {\n    async function connect() {\n      const nearConn: INearProps = await connectNear();\n      setNear(nearConn);\n    }\n\n    try {\n      connect();\n    } catch (e) {\n      console.log(e);\n    }\n  }, []);\n\n  const value = useMemo(() => ({\n    near,\n    signIn: () => { near?.api?.signIn(); },\n    signOut: () => {\n      if (!near) return;\n\n      near.api.signOut();\n      setNear({\n        ...near,\n        currentUser: {\n          signedIn: false,\n          signedAccountId: null,\n          isAdmin: false,\n          isCouncilMember: false,\n          daos: [],\n        },\n      });\n    },\n  }), [near]);\n\n  const handleClose = () => {\n    const url = new URL(window.location.href);\n    const sp = new URLSearchParams(url.search);\n    sp.delete('transactionHashes');\n    url.search = sp.toString();\n    window.history.pushState({}, null as any, url.toString());\n  };\n\n  return (\n    <StrictMode>\n      <NearContext.Provider value={value}>\n        <SnackbarProvider\n          autoHideDuration={null}\n          action={(snackbarKey) => <SnackbarCloseButton snackbarKey={snackbarKey} />}\n          onClose={handleClose}\n        >\n          <App />\n        </SnackbarProvider>\n      </NearContext.Provider>\n    </StrictMode>\n  );\n}\n","import { render } from 'react-dom';\n\nimport NearApp from './NearApp';\n\nrender(\n  <NearApp />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}